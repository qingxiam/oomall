<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å•†æˆ·è´¦æˆ·ç®¡ç†ç³»ç»Ÿ</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Microsoft YaHei', Arial, sans-serif;
            background-color: #f5f5f5;
            color: #333;
            margin: 0;
            padding: 0;
            overflow: hidden;
        }

        .container {
            display: flex;
            width: 100vw;
            height: 100vh;
            max-width: 100%;
            max-height: 100%;
        }

        /* å·¦ä¾§å¯¼èˆªæ  */
        .sidebar {
            width: 20%;
            min-width: 180px;
            max-width: 220px;
            background: linear-gradient(135deg, #4CAF50, #45a049);
            color: white;
            padding: 15px;
            box-shadow: 2px 0 5px rgba(0,0,0,0.1);
            overflow-y: auto;
        }

        .sidebar-header {
            display: flex;
            align-items: center;
            margin-bottom: 20px;
        }

        .back-arrow {
            width: 24px;
            height: 24px;
            background: rgba(255,255,255,0.2);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 12px;
            cursor: pointer;
            font-size: 12px;
        }

        .nav-title {
            font-size: 16px;
            font-weight: bold;
        }

        .nav-menu {
            list-style: none;
        }

        .nav-item {
            margin: 10px 0;
            padding: 10px 12px;
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            font-size: 14px;
        }

        .nav-item:hover {
            background: rgba(255,255,255,0.1);
        }

        .nav-item.active {
            background: rgba(255,255,255,0.2);
            font-weight: bold;
        }

        .nav-icon {
            width: 16px;
            height: 16px;
            margin-right: 8px;
            background: rgba(255,255,255,0.8);
            border-radius: 3px;
        }

        /* ä¸»å†…å®¹åŒºåŸŸ */
        .main-content {
            flex: 1;
            background: white;
            padding: 20px;
            overflow-y: auto;
            display: flex;
            flex-direction: column;
        }

        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 1px solid #eee;
            flex-shrink: 0;
        }

        .search-box {
            display: flex;
            align-items: center;
            background: #f8f8f8;
            padding: 8px 12px;
            border-radius: 20px;
            border: 1px solid #ddd;
        }

        .search-input {
            border: none;
            background: none;
            outline: none;
            margin-left: 8px;
            width: 160px;
            font-size: 14px;
        }

        .user-info {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .welcome-text {
            color: #666;
            font-size: 14px;
        }

        .user-avatar {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            background: #4CAF50;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
            font-size: 14px;
        }

        /* é¡µé¢æ ‡é¢˜ */
        .page-title {
            font-size: 24px;
            color: #333;
            margin-bottom: 8px;
        }

        .page-subtitle {
            display: flex;
            align-items: center;
            color: #666;
            font-size: 14px;
        }

        .subtitle-icon {
            width: 16px;
            height: 16px;
            background: #4CAF50;
            border-radius: 3px;
            margin-right: 8px;
        }

        /* è¡¨å•åŒºåŸŸ */
        .form-section {
            background: #fafafa;
            padding: 20px;
            border-radius: 8px;
            margin: 15px 0;
            border: 1px solid #eee;
            flex: 1;
        }

        .form-title {
            font-size: 18px;
            color: #333;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
        }

        .form-title-icon {
            width: 20px;
            height: 20px;
            background: #4CAF50;
            border-radius: 4px;
            margin-right: 8px;
        }

        .form-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin-bottom: 15px;
        }

        .form-group {
            display: flex;
            flex-direction: column;
        }

        .form-group.full-width {
            grid-column: 1 / -1;
        }

        .form-label {
            font-weight: bold;
            color: #555;
            margin-bottom: 6px;
            font-size: 14px;
        }

        .form-input {
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 5px;
            font-size: 13px;
            transition: border-color 0.3s ease;
        }

        .form-input, .form-input::placeholder {
            color: #333;
        }

        textarea.form-input {
            resize: vertical;
            min-height: 80px;
        }

        .form-input:focus {
            outline: none;
            border-color: #4CAF50;
        }

        .form-buttons {
            display: flex;
            gap: 12px;
            margin-top: 15px;
        }

        .btn {
            padding: 10px 20px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 13px;
            font-weight: bold;
            transition: all 0.3s ease;
        }

        .btn-primary {
            background: #4CAF50;
            color: white;
        }

        .btn-primary:hover {
            background: #45a049;
        }

        .btn-secondary {
            background: #f44336;
            color: white;
        }

        .btn-secondary:hover {
            background: #da190b;
        }

        .btn-warning {
            background: #ff9800;
            color: white;
        }

        .btn-warning:hover {
            background: #e68900;
        }


        /* éšè—é¡µé¢ */
        .page {
            display: none;
        }

        .page.active {
            display: block;
        }

        .detail-card {
            background: #fff;
            border: 1px solid #e0e0e0;
            border-radius: 8px;
            padding: 16px;
            margin-top: 15px;
        }

        .detail-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 12px;
        }

        .detail-grid.full-width {
            grid-template-columns: 1fr;
        }

        .detail-item {
            background: #f9faf9;
            border: 1px solid #eef2ef;
            border-radius: 6px;
            padding: 10px 12px;
            font-size: 13px;
        }

        .detail-item strong {
            display: block;
            color: #2f5132;
            margin-bottom: 4px;
        }

        .status-tag {
            display: inline-block;
            padding: 2px 8px;
            border-radius: 12px;
            font-size: 12px;
            background: #e8f5e9;
            color: #388e3c;
            margin-left: 8px;
        }

        .history-list {
            list-style: disc;
            margin-left: 20px;
            color: #555;
            line-height: 1.6;
        }

        .info-banner {
            background: #fff8e1;
            border: 1px solid #ffe082;
            border-radius: 6px;
            padding: 12px 16px;
            color: #8d6e63;
            font-size: 13px;
            margin-bottom: 15px;
        }

        /* å“åº”å¼è®¾è®¡ */
        @media (max-width: 768px) {
            .container {
                flex-direction: column;
            }
            
            .sidebar {
                width: 100%;
                height: auto;
                min-width: auto;
                max-width: none;
            }
            
            .form-grid {
                grid-template-columns: 1fr;
            }
        }

        /* å¼¹çª—æ ·å¼ */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
        }

        .modal-overlay.show {
            opacity: 1;
            visibility: visible;
        }

        .modal {
            background: white;
            border-radius: 10px;
            padding: 30px;
            max-width: 400px;
            width: 90%;
            text-align: center;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            transform: scale(0.8);
            transition: transform 0.3s ease;
        }

        .modal-overlay.show .modal {
            transform: scale(1);
        }

        .modal-icon {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background: #4CAF50;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 20px;
            font-size: 24px;
            color: white;
        }

        .modal-icon.success {
            background: #4CAF50;
        }

        .modal-icon.warning {
            background: #ff9800;
        }

        .modal-icon.danger {
            background: #f44336;
        }

        .modal-title {
            font-size: 20px;
            font-weight: bold;
            color: #333;
            margin-bottom: 15px;
        }

        .modal-message {
            font-size: 16px;
            color: #666;
            margin-bottom: 25px;
            line-height: 1.5;
        }

        .modal-buttons {
            display: flex;
            gap: 15px;
            justify-content: center;
        }

        .modal-btn {
            padding: 12px 24px;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 14px;
            font-weight: bold;
            transition: all 0.3s ease;
            min-width: 100px;
        }

        .modal-btn-primary {
            background: #4CAF50;
            color: white;
        }

        .modal-btn-primary:hover {
            background: #45a049;
        }

        .modal-btn-secondary {
            background: #f5f5f5;
            color: #666;
            border: 1px solid #ddd;
        }

        .modal-btn-secondary:hover {
            background: #e9e9e9;
        }

        /* ç™»å½•é¡µé¢æ ·å¼ */
        .login-container {
            display: flex;
            width: 100vw;
            height: 100vh;
            background: linear-gradient(135deg, #4CAF50, #45a049);
            align-items: center;
            justify-content: center;
        }

        .login-card {
            background: white;
            border-radius: 15px;
            padding: 40px;
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.1);
            width: 100%;
            max-width: 450px;
            text-align: center;
        }

        .login-logo {
            width: 80px;
            height: 80px;
            background: linear-gradient(135deg, #4CAF50, #45a049);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 30px;
            font-size: 32px;
            color: white;
        }

        .login-title {
            font-size: 28px;
            font-weight: bold;
            color: #333;
            margin-bottom: 10px;
        }

        .login-subtitle {
            color: #666;
            margin-bottom: 30px;
            font-size: 16px;
        }

        .role-selection {
            margin-bottom: 25px;
        }

        .role-label {
            display: block;
            font-weight: bold;
            color: #555;
            margin-bottom: 10px;
            text-align: left;
        }

        .role-dropdown {
            position: relative;
            width: 100%;
        }

        .role-select {
            width: 100%;
            padding: 12px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            font-size: 14px;
            background: white;
            cursor: pointer;
            transition: border-color 0.3s ease;
            appearance: none;
            background-image: url("data:image/svg+xml;charset=UTF-8,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3e%3cpolyline points='6,9 12,15 18,9'%3e%3c/polyline%3e%3c/svg%3e");
            background-repeat: no-repeat;
            background-position: right 12px center;
            background-size: 16px;
            padding-right: 40px;
        }

        .role-select:focus {
            outline: none;
            border-color: #4CAF50;
        }

        .role-select:hover {
            border-color: #4CAF50;
        }

        .login-form {
            text-align: left;
        }

        .form-group-login {
            margin-bottom: 20px;
        }

        .form-label-login {
            display: block;
            font-weight: bold;
            color: #555;
            margin-bottom: 8px;
        }

        .form-input-login {
            width: 100%;
            padding: 12px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            font-size: 14px;
            transition: border-color 0.3s ease;
            box-sizing: border-box;
        }

        .form-input-login:focus {
            outline: none;
            border-color: #4CAF50;
        }

        .login-btn {
            width: 100%;
            padding: 15px;
            background: linear-gradient(135deg, #4CAF50, #45a049);
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-top: 10px;
        }

        .login-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(76, 175, 80, 0.3);
        }

        .login-btn:disabled {
            background: #ccc;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }

        .login-footer {
            margin-top: 20px;
            color: #999;
            font-size: 12px;
        }

        /* å•†å“ç®¡ç†æ ·å¼ */
        .product-filters {
            display: flex;
            gap: 15px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .filter-group {
            display: flex;
            flex-direction: column;
            min-width: 120px;
        }

        .filter-label {
            font-size: 12px;
            color: #666;
            margin-bottom: 5px;
        }

        .filter-select {
            padding: 8px;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 13px;
            background: white;
        }

        .product-search {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            align-items: center;
        }

        .search-input-product {
            flex: 1;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 14px;
        }

        .search-btn {
            padding: 10px 20px;
            background: #4CAF50;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 14px;
        }

        .search-btn:hover {
            background: #45a049;
        }

        .product-table {
            width: 100%;
            border-collapse: collapse;
            margin-bottom: 20px;
            background: white;
            border-radius: 6px;
            overflow: hidden;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        .product-table th {
            background: #f8f9fa;
            padding: 12px;
            text-align: left;
            font-weight: bold;
            color: #333;
            border-bottom: 1px solid #ddd;
            font-size: 14px;
        }

        .product-table td {
            padding: 12px;
            border-bottom: 1px solid #eee;
            font-size: 13px;
        }

        .product-table tr:hover {
            background: #f8f9fa;
        }

        .product-table tr.selected {
            background: #e8f5e9;
        }

        .status-badge {
            padding: 4px 8px;
            border-radius: 12px;
            font-size: 12px;
            font-weight: bold;
        }

        .status-approved {
            background: #d4edda;
            color: #155724;
        }

        .status-pending {
            background: #fff3cd;
            color: #856404;
        }

        .status-rejected {
            background: #f8d7da;
            color: #721c24;
        }

        .action-buttons {
            display: flex;
            gap: 8px;
        }

        .btn-edit {
            padding: 6px 12px;
            background: #007bff;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 12px;
        }

        .btn-edit:hover {
            background: #0056b3;
        }

        .btn-delete {
            padding: 6px 12px;
            background: #dc3545;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 12px;
        }

        .btn-delete:hover {
            background: #c82333;
        }

        .pagination {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 10px;
            margin-top: 20px;
        }

        .pagination button {
            padding: 8px 12px;
            border: 1px solid #ddd;
            background: white;
            cursor: pointer;
            border-radius: 4px;
            font-size: 13px;
        }

        .pagination button:hover {
            background: #f8f9fa;
        }

        .pagination button.active {
            background: #4CAF50;
            color: white;
            border-color: #4CAF50;
        }

        .pagination button:disabled {
            background: #f8f9fa;
            color: #999;
            cursor: not-allowed;
        }

        .add-product-btn {
            position: fixed;
            bottom: 30px;
            right: 30px;
            width: 60px;
            height: 60px;
            background: #4CAF50;
            color: white;
            border: none;
            border-radius: 50%;
            font-size: 24px;
            cursor: pointer;
            box-shadow: 0 4px 12px rgba(76, 175, 80, 0.3);
            transition: all 0.3s ease;
        }

        .add-product-btn:hover {
            background: #45a049;
            transform: scale(1.1);
        }

        /* é’ˆå¯¹509mmÃ—286mmæ¯”ä¾‹çš„ä¼˜åŒ– */
        @media (min-aspect-ratio: 16/9) {
            .sidebar {
                width: 18%;
                min-width: 160px;
                max-width: 200px;
            }
            
            .main-content {
                padding: 15px;
            }
            
            .form-section {
                padding: 15px;
            }
        }
    </style>
</head>
<body>
    <!-- ç™»å½•é¡µé¢ -->
    <div id="loginPage" class="login-container">
        <div class="login-card">
            <div class="login-logo">ğŸª</div>
            <h1 class="login-title">å•†æˆ·ç®¡ç†ç³»ç»Ÿ</h1>
            <p class="login-subtitle">è¯·é€‰æ‹©æ‚¨çš„è§’è‰²å¹¶ç™»å½•</p>
            
            <div class="role-selection">
                <label class="role-label">é€‰æ‹©è§’è‰²</label>
                <div class="role-dropdown">
                    <select class="role-select" id="roleSelect" onchange="selectRole(this.value)">
                        <option value="">è¯·é€‰æ‹©è§’è‰²</option>
                        <option value="merchant">å•†æˆ·</option>
                        <option value="service-provider">æœåŠ¡å•†</option>
                        <option value="platform-admin">å¹³å°ç®¡ç†äººå‘˜</option>
                        <option value="technician">ç»´ä¿®å·¥</option>
                    </select>
                </div>
            </div>
            
            <form class="login-form" onsubmit="handleLogin(event)">
                <div class="form-group-login">
                    <label class="form-label-login">ç”¨æˆ·å</label>
                    <input type="text" class="form-input-login" id="username" placeholder="è¯·è¾“å…¥ç”¨æˆ·å" required>
                </div>
                
                <div class="form-group-login">
                    <label class="form-label-login">å¯†ç </label>
                    <input type="password" class="form-input-login" id="password" placeholder="è¯·è¾“å…¥å¯†ç " required>
                </div>
                
                <button type="submit" class="login-btn" id="loginBtn" disabled>
                    ç™»å½•
                </button>
            </form>
            
            <div class="login-footer">
                <p>Â© 2024 å•†æˆ·ç®¡ç†ç³»ç»Ÿ. ä¿ç•™æ‰€æœ‰æƒåˆ©.</p>
            </div>
        </div>
    </div>

    <!-- ä¸»åº”ç”¨é¡µé¢ -->
    <div id="mainApp" class="container" style="display: none;">
        <!-- å·¦ä¾§å¯¼èˆªæ  -->
        <div class="sidebar">
            <div class="sidebar-header">
                <div class="back-arrow">â†</div>
                <div class="nav-title">å¯¼èˆª</div>
            </div>
            <ul class="nav-menu">
                <li class="nav-item" onclick="showPage('account-opening')">
                    <div class="nav-icon"></div>
                    å•†æˆ·å¼€æˆ·
                </li>
                <li class="nav-item" onclick="showPage('account-info')">
                    <div class="nav-icon"></div>
                    ç®¡ç†è´¦å·
                </li>
                <li class="nav-item active" onclick="showPage('products')">
                    <div class="nav-icon"></div>
                    ç®¡ç†å•†å“
                </li>
                <li class="nav-item" onclick="showPage('activities')">
                    <div class="nav-icon"></div>
                    ç®¡ç†æ´»åŠ¨
                </li>
                <li class="nav-item" onclick="showPage('service-providers')">
                    <div class="nav-icon"></div>
                    ç®¡ç†æœåŠ¡å•†
                </li>
                <li class="nav-item" onclick="showPage('orders')">
                    <div class="nav-icon"></div>
                    ç®¡ç†è®¢å•
                </li>
                <li class="nav-item" onclick="showPage('sales')">
                    <div class="nav-icon"></div>
                    é”€å”®æƒ…å†µ
                </li>
                <li class="nav-item" onclick="showPage('after-sales')">
                    <div class="nav-icon"></div>
                    ç®¡ç†å”®å
                </li>
            </ul>
        </div>

        <!-- ä¸»å†…å®¹åŒºåŸŸ -->
        <div class="main-content">
            <!-- å¤´éƒ¨ -->
            <div class="header">
                <div class="search-box">
                    <span>ğŸ”</span>
                    <input type="text" id="globalSearchInput" class="search-input" placeholder="è¾“å…¥å…³é”®è¯å¿«é€Ÿè·³è½¬ï¼ˆå¹³å°ç®¡ç†å‘˜æ”¯æŒï¼šå¦‚â€œå®¡æ ¸å•†æˆ·å¼€æˆ·â€ã€â€œå°ç¦é¡¾å®¢â€ã€â€œå»ºç«‹å•†å“åˆ†ç±»â€ç­‰ï¼‰">
                </div>
                <div class="user-info">
                    <span class="welcome-text" id="welcomeText">æ¬¢è¿ä½ ! å•†æˆ·</span>
                    <span>â–¼</span>
                    <div class="user-avatar" onclick="logout()" title="é€€å‡ºç™»å½•">ğŸ§</div>
                </div>
            </div>

            <!-- é¡µé¢å†…å®¹ -->
            <!-- ç®¡ç†å•†å“ä¸»é¡µé¢ -->
            <div id="products" class="page active">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                    <div>
                        <h1 class="page-title">ç®¡ç†å•†å“</h1>
                        <div class="page-subtitle">
                            <div class="subtitle-icon"></div>
                            å•†å“ç®¡ç†
                        </div>
                    </div>
                    <button class="btn btn-primary" onclick="showPage('apply-new-product')" style="margin: 0;">
                        + æ–°å¢å•†å“
                    </button>
                </div>

                <!-- ç­›é€‰å™¨ -->
                <div class="product-filters">
                    <div class="filter-group">
                        <label class="filter-label">å•†å“çŠ¶æ€</label>
                        <select class="filter-select" id="statusFilter">
                            <option value="">å…¨éƒ¨çŠ¶æ€</option>
                            <option value="approved">å·²å®¡æ ¸</option>
                            <option value="pending">å®¡æ ¸ä¸­</option>
                            <option value="rejected">æœªå®¡æ ¸</option>
                        </select>
                    </div>
                    <div class="filter-group">
                        <label class="filter-label">å•†å“ç±»åˆ«</label>
                        <select class="filter-select" id="categoryFilter">
                            <option value="">å…¨éƒ¨ç±»åˆ«</option>
                            <option value="electronics">ç”µå­äº§å“</option>
                            <option value="clothing">æœè£…</option>
                            <option value="food">é£Ÿå“</option>
                            <option value="books">å›¾ä¹¦</option>
                        </select>
                    </div>
                    <div class="filter-group">
                        <label class="filter-label">ä»·æ ¼èŒƒå›´</label>
                        <select class="filter-select" id="priceFilter">
                            <option value="">å…¨éƒ¨ä»·æ ¼</option>
                            <option value="0-100">0-100å…ƒ</option>
                            <option value="100-500">100-500å…ƒ</option>
                            <option value="500-1000">500-1000å…ƒ</option>
                            <option value="1000+">1000å…ƒä»¥ä¸Š</option>
                        </select>
                    </div>
                </div>

                <!-- æœç´¢æ¡† -->
                <div class="product-search">
                    <input type="text" class="search-input-product" placeholder="è¾“å…¥å•†å“åç§°æˆ–ç¼–å·" id="productSearchInput">
                    <button class="search-btn" onclick="searchProducts()">æœç´¢</button>
                </div>

                <!-- å•†å“åˆ—è¡¨è¡¨æ ¼ -->
                <table class="product-table">
                    <thead>
                        <tr>
                            <th>å•†å“åç§°</th>
                            <th>å•†å“ç¼–å·</th>
                            <th>ä»·æ ¼</th>
                            <th>å•†å“ç±»å‹</th>
                            <th>å®¡æ ¸çŠ¶æ€</th>
                            <th>æ“ä½œ</th>
                        </tr>
                    </thead>
                    <tbody id="productTableBody">
                        <tr>
                            <td>iPhone 15 Pro</td>
                            <td>P001</td>
                            <td>Â¥8,999</td>
                            <td>ç”µå­äº§å“</td>
                            <td><span class="status-badge status-approved">å·²å®¡æ ¸</span></td>
                            <td>
                                <div class="action-buttons">
                                    <button class="btn-edit" onclick="showPage('apply-product-change')">å˜æ›´å•†å“</button>
                                    <button class="btn-edit" onclick="showPage('modify-product-attributes')">ä¿®æ”¹å•†å“å±æ€§</button>
                                    <button class="btn-delete" onclick="deleteProduct('P001')">åˆ é™¤</button>
                                </div>
                            </td>
                        </tr>
                        <tr>
                            <td>Nikeè¿åŠ¨é‹</td>
                            <td>P002</td>
                            <td>Â¥599</td>
                            <td>æœè£…</td>
                            <td><span class="status-badge status-pending">å®¡æ ¸ä¸­</span></td>
                            <td>
                                <div class="action-buttons">
                                    <button class="btn-edit" onclick="showPage('apply-product-change')">å˜æ›´å•†å“</button>
                                    <button class="btn-edit" onclick="showPage('modify-product-attributes')">ä¿®æ”¹å•†å“å±æ€§</button>
                                    <button class="btn-delete" onclick="deleteProduct('P002')">åˆ é™¤</button>
                                </div>
                            </td>
                        </tr>
                        <tr>
                            <td>æœ‰æœºè‹¹æœ</td>
                            <td>P003</td>
                            <td>Â¥29.9</td>
                            <td>é£Ÿå“</td>
                            <td><span class="status-badge status-rejected">æœªå®¡æ ¸</span></td>
                            <td>
                                <div class="action-buttons">
                                    <button class="btn-edit" onclick="showPage('apply-product-change')">å˜æ›´å•†å“</button>
                                    <button class="btn-edit" onclick="showPage('modify-product-attributes')">ä¿®æ”¹å•†å“å±æ€§</button>
                                    <button class="btn-delete" onclick="deleteProduct('P003')">åˆ é™¤</button>
                                </div>
                            </td>
                        </tr>
                    </tbody>
                </table>

                <!-- åˆ†é¡µ -->
                <div class="pagination">
                    <button onclick="changePage(-1)" disabled>ä¸Šä¸€é¡µ</button>
                    <button class="active">1</button>
                    <button onclick="changePage(1)">2</button>
                    <button onclick="changePage(1)">3</button>
                    <button onclick="changePage(1)">ä¸‹ä¸€é¡µ</button>
                </div>

            </div>

            <!-- å•†å“æœç´¢ç»“æœé¡µé¢ -->
            <div id="product-search-results" class="page">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                    <div>
                        <h1 class="page-title">ç®¡ç†å•†å“</h1>
                        <div class="page-subtitle">
                            <div class="subtitle-icon"></div>
                            å•†å“ç®¡ç†
                        </div>
                    </div>
                    <button class="btn btn-primary" onclick="showPage('apply-new-product')" style="margin: 0;">
                        + æ–°å¢å•†å“
                    </button>
                </div>

                <!-- ç­›é€‰å™¨ -->
                <div class="product-filters">
                    <div class="filter-group">
                        <label class="filter-label">å•†å“çŠ¶æ€</label>
                        <select class="filter-select" id="searchStatusFilter">
                            <option value="approved">å®¡æ ¸é€šè¿‡</option>
                            <option value="pending">å®¡æ ¸ä¸­</option>
                            <option value="rejected">æœªå®¡æ ¸</option>
                        </select>
                    </div>
                    <div class="filter-group">
                        <label class="filter-label">å•†å“ç±»åˆ«</label>
                        <select class="filter-select" id="searchCategoryFilter">
                            <option value="food">é£Ÿå“</option>
                            <option value="electronics">ç”µå­äº§å“</option>
                            <option value="clothing">æœè£…</option>
                            <option value="books">å›¾ä¹¦</option>
                        </select>
                    </div>
                    <div class="filter-group">
                        <label class="filter-label">ä»·æ ¼</label>
                        <select class="filter-select" id="searchPriceFilter">
                            <option value="desc">é™åº</option>
                            <option value="asc">å‡åº</option>
                        </select>
                    </div>
                    <div class="filter-group">
                        <button class="search-btn" style="margin-top: 20px;">ç­›é€‰</button>
                    </div>
                </div>

                <!-- æœç´¢ç»“æœæœç´¢æ¡† -->
                <div class="product-search" style="margin-bottom: 20px;">
                    <input type="text" class="search-input-product" placeholder="å¦é—¨" id="searchResultsInput" value="å¦é—¨">
                    <button class="search-btn" onclick="searchProductsFromResults()">æœç´¢</button>
                </div>

                <!-- è¿”å›æŒ‰é’®å’Œæœç´¢ç»“æœä¿¡æ¯ -->
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px;">
                    <button class="btn btn-secondary" onclick="showPage('products')" style="margin: 0; padding: 8px 16px; font-size: 13px;">
                        â† è¿”å›å•†å“åˆ—è¡¨
                    </button>
                    <div style="color: #666; font-size: 14px;">
                        å·²ä¸ºæ‚¨æ‰¾åˆ°ä¸€ç§å•†å“:
                    </div>
                </div>

                <!-- æœç´¢ç»“æœè¡¨æ ¼ -->
                <table class="product-table">
                    <thead>
                        <tr>
                            <th>å•†å“åç§°</th>
                            <th>ç¼–å·</th>
                            <th>ä»·æ ¼(CNY)</th>
                            <th>å•†å“ç±»å‹</th>
                            <th>å®¡æ ¸çŠ¶æ€</th>
                            <th>æ“ä½œ</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>
                                <div style="display: flex; align-items: center; gap: 10px;">
                                    <div style="width: 40px; height: 40px; background: #ff6b6b; border-radius: 4px; display: flex; align-items: center; justify-content: center; color: white; font-size: 12px;">ğŸ…</div>
                                    <span>å¦é—¨è¥¿çº¢æŸ¿</span>
                                </div>
                            </td>
                            <td>600123</td>
                            <td>100.00</td>
                            <td>é£Ÿå“</td>
                            <td><span class="status-badge status-approved">å·²é€šè¿‡</span></td>
                            <td>
                                <div class="action-buttons">
                                    <button class="btn-edit" onclick="showPage('apply-product-change')">å˜æ›´å•†å“</button>
                                    <button class="btn-edit" onclick="showPage('modify-product-attributes')">ä¿®æ”¹å•†å“å±æ€§</button>
                                    <button class="btn-delete" onclick="deleteProduct('600123')">åˆ é™¤</button>
                                </div>
                            </td>
                        </tr>
                    </tbody>
                </table>

                <!-- åˆ†é¡µ -->
                <div style="display: flex; justify-content: space-between; align-items: center; margin-top: 20px;">
                    <div style="display: flex; align-items: center; gap: 10px; color: #666; font-size: 14px;">
                        <span>æ˜¾ç¤ºç»“æœ:</span>
                        <select style="padding: 4px 8px; border: 1px solid #ddd; border-radius: 4px;">
                            <option>1</option>
                            <option>10</option>
                            <option>20</option>
                            <option>50</option>
                        </select>
                    </div>
                    <div class="pagination">
                        <button disabled>â†</button>
                        <button class="active">1</button>
                        <button>â†’</button>
                    </div>
                </div>
            </div>

            <div id="account-info" class="page">
                <h1 class="page-title">è´¦æˆ·ä¿¡æ¯</h1>
                <div class="page-subtitle">
                    <div class="subtitle-icon"></div>
                    ç®¡ç†è´¦å·
                </div>

                <div class="form-section">
                    <h2 class="form-title">
                        <div class="form-title-icon"></div>
                        è´¦æˆ·ä¿¡æ¯
                    </h2>
                    <div class="form-grid">
                        <!-- å·¦åˆ— -->
                        <div class="form-group">
                            <label class="form-label">å•†æˆ·åç§°</label>
                            <input type="text" class="form-input" value="è±ªå®¢æ¥å•†åº—">
                        </div>
                        <div class="form-group">
                            <label class="form-label">å•†å“æ•°é‡ä¸Šé™ (ä»¶)</label>
                            <input type="number" class="form-input" value="100">
                        </div>
                        <div class="form-group">
                            <label class="form-label">å‘˜å·¥æ•°é‡ä¸Šé™ (äºº)</label>
                            <input type="number" class="form-input" value="100">
                        </div>
                        <div class="form-group">
                            <label class="form-label">å…é‚®é—¨æ§›</label>
                            <input type="text" class="form-input" value="20(CNY)">
                        </div>
                        
                        <!-- å³åˆ— -->
                        <div class="form-group">
                            <label class="form-label">æ³•äººå§“å</label>
                            <input type="text" class="form-input" value="å¼ ä¸‰">
                        </div>
                        <div class="form-group">
                            <label class="form-label">å•†æˆ·åœ°å€</label>
                            <input type="text" class="form-input" value="ç¦å»ºçœå¦é—¨å¸‚ç¿”å®‰åŒº">
                        </div>
                        <div class="form-group">
                            <label class="form-label">è”ç³»ç”µè¯</label>
                            <input type="tel" class="form-input" value="123456789">
                        </div>
                    </div>
                    <div class="form-buttons">
                        <button class="btn btn-primary" onclick="showPage('modify-account')">ä¿®æ”¹è´¦æˆ·ä¿¡æ¯</button>
                        <button class="btn btn-primary" onclick="showPage('modify-attributes')">ä¿®æ”¹è´¦æˆ·å±æ€§</button>
                    </div>
                </div>


                <div class="form-buttons" style="margin-top: 30px; justify-content: flex-end;">
                    <button class="btn btn-warning" onclick="showPage('suspend-account')">æš‚åœè´¦æˆ·</button>
                    <button class="btn btn-secondary" onclick="showPage('cancel-account')">æ³¨é”€è´¦æˆ·</button>
                </div>
            </div>

            <!-- å¼€æˆ·é¡µé¢ (MALL-SHOP-001) -->
            <div id="account-opening" class="page">
                <h1 class="page-title">å•†æˆ·å¼€æˆ·ç”³è¯·</h1>
                <div class="page-subtitle">
                    <div class="subtitle-icon"></div>
                    åˆ›å»ºæ–°å•†æˆ·è´¦æˆ·
                </div>

                <div class="form-section">
                    <h2 class="form-title">
                        <div class="form-title-icon"></div>
                        å¼€æˆ·ç”³è¯·ä¿¡æ¯
                    </h2>
                    <div class="form-grid">
                        <div class="form-group">
                            <label class="form-label">å•†æˆ·åç§° *</label>
                            <input type="text" class="form-input" placeholder="è¯·è¾“å…¥å•†æˆ·åç§°" id="merchantName">
                        </div>
                        <div class="form-group">
                            <label class="form-label">è”ç³»äººå§“å *</label>
                            <input type="text" class="form-input" placeholder="è¯·è¾“å…¥è”ç³»äººå§“å" id="contactName">
                        </div>
                        <div class="form-group">
                            <label class="form-label">è”ç³»ç”µè¯ *</label>
                            <input type="tel" class="form-input" placeholder="è¯·è¾“å…¥è”ç³»ç”µè¯" id="contactPhone">
                        </div>
                        <div class="form-group">
                            <label class="form-label">å•†æˆ·åœ°å€ *</label>
                            <input type="text" class="form-input" placeholder="è¯·è¾“å…¥å•†æˆ·åœ°å€" id="merchantAddress">
                        </div>
                        <div class="form-group">
                            <label class="form-label">å•†å“æ•°ç›®ä¸Šé™ *</label>
                            <input type="number" class="form-input" placeholder="è¯·è¾“å…¥å•†å“æ•°ç›®ä¸Šé™" id="productLimit">
                        </div>
                        <div class="form-group">
                            <label class="form-label">å•†æˆ·å‘˜å·¥ä¸Šé™ *</label>
                            <input type="number" class="form-input" placeholder="è¯·è¾“å…¥å•†æˆ·å‘˜å·¥ä¸Šé™" id="employeeLimit">
                        </div>
                    </div>
                    
                    <!-- é‡è¦æç¤º -->
                    <div style="background: #e3f2fd; padding: 15px; border-radius: 6px; border: 1px solid #bbdefb; margin: 20px 0;">
                        <p style="color: #1976d2; margin: 0; font-size: 14px;">
                            <strong>ğŸ“‹ é‡è¦æç¤ºï¼š</strong>ç”¨æˆ·å¼€æˆ·å‰éœ€å…ˆæ³¨å†Œç³»ç»Ÿç”¨æˆ·ï¼Œè¯·ç¡®ä¿æ‚¨å·²å®Œæˆç³»ç»Ÿç”¨æˆ·æ³¨å†Œã€‚
                        </p>
                    </div>
                    
                    <div class="form-buttons">
                        <button class="btn btn-primary" onclick="submitAccountOpening()">æäº¤å¼€æˆ·ç”³è¯·</button>
                        <button class="btn btn-secondary" onclick="showPage('account-info')">å–æ¶ˆ</button>
                    </div>
                </div>
            </div>

            <!-- ç”³è¯·æ–°å¢å•†å“é¡µé¢ (MALL-PRODUCT-004) -->
            <div id="apply-new-product" class="page">
                <h1 class="page-title">ç”³è¯·æ–°å¢å•†å“</h1>
                <div class="page-subtitle">
                    <div class="subtitle-icon"></div>
                    æ–°å¢å•†å“ç”³è¯·
                </div>

                <div class="form-section">
                    <h2 class="form-title">
                        <div class="form-title-icon"></div>
                        å•†å“åŸºæœ¬ä¿¡æ¯
                    </h2>
                    <div class="form-grid">
                        <div class="form-group">
                            <label class="form-label">å•†å“åˆ†ç±» *</label>
                            <select class="form-input" id="productCategory">
                                <option value="">è¯·é€‰æ‹©å•†å“åˆ†ç±»</option>
                                <option value="electronics">ç”µå­äº§å“</option>
                                <option value="clothing">æœè£…</option>
                                <option value="food">é£Ÿå“</option>
                                <option value="books">å›¾ä¹¦</option>
                                <option value="home">å®¶å±…ç”¨å“</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label class="form-label">å•†å“åç§° *</label>
                            <input type="text" class="form-input" id="productName" placeholder="è¯·è¾“å…¥å•†å“åç§°">
                        </div>
                        <div class="form-group">
                            <label class="form-label">åŸä»· *</label>
                            <input type="number" class="form-input" id="originalPrice" placeholder="è¯·è¾“å…¥åŸä»·">
                        </div>
                        <div class="form-group">
                            <label class="form-label">å•ä½ *</label>
                            <input type="text" class="form-input" id="unit" placeholder="è¯·è¾“å…¥å•ä½">
                        </div>
                        <div class="form-group">
                            <label class="form-label">äº§åœ° *</label>
                            <input type="text" class="form-input" id="origin" placeholder="è¯·è¾“å…¥äº§åœ°">
                        </div>
                        <div class="form-group">
                            <label class="form-label">æ¡ç  *</label>
                            <input type="text" class="form-input" id="barcode" placeholder="è¯·è¾“å…¥æ¡ç ">
                        </div>
                        <div class="form-group">
                            <label class="form-label">åˆ†è´¦æ¯”ä¾‹ *</label>
                            <input type="number" class="form-input" id="revenueShareRatio" placeholder="è¯·è¾“å…¥åˆ†è´¦æ¯”ä¾‹(%)" min="0" max="100">
                        </div>
                    </div>
                    
                    <!-- å•†å“ç±»å‹é€‰æ‹© -->
                    <div style="margin: 20px 0;">
                        <label class="form-label">å•†å“ç±»å‹</label>
                        <div style="display: flex; gap: 20px; margin-top: 10px;">
                            <label style="display: flex; align-items: center; gap: 8px;">
                                <input type="radio" name="productType" value="normal" checked onchange="toggleBundleOptions(false)">
                                æ™®é€šå•†å“
                            </label>
                            <label style="display: flex; align-items: center; gap: 8px;">
                                <input type="radio" name="productType" value="bundle" onchange="toggleBundleOptions(true)">
                                æ†ç»‘å•†å“
                            </label>
                        </div>
                    </div>

                    <!-- æ†ç»‘å•†å“é€‰é¡¹ -->
                    <div id="bundleOptions" style="display: none; margin: 20px 0;">
                        <h3 style="color: #333; margin-bottom: 15px;">æ†ç»‘å•†å“é…ç½®</h3>
                        <div class="form-group">
                            <label class="form-label">é€‰æ‹©å•†å“</label>
                            <select class="form-input" id="bundleProductSelect" multiple style="height: 120px;">
                                <option value="P001">iPhone 15 Pro</option>
                                <option value="P002">Nikeè¿åŠ¨é‹</option>
                                <option value="P003">æœ‰æœºè‹¹æœ</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label class="form-label">æ†ç»‘ä¸­æ¯ä¸ªå•†å“æ•°é‡</label>
                            <input type="text" class="form-input" id="bundleQuantities" placeholder="ä¾‹å¦‚ï¼š2,1,3">
                        </div>
                        <div class="form-group">
                            <label class="form-label">æ†ç»‘ä¸­å•†å“é—´åˆ†è´¦æ¯”ä¾‹</label>
                            <input type="text" class="form-input" id="bundleShareRatios" placeholder="ä¾‹å¦‚ï¼š50,30,20">
                        </div>
                    </div>
                    
                    <div class="form-buttons">
                        <button class="btn btn-primary" onclick="submitNewProduct()">æäº¤ç”³è¯·</button>
                        <button class="btn btn-secondary" onclick="showPage('products')">å–æ¶ˆ</button>
                    </div>
                </div>
            </div>

            <!-- é”€æˆ·é¡µé¢ (MALL-SHOP-002) -->
            <div id="account-cancellation" class="page">
                <h1 class="page-title">è´¦æˆ·æ³¨é”€ç”³è¯·</h1>
                <div class="page-subtitle">
                    <div class="subtitle-icon"></div>
                    æ³¨é”€å•†æˆ·è´¦æˆ·
                </div>

                <div class="form-section">
                    <h2 class="form-title">
                        <div class="form-title-icon"></div>
                        æ³¨é”€ç”³è¯·ä¿¡æ¯
                    </h2>
                    <div class="form-grid">
                        <div class="form-group full-width">
                            <label class="form-label">æ³¨é”€åŸå›  *</label>
                            <textarea class="form-input" rows="4" placeholder="è¯·è¯¦ç»†è¯´æ˜æ³¨é”€åŸå› "></textarea>
                        </div>
                        <div class="form-group full-width">
                            <label class="form-label">ç¡®è®¤ä¿¡æ¯</label>
                            <div style="background: #fff3cd; padding: 15px; border-radius: 6px; border: 1px solid #ffeaa7;">
                                <p style="color: #856404; margin-bottom: 10px;"><strong>âš ï¸ é‡è¦æé†’ï¼š</strong></p>
                                <ul style="color: #856404; margin-left: 20px;">
                                    <li>æ³¨é”€åè´¦æˆ·å°†æ— æ³•æ¢å¤</li>
                                    <li>è¯·ç¡®ä¿æ‰€æœ‰è®¢å•åˆ†è´¦å·²å®Œæˆ</li>
                                    <li>è¯·ç¡®ä¿å·²å¤„ç†å®Œæ‰€æœ‰å”®åé—®é¢˜</li>
                                    <li>è¯·ç¡®ä¿å·²å¤‡ä»½é‡è¦æ•°æ®</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                    <div class="form-buttons">
                        <button class="btn btn-secondary" onclick="submitAccountCancellation()">æäº¤æ³¨é”€ç”³è¯·</button>
                        <button class="btn btn-primary" onclick="showPage('account-info')">å–æ¶ˆ</button>
                    </div>
                </div>
            </div>

            <!-- ç”³è¯·å˜æ›´å•†å“é¡µé¢ (MALL-PRODUCT-005) -->
            <div id="apply-product-change" class="page">
                <h1 class="page-title">ç”³è¯·å˜æ›´å•†å“</h1>
                <div class="page-subtitle">
                    <div class="subtitle-icon"></div>
                    å•†å“å˜æ›´ç”³è¯·
                </div>

                <div class="form-section">
                    <h2 class="form-title">
                        <div class="form-title-icon"></div>
                        é€‰æ‹©è¦å˜æ›´çš„å•†å“
                    </h2>
                    <div class="form-group">
                        <label class="form-label">å·²å®¡æ ¸é€šè¿‡çš„å•†å“ *</label>
                        <select class="form-input" id="changeProductSelect">
                            <option value="">è¯·é€‰æ‹©è¦å˜æ›´çš„å•†å“</option>
                            <option value="P001">iPhone 15 Pro - ç”µå­äº§å“</option>
                            <option value="P002">Nikeè¿åŠ¨é‹ - æœè£…</option>
                        </select>
                    </div>
                    
                    <h2 class="form-title" style="margin-top: 30px;">
                        <div class="form-title-icon"></div>
                        å˜æ›´å•†å“ä¿¡æ¯
                    </h2>
                    <div class="form-grid">
                        <div class="form-group">
                            <label class="form-label">å•†å“åˆ†ç±»</label>
                            <select class="form-input" id="changeProductCategory">
                                <option value="">è¯·é€‰æ‹©å•†å“åˆ†ç±»</option>
                                <option value="electronics">ç”µå­äº§å“</option>
                                <option value="clothing">æœè£…</option>
                                <option value="food">é£Ÿå“</option>
                                <option value="books">å›¾ä¹¦</option>
                                <option value="home">å®¶å±…ç”¨å“</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label class="form-label">å•†å“åç§°</label>
                            <input type="text" class="form-input" id="changeProductName" placeholder="è¯·è¾“å…¥å•†å“åç§°">
                        </div>
                        <div class="form-group">
                            <label class="form-label">åŸä»·</label>
                            <input type="number" class="form-input" id="changeOriginalPrice" placeholder="è¯·è¾“å…¥åŸä»·">
                        </div>
                        <div class="form-group">
                            <label class="form-label">å•ä½</label>
                            <input type="text" class="form-input" id="changeUnit" placeholder="è¯·è¾“å…¥å•ä½">
                        </div>
                        <div class="form-group">
                            <label class="form-label">äº§åœ°</label>
                            <input type="text" class="form-input" id="changeOrigin" placeholder="è¯·è¾“å…¥äº§åœ°">
                        </div>
                        <div class="form-group">
                            <label class="form-label">æ¡ç </label>
                            <input type="text" class="form-input" id="changeBarcode" placeholder="è¯·è¾“å…¥æ¡ç ">
                        </div>
                        <div class="form-group">
                            <label class="form-label">åˆ†è´¦æ¯”ä¾‹</label>
                            <input type="number" class="form-input" id="changeRevenueShareRatio" placeholder="è¯·è¾“å…¥åˆ†è´¦æ¯”ä¾‹(%)" min="0" max="100">
                        </div>
                    </div>
                    
                    <div class="form-buttons">
                        <button class="btn btn-primary" onclick="submitProductChange()">æäº¤å˜æ›´ç”³è¯·</button>
                        <button class="btn btn-secondary" onclick="showPage('products')">å–æ¶ˆ</button>
                    </div>
                </div>
            </div>

            <!-- æŸ¥è¯¢å•†å“é¡µé¢ (MALL-PRODUCT-006) -->
            <div id="query-product" class="page">
                <h1 class="page-title">æŸ¥è¯¢å•†å“</h1>
                <div class="page-subtitle">
                    <div class="subtitle-icon"></div>
                    å•†å“æŸ¥è¯¢
                </div>

                <div class="form-section">
                    <h2 class="form-title">
                        <div class="form-title-icon"></div>
                        æŸ¥è¯¢æ¡ä»¶
                    </h2>
                    <div class="form-grid">
                        <div class="form-group">
                            <label class="form-label">å•†å“åç§°</label>
                            <input type="text" class="form-input" id="queryProductName" placeholder="è¯·è¾“å…¥å•†å“åç§°">
                        </div>
                        <div class="form-group">
                            <label class="form-label">æ¡ç </label>
                            <input type="text" class="form-input" id="queryBarcode" placeholder="è¯·è¾“å…¥æ¡ç ">
                        </div>
                    </div>
                    
                    <div class="form-buttons">
                        <button class="btn btn-primary" onclick="queryProducts()">æŸ¥è¯¢å•†å“</button>
                        <button class="btn btn-secondary" onclick="showPage('products')">è¿”å›</button>
                    </div>
                    
                    <!-- æŸ¥è¯¢ç»“æœ -->
                    <div id="queryResults" style="margin-top: 30px; display: none;">
                        <h2 class="form-title">
                            <div class="form-title-icon"></div>
                            æŸ¥è¯¢ç»“æœ
                        </h2>
                        <table class="product-table">
                            <thead>
                                <tr>
                                    <th>å•†å“åç§°</th>
                                    <th>å•†å“åˆ†ç±»</th>
                                    <th>åŸä»·</th>
                                    <th>å•ä½</th>
                                    <th>äº§åœ°</th>
                                    <th>æ¡ç </th>
                                    <th>åˆ†è´¦æ¯”ä¾‹</th>
                                    <th>æ“ä½œ</th>
                                </tr>
                            </thead>
                            <tbody id="queryResultsBody">
                                <!-- æŸ¥è¯¢ç»“æœå°†åœ¨è¿™é‡Œæ˜¾ç¤º -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- ä¿®æ”¹å•†å“å±æ€§é¡µé¢ (MALL-PRODUCT-007) -->
            <div id="modify-product-attributes" class="page">
                <h1 class="page-title">ä¿®æ”¹å•†å“å±æ€§</h1>
                <div class="page-subtitle">
                    <div class="subtitle-icon"></div>
                    å•†å“å±æ€§ä¿®æ”¹
                </div>

                <div class="form-section">
                    <h2 class="form-title">
                        <div class="form-title-icon"></div>
                        é€‰æ‹©è¦ä¿®æ”¹çš„å•†å“
                    </h2>
                    <div class="form-group">
                        <label class="form-label">å·²å®¡æ ¸é€šè¿‡çš„å•†å“ *</label>
                        <select class="form-input" id="modifyProductSelect">
                            <option value="">è¯·é€‰æ‹©è¦ä¿®æ”¹çš„å•†å“</option>
                            <option value="P001">iPhone 15 Pro - ç”µå­äº§å“</option>
                            <option value="P002">Nikeè¿åŠ¨é‹ - æœè£…</option>
                        </select>
                    </div>
                    
                    <h2 class="form-title" style="margin-top: 30px;">
                        <div class="form-title-icon"></div>
                        ä¿®æ”¹å•†å“å±æ€§
                    </h2>
                    <div class="form-grid">
                        <div class="form-group">
                            <label class="form-label">ç›¸å…³å•†å“</label>
                            <input type="text" class="form-input" id="relatedProducts" placeholder="è¯·è¾“å…¥ç›¸å…³å•†å“">
                        </div>
                        <div class="form-group">
                            <label class="form-label">è¿è´¹è®¡ç®—æ–¹æ³•</label>
                            <select class="form-input" id="shippingMethod">
                                <option value="">è¯·é€‰æ‹©è¿è´¹è®¡ç®—æ–¹æ³•</option>
                                <option value="fixed">å›ºå®šè¿è´¹</option>
                                <option value="weight">æŒ‰é‡é‡è®¡ç®—</option>
                                <option value="price">æŒ‰ä»·æ ¼è®¡ç®—</option>
                                <option value="free">å…è¿è´¹</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label class="form-label">é…é€ç‰©æµ</label>
                            <input type="text" class="form-input" id="deliveryLogistics" placeholder="è¯·è¾“å…¥é…é€ç‰©æµ">
                        </div>
                        <div class="form-group">
                            <label class="form-label">å•†å“é‡é‡(kg)</label>
                            <input type="number" class="form-input" id="productWeight" placeholder="è¯·è¾“å…¥å•†å“é‡é‡" step="0.1">
                        </div>
                        <div class="form-group">
                            <label class="form-label">SKU</label>
                            <input type="text" class="form-input" id="productSku" placeholder="è¯·è¾“å…¥SKU">
                        </div>
                    </div>
                    
                    <div class="form-buttons">
                        <button class="btn btn-primary" onclick="submitProductAttributes()">æäº¤ä¿®æ”¹</button>
                        <button class="btn btn-secondary" onclick="showPage('products')">å–æ¶ˆ</button>
                    </div>
                </div>
            </div>

            <!-- ä¿®æ”¹è´¦æˆ·é¡µé¢ (MALL-SHOP-003) -->
            <div id="modify-account" class="page">
                <h1 class="page-title">ä¿®æ”¹è´¦æˆ·ä¿¡æ¯</h1>
                <div class="page-subtitle">
                    <div class="subtitle-icon"></div>
                    ä¿®æ”¹å•†æˆ·åŸºæœ¬ä¿¡æ¯
                </div>

                <div class="form-section">
                    <h2 class="form-title">
                        <div class="form-title-icon"></div>
                        è´¦æˆ·ä¿¡æ¯ä¿®æ”¹
                    </h2>
                    <div class="form-grid">
                        <div class="form-group">
                            <label class="form-label">å•†æˆ·åç§° *</label>
                            <input type="text" class="form-input" value="è±ªå®¢æ¥å•†åº—">
                        </div>
                        <div class="form-group">
                            <label class="form-label">å•†å“æ•°ç›®ä¸Šé™ *</label>
                            <input type="number" class="form-input" value="100">
                        </div>
                        <div class="form-group">
                            <label class="form-label">å•†æˆ·å‘˜å·¥ä¸Šé™ *</label>
                            <input type="number" class="form-input" value="100">
                        </div>
                        <div class="form-group full-width">
                            <label class="form-label">ä¿®æ”¹è¯´æ˜</label>
                            <textarea class="form-input" rows="3" placeholder="è¯·è¯´æ˜ä¿®æ”¹åŸå› "></textarea>
                        </div>
                    </div>
                    <div class="form-buttons">
                        <button class="btn btn-primary" onclick="submitAccountModification()">æäº¤ä¿®æ”¹ç”³è¯·</button>
                        <button class="btn btn-secondary" onclick="showPage('account-info')">å–æ¶ˆ</button>
                    </div>
                </div>
            </div>

            <!-- ä¿®æ”¹è´¦æˆ·å±æ€§é¡µé¢ (MALL-SHOP-004) -->
            <div id="modify-attributes" class="page">
                <h1 class="page-title">ä¿®æ”¹è´¦æˆ·å±æ€§</h1>
                <div class="page-subtitle">
                    <div class="subtitle-icon"></div>
                    ä¿®æ”¹å•†æˆ·å±æ€§ä¿¡æ¯
                </div>

                <div class="form-section">
                    <h2 class="form-title">
                        <div class="form-title-icon"></div>
                        è´¦æˆ·å±æ€§ä¿®æ”¹
                    </h2>
                    <div class="form-grid">
                        <div class="form-group">
                            <label class="form-label">è”ç³»äººå§“å *</label>
                            <input type="text" class="form-input" value="å¼ ä¸‰">
                        </div>
                        <div class="form-group">
                            <label class="form-label">è”ç³»äººç”µè¯ *</label>
                            <input type="tel" class="form-input" value="123456789">
                        </div>
                        <div class="form-group">
                            <label class="form-label">è”ç³»äººåœ°å€ *</label>
                            <input type="text" class="form-input" value="ç¦å»ºçœå¦é—¨å¸‚ç¿”å®‰åŒº">
                        </div>
                        <div class="form-group">
                            <label class="form-label">å…é‚®é—¨æ§› *</label>
                            <input type="text" class="form-input" value="20(CNY)">
                        </div>
                        <div class="form-group full-width">
                            <label class="form-label">ä¿®æ”¹è¯´æ˜</label>
                            <textarea class="form-input" rows="3" placeholder="è¯·è¯´æ˜ä¿®æ”¹åŸå› "></textarea>
                        </div>
                    </div>
                    <div class="form-buttons">
                        <button class="btn btn-primary" onclick="submitAttributeModification()">æäº¤å±æ€§ä¿®æ”¹</button>
                        <button class="btn btn-secondary" onclick="showPage('account-info')">å–æ¶ˆ</button>
                    </div>
                </div>
            </div>

            <!-- æš‚åœè´¦æˆ·é¡µé¢ -->
            <div id="suspend-account" class="page">
                <h1 class="page-title">æš‚åœè´¦æˆ·</h1>
                <div class="page-subtitle">
                    <div class="subtitle-icon"></div>
                    æš‚åœå•†æˆ·è´¦æˆ·
                </div>

                <div class="form-section">
                    <h2 class="form-title">
                        <div class="form-title-icon"></div>
                        æš‚åœè´¦æˆ·ç”³è¯·
                    </h2>
                    <div class="form-grid">
                        <div class="form-group full-width">
                            <label class="form-label">æš‚åœåŸå›  *</label>
                            <textarea class="form-input" rows="4" placeholder="è¯·è¯¦ç»†è¯´æ˜æš‚åœè´¦æˆ·çš„åŸå› "></textarea>
                        </div>
                        <div class="form-group full-width">
                            <label class="form-label">æš‚åœæœŸé™</label>
                            <select class="form-input">
                                <option value="1">1ä¸ªæœˆ</option>
                                <option value="3">3ä¸ªæœˆ</option>
                                <option value="6">6ä¸ªæœˆ</option>
                                <option value="12">12ä¸ªæœˆ</option>
                                <option value="indefinite">æ— é™æœŸ</option>
                            </select>
                        </div>
                    </div>
                    <div class="form-buttons">
                        <button class="btn btn-warning" onclick="submitAccountSuspension()">æäº¤æš‚åœç”³è¯·</button>
                        <button class="btn btn-secondary" onclick="showPage('account-info')">å–æ¶ˆ</button>
                    </div>
                </div>
            </div>

            <!-- æ³¨é”€è´¦æˆ·é¡µé¢ -->
            <div id="cancel-account" class="page">
                <h1 class="page-title">æ³¨é”€è´¦æˆ·</h1>
                <div class="page-subtitle">
                    <div class="subtitle-icon"></div>
                    æ³¨é”€å•†æˆ·è´¦æˆ·
                </div>

                <div class="form-section">
                    <h2 class="form-title">
                        <div class="form-title-icon"></div>
                        æ³¨é”€ç¡®è®¤
                    </h2>
                    <div class="form-grid">
                        <div class="form-group full-width">
                            <label class="form-label">æ³¨é”€åŸå›  *</label>
                            <textarea class="form-input" rows="4" placeholder="è¯·è¯¦ç»†è¯´æ˜æ³¨é”€åŸå› "></textarea>
                        </div>
                        <div class="form-group full-width">
                            <label class="form-label">ç¡®è®¤ä¿¡æ¯</label>
                            <div style="background: #f8d7da; padding: 15px; border-radius: 6px; border: 1px solid #f5c6cb;">
                                <p style="color: #721c24; margin-bottom: 10px;"><strong>âš ï¸ å±é™©æ“ä½œï¼š</strong></p>
                                <ul style="color: #721c24; margin-left: 20px;">
                                    <li>æ­¤æ“ä½œä¸å¯é€†ï¼Œè´¦æˆ·å°†è¢«æ°¸ä¹…åˆ é™¤</li>
                                    <li>æ‰€æœ‰ç›¸å…³æ•°æ®å°†è¢«æ¸…é™¤</li>
                                    <li>è¯·ç¡®ä¿å·²å¤‡ä»½é‡è¦ä¿¡æ¯</li>
                                    <li>è¯·ç¡®ä¿æ‰€æœ‰ä¸šåŠ¡å·²å¦¥å–„å¤„ç†</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                    <div class="form-buttons">
                        <button class="btn btn-secondary" onclick="submitAccountCancellation()">ç¡®è®¤æ³¨é”€</button>
                        <button class="btn btn-primary" onclick="showPage('account-info')">å–æ¶ˆ</button>
                    </div>
                </div>
            </div>

            <!-- ===================== å¹³å°ç®¡ç†å‘˜ï¼šä¸»å¯¼èˆªé¡µé¢ ===================== -->
            <!-- ç®¡ç†å•†æˆ·ï¼ˆä¸»é¡µé¢ï¼šåˆ—å‡ºå¯¹åº”ç”¨ä¾‹æŒ‰é’®ï¼‰ -->
            <div id="admin-merchants" class="page">
                <h1 class="page-title">å¹³å°ç®¡ç†å‘˜ Â· ç®¡ç†å•†æˆ·</h1>
                <div class="page-subtitle"><div class="subtitle-icon"></div>é€‰æ‹©è¦æ‰§è¡Œçš„ç”¨ä¾‹</div>
                <div class="form-section">
                    <div class="form-buttons" style="flex-wrap: wrap; gap: 10px;">
                        <button class="btn btn-primary" onclick="showPage('admin-merchant-approve-open')">å®¡æ ¸å•†æˆ·å¼€æˆ·</button>
                        <button class="btn btn-primary" onclick="showPage('admin-merchant-approve-change')">å®¡æ ¸å•†æˆ·å˜æ›´</button>
                        <button class="btn btn-warning" onclick="showPage('admin-merchant-suspend')">æš‚åœå•†æˆ·</button>
                        <button class="btn btn-primary" onclick="showPage('admin-merchant-resume')">æ¢å¤å•†æˆ·</button>
                    </div>
                </div>
            </div>

            <!-- ç®¡ç†å•†å“ï¼ˆä¸»é¡µé¢ï¼šåˆ—å‡ºå¯¹åº”ç”¨ä¾‹æŒ‰é’®ï¼‰ -->
            <div id="admin-products" class="page">
                <h1 class="page-title">å¹³å°ç®¡ç†å‘˜ Â· ç®¡ç†å•†å“</h1>
                <div class="page-subtitle"><div class="subtitle-icon"></div>é€‰æ‹©è¦æ‰§è¡Œçš„ç”¨ä¾‹</div>
                <div class="form-section">
                    <div class="form-buttons" style="flex-wrap: wrap; gap: 10px;">
                        <button class="btn btn-primary" onclick="showPage('admin-product-approve-new')">å®¡æ ¸æ–°å¢å•†å“</button>
                        <button class="btn btn-primary" onclick="showPage('admin-product-approve-change')">å®¡æ ¸å˜æ›´å•†å“</button>
                        <button class="btn btn-primary" onclick="showPage('admin-product-category-create')">å»ºç«‹å•†å“åˆ†ç±»</button>
                        <button class="btn btn-secondary" onclick="showPage('admin-product-category-delete')">åˆ é™¤å•†å“åˆ†ç±»</button>
                        <button class="btn btn-warning" onclick="showPage('admin-product-category-update')">ä¿®æ”¹å•†å“åˆ†ç±»</button>
                        <button class="btn btn-primary" onclick="showPage('admin-product-query')">æŸ¥è¯¢å•†å“</button>
                    </div>
                </div>
            </div>

            <!-- ç®¡ç†é¡¾å®¢ï¼ˆä¸»é¡µé¢ï¼‰ -->
            <div id="admin-customers" class="page">
                <h1 class="page-title">å¹³å°ç®¡ç†å‘˜ Â· ç®¡ç†é¡¾å®¢</h1>
                <div class="page-subtitle"><div class="subtitle-icon"></div>é€‰æ‹©è¦æ‰§è¡Œçš„ç”¨ä¾‹</div>
                <div class="form-section">
                    <div class="form-buttons" style="flex-wrap: wrap; gap: 10px;">
                        <button class="btn btn-warning" onclick="showPage('admin-customer-ban')">å°ç¦é¡¾å®¢</button>
                        <button class="btn btn-primary" onclick="showPage('admin-customer-unban')">è§£ç¦é¡¾å®¢</button>
                        <button class="btn btn-primary" onclick="showPage('admin-customer-query')">æŸ¥è¯¢é¡¾å®¢</button>
                        <button class="btn btn-secondary" onclick="showPage('admin-customer-deactivate')">æ³¨é”€é¡¾å®¢</button>
                    </div>
                </div>
            </div>

            <!-- ç®¡ç†æœåŠ¡å•†ï¼ˆä¸»é¡µé¢ï¼‰ -->
            <div id="admin-providers" class="page">
                <h1 class="page-title">å¹³å°ç®¡ç†å‘˜ Â· ç®¡ç†æœåŠ¡å•†</h1>
                <div class="page-subtitle"><div class="subtitle-icon"></div>é€‰æ‹©è¦æ‰§è¡Œçš„ç”¨ä¾‹</div>
                <div class="form-section">
                    <div class="form-buttons" style="flex-wrap: wrap; gap: 10px;">
                        <button class="btn btn-primary" onclick="showPage('admin-provider-approve-open')">å®¡æ ¸æœåŠ¡å•†å¼€æˆ·</button>
                        <button class="btn btn-primary" onclick="showPage('admin-provider-approve-change')">å®¡æ ¸æœåŠ¡å•†å˜æ›´</button>
                        <button class="btn btn-primary" onclick="showPage('admin-provider-query')">æŸ¥è¯¢æœåŠ¡å•†</button>
                        <button class="btn btn-warning" onclick="showPage('admin-provider-suspend')">æš‚åœæœåŠ¡å•†</button>
                        <button class="btn btn-primary" onclick="showPage('admin-provider-resume')">æ¢å¤æœåŠ¡å•†</button>
                    </div>
                </div>
            </div>

            <!-- ç®¡ç†æ´»åŠ¨ï¼ˆä¸»é¡µé¢ï¼‰ -->
            <div id="admin-activities" class="page">
                <h1 class="page-title">å¹³å°ç®¡ç†å‘˜ Â· ç®¡ç†æ´»åŠ¨</h1>
                <div class="page-subtitle"><div class="subtitle-icon"></div>é€‰æ‹©è¦æ‰§è¡Œçš„ç”¨ä¾‹</div>
                <div class="form-section">
                    <div class="form-buttons" style="flex-wrap: wrap; gap: 10px;">
                        <button class="btn btn-primary" onclick="showPage('admin-activity-approve')">å®¡æ ¸æ´»åŠ¨</button>
                        <button class="btn btn-primary" onclick="showPage('admin-activity-query')">æŸ¥è¯¢æ´»åŠ¨</button>
                    </div>
                </div>
            </div>

            <!-- ===================== å¹³å°ç®¡ç†å‘˜ï¼šå•†æˆ·å­é¡µé¢ ===================== -->
            <div id="admin-merchant-approve-open" class="page">
                <h1 class="page-title">å®¡æ ¸å•†æˆ·å¼€æˆ·</h1>
                <div class="page-subtitle"><div class="subtitle-icon"></div>æ ¸å¯¹å¹³å°æäº¤çš„å¼€æˆ·èµ„æ–™å¹¶ç»™å‡ºå®¡æ ¸ç»“è®º</div>
                <div class="form-section">
                    <div class="info-banner">ä»åˆ—è¡¨ä¸­é€‰æ‹©ä¸€æ¡ç”³è¯·åŠ è½½å®Œæ•´èµ„æ–™ï¼Œç¡®è®¤ååœ¨ä¸‹æ–¹æ‰§è¡Œâ€œå®¡æ ¸é€šè¿‡â€æˆ–â€œé©³å›å¹¶è®°å½•åŸå› â€ã€‚</div>
                    <table class="product-table" id="merchantOpenTable">
                        <thead>
                            <tr>
                                <th>ç”³è¯·ç¼–å·</th>
                                <th>å•†æˆ·åç§°</th>
                                <th>è”ç³»äºº</th>
                                <th>è”ç³»ç”µè¯</th>
                                <th>æäº¤æ—¶é—´</th>
                                <th>æŸ¥çœ‹</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr data-id="AO-2025001">
                                <td>AO-2025001</td>
                                <td>ç¤ºä¾‹å•†æˆ·A</td>
                                <td>å¼ ä¸‰</td>
                                <td>13000000001</td>
                                <td>2025-10-20 09:30</td>
                                <td class="action-buttons"><button class="btn-edit" onclick="selectMerchantOpen('AO-2025001')">æŸ¥çœ‹è¯¦æƒ…</button></td>
                            </tr>
                            <tr data-id="AO-2025002">
                                <td>AO-2025002</td>
                                <td>ç¤ºä¾‹å•†æˆ·B</td>
                                <td>æå››</td>
                                <td>13000000002</td>
                                <td>2025-10-21 11:05</td>
                                <td class="action-buttons"><button class="btn-edit" onclick="selectMerchantOpen('AO-2025002')">æŸ¥çœ‹è¯¦æƒ…</button></td>
                            </tr>
                        </tbody>
                    </table>

                    <div id="merchantOpenDetail" class="detail-card">
                        <h2 class="form-title"><div class="form-title-icon"></div>ç”³è¯·è¯¦æƒ… <span class="status-tag">å¾…å®¡æ ¸</span></h2>
                        <div class="detail-grid">
                            <div class="detail-item"><strong>ç”³è¯·ç¼–å·</strong><span id="merchantOpenCurrentId">è¯·é€‰æ‹©ç”³è¯·</span></div>
                            <div class="detail-item"><strong>å•†æˆ·åç§°</strong><span id="merchantOpenName">-</span></div>
                            <div class="detail-item"><strong>è”ç³»äºº</strong><span id="merchantOpenContact">-</span></div>
                            <div class="detail-item"><strong>è”ç³»ç”µè¯</strong><span id="merchantOpenPhone">-</span></div>
                            <div class="detail-item"><strong>ç»è¥èŒƒå›´</strong><span id="merchantOpenScope">-</span></div>
                            <div class="detail-item"><strong>æ‰€åœ¨åœ°åŒº</strong><span id="merchantOpenRegion">-</span></div>
                            <div class="detail-item"><strong>æ³¨å†Œåœ°å€</strong><span id="merchantOpenAddress">-</span></div>
                            <div class="detail-item"><strong>åˆ†è´¦æ¯”ä¾‹åˆ†ç±»</strong><span id="merchantOpenShare">-</span></div>
                        </div>
                        <div class="detail-grid">
                            <div class="detail-item"><strong>è¥ä¸šæ‰§ç…§ç¼–å·</strong><span id="merchantOpenLicense">-</span></div>
                            <div class="detail-item"><strong>æ‰§ç…§æœ‰æ•ˆæœŸ</strong><span id="merchantOpenLicenseValid">-</span></div>
                            <div class="detail-item"><strong>å¼€æˆ·é“¶è¡Œä¿¡æ¯</strong><span id="merchantOpenBank">-</span></div>
                            <div class="detail-item"><strong>æäº¤æ—¶é—´</strong><span id="merchantOpenSubmit">-</span></div>
                        </div>
                        <div class="detail-grid full-width">
                            <div class="detail-item">
                                <strong>èµ„è´¨é™„ä»¶</strong>
                                <ul class="history-list" id="merchantOpenAttachments"><li>æœªé€‰æ‹©ç”³è¯·</li></ul>
                            </div>
                            <div class="detail-item">
                                <strong>å¤‡æ³¨</strong>
                                <span id="merchantOpenRemark">-</span>
                            </div>
                        </div>
                        <div class="form-group full-width">
                            <label class="form-label">é©³å›åŸå› ï¼ˆå¿…å¡«ï¼‰</label>
                            <textarea id="merchantOpenRejectReason" class="form-input" placeholder="è‹¥é©³å›ï¼Œè¯·å†™æ˜ä¸é€šè¿‡çš„åŸå› å’Œæ•´æ”¹å»ºè®®"></textarea>
                        </div>
                        <div class="form-buttons">
                            <button class="btn btn-primary" onclick="submitMerchantOpenDecision('approved')">å®¡æ ¸é€šè¿‡</button>
                            <button class="btn btn-secondary" onclick="submitMerchantOpenDecision('rejected')">é©³å›å¹¶è®°å½•åŸå› </button>
                        </div>
                    </div>
                </div>
            </div>

            <div id="admin-merchant-approve-change" class="page">
                <h1 class="page-title">å®¡æ ¸å•†æˆ·å˜æ›´</h1>
                <div class="page-subtitle"><div class="subtitle-icon"></div>æ ¸å¯¹å•†æˆ·æäº¤çš„å˜æ›´ææ–™å¹¶ç¡®è®¤æ˜¯å¦ç”Ÿæ•ˆ</div>
                <div class="form-section">
                    <div class="info-banner">å˜æ›´é¡¹å¯èƒ½åŒ…å«è”ç³»äººã€ç»è¥èŒƒå›´ã€åœ°å€ç­‰ä¿¡æ¯ã€‚å®¡æ ¸å‰åŠ¡å¿…é€é¡¹æ ¸å¯¹ï¼Œé©³å›æ—¶å†™æ˜ä¸é€šè¿‡åŸå› ã€‚</div>
                    <table class="product-table" id="merchantChangeTable">
                        <thead>
                            <tr>
                                <th>å˜æ›´ç¼–å·</th>
                                <th>å•†æˆ·åç§°</th>
                                <th>æäº¤æ—¶é—´</th>
                                <th>ä¸»è¦å˜æ›´é¡¹</th>
                                <th>æŸ¥çœ‹</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr data-id="MC-1001">
                                <td>MC-1001</td>
                                <td>ç¤ºä¾‹å•†æˆ·A</td>
                                <td>2025-10-18 14:22</td>
                                <td>æ³¨å†Œåœ°å€ã€è”ç³»äºº</td>
                                <td class="action-buttons"><button class="btn-edit" onclick="selectMerchantChange('MC-1001')">æŸ¥çœ‹è¯¦æƒ…</button></td>
                            </tr>
                            <tr data-id="MC-1002">
                                <td>MC-1002</td>
                                <td>ç¤ºä¾‹å•†æˆ·B</td>
                                <td>2025-10-19 10:06</td>
                                <td>ç»è¥èŒƒå›´</td>
                                <td class="action-buttons"><button class="btn-edit" onclick="selectMerchantChange('MC-1002')">æŸ¥çœ‹è¯¦æƒ…</button></td>
                            </tr>
                        </tbody>
                    </table>

                    <div id="merchantChangeDetail" class="detail-card">
                        <h2 class="form-title"><div class="form-title-icon"></div>å˜æ›´è¯¦æƒ… <span class="status-tag">å¾…å®¡æ ¸</span></h2>
                        <div class="detail-grid">
                            <div class="detail-item"><strong>å˜æ›´ç¼–å·</strong><span id="merchantChangeCurrentId">è¯·é€‰æ‹©å˜æ›´ç”³è¯·</span></div>
                            <div class="detail-item"><strong>å•†æˆ·åç§°</strong><span id="merchantChangeName">-</span></div>
                            <div class="detail-item"><strong>è”ç³»äºº</strong><span id="merchantChangeContact">-</span></div>
                            <div class="detail-item"><strong>è”ç³»ç”µè¯</strong><span id="merchantChangePhone">-</span></div>
                            <div class="detail-item"><strong>æäº¤æ—¶é—´</strong><span id="merchantChangeSubmit">-</span></div>
                            <div class="detail-item"><strong>é™„ä»¶</strong><span id="merchantChangeAttachments">-</span></div>
                        </div>
                        <div class="detail-item" style="margin-top:12px;">
                            <strong>å˜æ›´å†…å®¹æ¯”å¯¹</strong>
                            <ul class="history-list" id="merchantChangeDiff"><li>æœªé€‰æ‹©ç”³è¯·</li></ul>
                        </div>
                        <div class="form-group full-width" style="margin-top:15px;">
                            <label class="form-label">é©³å›åŸå› ï¼ˆå¿…å¡«ï¼‰</label>
                            <textarea id="merchantChangeRejectReason" class="form-input" placeholder="è‹¥ä¸é€šè¿‡ï¼Œè¯·å†™æ˜éœ€è¦è¡¥å……æˆ–ä¿®æ­£çš„ææ–™"></textarea>
                        </div>
                        <div class="form-buttons">
                            <button class="btn btn-primary" onclick="submitMerchantChangeDecision('approved')">å®¡æ ¸é€šè¿‡</button>
                            <button class="btn btn-secondary" onclick="submitMerchantChangeDecision('rejected')">é©³å›å¹¶è®°å½•åŸå› </button>
                        </div>
                    </div>
                </div>
            </div>

            <div id="admin-merchant-suspend" class="page">
                <h1 class="page-title">æš‚åœå•†æˆ·</h1>
                <div class="page-subtitle"><div class="subtitle-icon"></div>æ ¹æ®å•†æˆ·åç§°ã€è”ç³»ç”µè¯ã€çŠ¶æ€æ£€ç´¢åæ‰§è¡Œæš‚åœ</div>
                <div class="form-section">
                    <div class="info-banner">æš‚åœåè¯¥å•†æˆ·æ‰€æœ‰å•†å“å°†è¢«åœæ­¢é”€å”®ï¼Œä¸”åœ¨è§£é™¤å‰æ— æ³•æäº¤æ–°å¢æˆ–å˜æ›´å•†å“ç”³è¯·ï¼Œå”®åæµç¨‹ä¿æŒæ­£å¸¸ã€‚</div>
                    <div class="form-grid">
                        <div class="form-group"><label class="form-label">å•†æˆ·åç§°</label><input id="suspendMerchantName" class="form-input" placeholder="æ”¯æŒæ¨¡ç³ŠåŒ¹é…"/></div>
                        <div class="form-group"><label class="form-label">è”ç³»ç”µè¯</label><input id="suspendMerchantPhone" class="form-input" placeholder="ä¾‹å¦‚ 1300000xxxx"/></div>
                        <div class="form-group"><label class="form-label">å•†æˆ·çŠ¶æ€</label>
                            <select id="suspendMerchantStatus" class="form-input">
                                <option value="active">åœ¨è¥</option>
                                <option value="audit">å¾…å®¡æ ¸</option>
                                <option value="all">å…¨éƒ¨</option>
                            </select>
                        </div>
                        <div class="form-group"><label class="form-label">æ‰€å±åœ°åŒº</label><input id="suspendMerchantRegion" class="form-input" placeholder="çœ/å¸‚"/></div>
                    </div>
                    <div class="form-buttons"><button class="btn btn-warning" onclick="searchMerchantList('suspend')">æ£€ç´¢å•†æˆ·</button></div>

                    <h2 class="form-title" style="margin-top:20px;"><div class="form-title-icon"></div>æ£€ç´¢ç»“æœ</h2>
                    <table class="product-table" id="merchantSuspendResult">
                        <thead>
                            <tr>
                                <th>å•†æˆ·åç§°</th>
                                <th>è”ç³»äºº</th>
                                <th>è”ç³»ç”µè¯</th>
                                <th>çœ/å¸‚/åŒº</th>
                                <th>è¯¦ç»†åœ°å€</th>
                                <th>çŠ¶æ€</th>
                                <th>æ“ä½œ</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr><td colspan="7" style="text-align:center; color:#777;">è¯·å…ˆè¾“å…¥æŸ¥è¯¢æ¡ä»¶åç‚¹å‡»â€œæ£€ç´¢å•†æˆ·â€</td></tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <div id="admin-merchant-resume" class="page">
                <h1 class="page-title">æ¢å¤å•†æˆ·</h1>
                <div class="page-subtitle"><div class="subtitle-icon"></div>æŒ‰æ¡ä»¶æŸ¥æ‰¾æš‚åœå•†æˆ·å¹¶æ¢å¤è¥ä¸š</div>
                <div class="form-section">
                    <div class="info-banner">æ¢å¤åè¯¥å•†æˆ·çš„å•†å“å°†è‡ªåŠ¨æ¢å¤é”€å”®ï¼ŒåŸæœ‰å®¡æ ¸æƒé™åŒæ­¥æ¢å¤ã€‚</div>
                    <div class="form-grid">
                        <div class="form-group"><label class="form-label">å•†æˆ·åç§°</label><input id="resumeMerchantName" class="form-input" placeholder="æ”¯æŒæ¨¡ç³ŠåŒ¹é…"/></div>
                        <div class="form-group"><label class="form-label">è”ç³»ç”µè¯</label><input id="resumeMerchantPhone" class="form-input" placeholder="ä¾‹å¦‚ 1300000xxxx"/></div>
                        <div class="form-group"><label class="form-label">çŠ¶æ€ç­›é€‰</label>
                            <select id="resumeMerchantStatus" class="form-input">
                                <option value="suspended">æš‚åœ</option>
                                <option value="all">å…¨éƒ¨</option>
                            </select>
                        </div>
                    </div>
                    <div class="form-buttons"><button class="btn btn-primary" onclick="searchMerchantList('resume')">æ£€ç´¢æš‚åœå•†æˆ·</button></div>

                    <h2 class="form-title" style="margin-top:20px;"><div class="form-title-icon"></div>æ£€ç´¢ç»“æœ</h2>
                    <table class="product-table" id="merchantResumeResult">
                        <thead>
                            <tr>
                                <th>å•†æˆ·åç§°</th>
                                <th>è”ç³»äºº</th>
                                <th>è”ç³»ç”µè¯</th>
                                <th>çœ/å¸‚/åŒº</th>
                                <th>è¯¦ç»†åœ°å€</th>
                                <th>å½“å‰çŠ¶æ€</th>
                                <th>æ“ä½œ</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr><td colspan="7" style="text-align:center; color:#777;">è¯·å…ˆæ£€ç´¢æš‚åœå•†æˆ·</td></tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- ===================== å¹³å°ç®¡ç†å‘˜ï¼šå•†å“å­é¡µé¢ ===================== -->
            <div id="admin-product-approve-new" class="page">
                <h1 class="page-title">å®¡æ ¸æ–°å¢å•†å“</h1>
                <div class="page-subtitle"><div class="subtitle-icon"></div>æ ¸å¯¹æ–°å¢å•†å“çš„å…¨éƒ¨å±æ€§ã€åˆ†è´¦æ¯”ä¾‹åŠå®šä»·ä¿¡æ¯</div>
                <div class="form-section">
                <div class="info-banner">é€‰æ‹©å•†å“åå¯¹ç…§ç”³è¯·ææ–™ï¼Œç¡®è®¤åˆ†ç±»ã€å®šä»·ã€æ¡ç ã€åˆ†è´¦æ¯”ä¾‹ç­‰ä¿¡æ¯æ˜¯å¦ç¬¦åˆå¹³å°æ ‡å‡†ã€‚é©³å›æ—¶éœ€å¡«å†™åŸå› ã€‚</div>
                <table class="product-table" id="productNewTable">
                    <thead>
                        <tr>
                            <th>ç”³è¯·ç¼–å·</th>
                            <th>å•†å“åç§°</th>
                            <th>å•†é“ºåç§°</th>
                            <th>æäº¤æ—¶é—´</th>
                            <th>æŸ¥çœ‹</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr data-id="NP-5001">
                            <td>NP-5001</td>
                            <td>æ™ºèƒ½æ‰‹è¡¨ X</td>
                            <td>ç¤ºä¾‹å•†æˆ·A</td>
                            <td>2025-10-20 10:12</td>
                            <td class="action-buttons"><button class="btn-edit" onclick="selectProductNew('NP-5001')">æŸ¥çœ‹è¯¦æƒ…</button></td>
                        </tr>
                        <tr data-id="NP-5002">
                            <td>NP-5002</td>
                            <td>æœ‰æœºå’–å•¡è±†</td>
                            <td>ç¤ºä¾‹å•†æˆ·B</td>
                            <td>2025-10-21 08:55</td>
                            <td class="action-buttons"><button class="btn-edit" onclick="selectProductNew('NP-5002')">æŸ¥çœ‹è¯¦æƒ…</button></td>
                        </tr>
                    </tbody>
                </table>

                <div id="productNewDetail" class="detail-card">
                    <h2 class="form-title"><div class="form-title-icon"></div>å•†å“ç”³è¯·è¯¦æƒ… <span class="status-tag">å¾…å®¡æ ¸</span></h2>
                    <div class="detail-grid">
                        <div class="detail-item"><strong>ç”³è¯·ç¼–å·</strong><span id="productNewCurrentId">è¯·é€‰æ‹©å•†å“</span></div>
                        <div class="detail-item"><strong>å•†å“åç§°</strong><span id="productNewName">-</span></div>
                        <div class="detail-item"><strong>æ‰€å±å•†é“º</strong><span id="productNewShop">-</span></div>
                        <div class="detail-item"><strong>æ‰€å±åˆ†ç±»</strong><span id="productNewCategory">-</span></div>
                        <div class="detail-item"><strong>åŸä»·</strong><span id="productNewOriginal">-</span></div>
                        <div class="detail-item"><strong>é”€å”®ä»·æ ¼</strong><span id="productNewPrice">-</span></div>
                        <div class="detail-item"><strong>å•ä½</strong><span id="productNewUnit">-</span></div>
                        <div class="detail-item"><strong>äº§åœ°</strong><span id="productNewOrigin">-</span></div>
                        <div class="detail-item"><strong>æ¡ç </strong><span id="productNewBarcode">-</span></div>
                        <div class="detail-item"><strong>åˆ†è´¦æ¯”ä¾‹</strong><span id="productNewShare">-</span></div>
                    </div>
                    <div class="detail-grid full-width">
                        <div class="detail-item">
                            <strong>åˆ†è´¦æ¯”ä¾‹åˆ†ç±»</strong>
                            <span id="productNewShareCategory">-</span>
                        </div>
                        <div class="detail-item">
                            <strong>æäº¤æ—¶é—´</strong>
                            <span id="productNewSubmit">-</span>
                        </div>
                    </div>
                    <div class="detail-grid full-width">
                        <div class="detail-item">
                            <strong>èµ„æ–™é™„ä»¶</strong>
                            <ul class="history-list" id="productNewAttachments"><li>æœªé€‰æ‹©å•†å“</li></ul>
                        </div>
                        <div class="detail-item">
                            <strong>å¹³å°å¤‡æ³¨</strong>
                            <span id="productNewRemark">-</span>
                        </div>
                    </div>
                    <div class="form-group full-width">
                        <label class="form-label">é©³å›åŸå› ï¼ˆå¿…å¡«ï¼‰</label>
                        <textarea id="productNewRejectReason" class="form-input" placeholder="è‹¥ä¸é€šè¿‡ï¼Œè¯·è¯´æ˜ä¸ç¬¦åˆçš„é¡¹åŠæ•´æ”¹å»ºè®®"></textarea>
                    </div>
                    <div class="form-buttons">
                        <button class="btn btn-primary" onclick="submitProductNewDecision('approved')">å®¡æ ¸é€šè¿‡</button>
                        <button class="btn btn-secondary" onclick="submitProductNewDecision('rejected')">é©³å›å¹¶è®°å½•åŸå› </button>
                    </div>
                </div>
                </div>
            </div>

            <div id="admin-product-approve-change" class="page">
                <h1 class="page-title">å®¡æ ¸å˜æ›´å•†å“</h1>
                <div class="page-subtitle"><div class="subtitle-icon"></div>æ ¸å¯¹å˜æ›´å‰åå·®å¼‚ï¼Œç¡®è®¤æ˜¯å¦å¯ä»¥ä¸Šçº¿</div>
                <div class="form-section">
                    <div class="info-banner">å˜æ›´é¡¹è¦†ç›–åˆ†ç±»ã€åç§°ã€å®šä»·ã€åˆ†è´¦æ¯”ä¾‹ã€å›¾ç‰‡ç­‰ä¿¡æ¯ã€‚è¯·å¯¹ç…§å†å²å€¼å†³å®šæ˜¯å¦é€šè¿‡ï¼Œå¹¶åœ¨é©³å›æ—¶å†™æ˜åŸå› ã€‚</div>
                    <table class="product-table" id="productChangeTable">
                        <thead>
                            <tr>
                                <th>å˜æ›´ç¼–å·</th>
                                <th>å•†å“åç§°</th>
                                <th>æ‰€å±å•†é“º</th>
                                <th>æäº¤æ—¶é—´</th>
                                <th>ä¸»è¦å˜æ›´é¡¹</th>
                                <th>æŸ¥çœ‹</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr data-id="PC-7001">
                                <td>PC-7001</td>
                                <td>æ™ºèƒ½æ‰‹è¡¨ X</td>
                                <td>ç¤ºä¾‹å•†æˆ·A</td>
                                <td>2025-10-19 09:15</td>
                                <td>é”€å”®ä»·æ ¼ã€åˆ†è´¦æ¯”ä¾‹</td>
                                <td class="action-buttons"><button class="btn-edit" onclick="selectProductChange('PC-7001')">æŸ¥çœ‹è¯¦æƒ…</button></td>
                            </tr>
                            <tr data-id="PC-7002">
                                <td>PC-7002</td>
                                <td>æœ‰æœºå’–å•¡è±†</td>
                                <td>ç¤ºä¾‹å•†æˆ·B</td>
                                <td>2025-10-20 16:40</td>
                                <td>å•†å“å›¾ç‰‡</td>
                                <td class="action-buttons"><button class="btn-edit" onclick="selectProductChange('PC-7002')">æŸ¥çœ‹è¯¦æƒ…</button></td>
                            </tr>
                        </tbody>
                    </table>

                    <div id="productChangeDetail" class="detail-card">
                        <h2 class="form-title"><div class="form-title-icon"></div>å˜æ›´å†…å®¹è¯¦æƒ… <span class="status-tag">å¾…å®¡æ ¸</span></h2>
                        <div class="detail-grid">
                            <div class="detail-item"><strong>å˜æ›´ç¼–å·</strong><span id="productChangeCurrentId">è¯·é€‰æ‹©å˜æ›´é¡¹</span></div>
                            <div class="detail-item"><strong>å•†å“åç§°</strong><span id="productChangeName">-</span></div>
                            <div class="detail-item"><strong>æ‰€å±å•†é“º</strong><span id="productChangeShop">-</span></div>
                            <div class="detail-item"><strong>å½“å‰åˆ†ç±»</strong><span id="productChangeCategory">-</span></div>
                            <div class="detail-item"><strong>å½“å‰ä»·æ ¼</strong><span id="productChangePrice">-</span></div>
                            <div class="detail-item"><strong>å½“å‰åˆ†è´¦æ¯”ä¾‹</strong><span id="productChangeShare">-</span></div>
                        </div>
                        <div class="detail-item" style="margin-top:12px;">
                            <strong>å˜æ›´å†…å®¹æ¯”å¯¹</strong>
                            <ul class="history-list" id="productChangeDiff"><li>æœªé€‰æ‹©å˜æ›´é¡¹</li></ul>
                        </div>
                        <div class="detail-grid full-width">
                            <div class="detail-item">
                                <strong>æäº¤æ—¶é—´</strong>
                                <span id="productChangeSubmit">-</span>
                            </div>
                            <div class="detail-item">
                                <strong>é™„ä»¶</strong>
                                <ul class="history-list" id="productChangeAttachments"><li>æœªé€‰æ‹©å˜æ›´é¡¹</li></ul>
                            </div>
                        </div>
                        <div class="form-group full-width" style="margin-top:15px;">
                            <label class="form-label">é©³å›åŸå› ï¼ˆå¿…å¡«ï¼‰</label>
                            <textarea id="productChangeRejectReason" class="form-input" placeholder="è‹¥ä¸é€šè¿‡ï¼Œè¯·å†™æ˜æœªç¬¦åˆçš„è§„èŒƒ"></textarea>
                        </div>
                        <div class="form-buttons">
                            <button class="btn btn-primary" onclick="submitProductChangeDecision('approved')">å®¡æ ¸é€šè¿‡</button>
                            <button class="btn btn-secondary" onclick="submitProductChangeDecision('rejected')">é©³å›å¹¶è®°å½•åŸå› </button>
                        </div>
                    </div>
                </div>
            </div>

            <div id="admin-product-category-create" class="page">
                <h1 class="page-title">å»ºç«‹å•†å“åˆ†ç±»</h1>
                <div class="page-subtitle"><div class="subtitle-icon"></div>å»ºç«‹ä¸€çº§/äºŒçº§å•†å“åˆ†ç±»å¹¶ç»´æŠ¤åˆ†è´¦æ¯”ä¾‹</div>
                <div class="form-section">
                    <div class="info-banner">ä¸ºæ¯ä¸ªä¸€çº§åˆ†ç±»ç»´æŠ¤å¯¹åº”åˆ†è´¦æ¯”ä¾‹ï¼Œæ–°å¢äºŒçº§åˆ†ç±»æ—¶éœ€æ ¡éªŒé‡åã€‚è‹¥å› é‡åå¯¼è‡´å¤±è´¥ï¼Œè¯·è°ƒæ•´åˆ†ç±»åç§°åé‡æ–°æäº¤ã€‚</div>
                    <h2 class="form-title"><div class="form-title-icon"></div>ç°æœ‰åˆ†ç±»æ¦‚è§ˆ</h2>
                    <table class="product-table" id="categoryOverviewTable">
                        <thead>
                            <tr>
                                <th>ä¸€çº§åˆ†ç±»</th>
                                <th>åˆ†è´¦æ¯”ä¾‹</th>
                                <th>è¯¥åˆ†ç±»ä¸‹å•†å“æ•°</th>
                                <th>äºŒçº§åˆ†ç±»</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>æ•°ç å®¶ç”µ</td>
                                <td>15%</td>
                                <td>128</td>
                                <td>æ™ºèƒ½ç©¿æˆ´ã€å½±éŸ³è®¾å¤‡ã€æ™ºèƒ½å®¶å±…</td>
                            </tr>
                            <tr>
                                <td>é£Ÿå“é¥®æ–™</td>
                                <td>12%</td>
                                <td>86</td>
                                <td>å’–å•¡é¥®å“ã€è¿›å£é›¶é£Ÿã€æœ‰æœºé£Ÿå“</td>
                            </tr>
                            <tr>
                                <td>å±…å®¶ç”Ÿæ´»</td>
                                <td>10%</td>
                                <td>64</td>
                                <td>æ—¥ç”¨ç™¾è´§ã€æ”¶çº³æ•´ç†ã€å®¶å±…é¥°å“</td>
                            </tr>
                        </tbody>
                    </table>

                    <h2 class="form-title"><div class="form-title-icon"></div>æ–°å¢ä¸€çº§åˆ†ç±»</h2>
                    <div class="form-grid">
                        <div class="form-group"><label class="form-label">ä¸€çº§åˆ†ç±»åç§° *</label><input id="newCategoryName" class="form-input" placeholder="å¦‚ï¼šæ¯å©´äº²å­"/></div>
                        <div class="form-group"><label class="form-label">åˆ†è´¦æ¯”ä¾‹ *</label><input id="newCategoryShare" class="form-input" placeholder="è¯·è¾“å…¥ç™¾åˆ†æ¯”ï¼Œä¾‹å¦‚ 9%"/></div>
                    </div>
                    <div class="form-buttons"><button class="btn btn-primary" onclick="handleCategoryCreate('level1')">æäº¤æ–°å¢ä¸€çº§åˆ†ç±»</button></div>

                    <h2 class="form-title"><div class="form-title-icon"></div>åœ¨ä¸€çº§åˆ†ç±»ä¸‹æ–°å¢äºŒçº§åˆ†ç±»</h2>
                    <div class="form-grid">
                        <div class="form-group"><label class="form-label">æ‰€å±ä¸€çº§åˆ†ç±» *</label>
                            <select id="newSubcategoryParent" class="form-input">
                                <option value="">è¯·é€‰æ‹©</option>
                                <option value="æ•°ç å®¶ç”µ">æ•°ç å®¶ç”µ</option>
                                <option value="é£Ÿå“é¥®æ–™">é£Ÿå“é¥®æ–™</option>
                                <option value="å±…å®¶ç”Ÿæ´»">å±…å®¶ç”Ÿæ´»</option>
                            </select>
                        </div>
                        <div class="form-group"><label class="form-label">äºŒçº§åˆ†ç±»åç§° *</label><input id="newSubcategoryName" class="form-input" placeholder="å¦‚ï¼šæ™ºèƒ½å¨æˆ¿"/></div>
                        <div class="form-group"><label class="form-label">åˆ†è´¦æ¯”ä¾‹ *</label><input id="newSubcategoryShare" class="form-input" placeholder="è¯·è¾“å…¥ç™¾åˆ†æ¯”ï¼Œä¾‹å¦‚ 11%"/></div>
                    </div>
                    <div class="form-buttons"><button class="btn btn-primary" onclick="handleCategoryCreate('level2')">æäº¤æ–°å¢äºŒçº§åˆ†ç±»</button></div>
                </div>
            </div>

            <div id="admin-product-category-delete" class="page">
                <h1 class="page-title">åˆ é™¤å•†å“åˆ†ç±»</h1>
                <div class="page-subtitle"><div class="subtitle-icon"></div>åˆ é™¤ä¸€çº§æˆ–äºŒçº§åˆ†ç±»å¹¶åŒæ­¥å¤„ç†åˆ†è´¦æ¯”ä¾‹</div>
                <div class="form-section">
                    <div class="info-banner">åˆ é™¤åˆ†ç±»æ—¶ï¼Œç³»ç»Ÿä¼šå°†åŸåˆ†ç±»çš„åˆ†è´¦æ¯”ä¾‹å›ºåŒ–åˆ°åˆ†ç±»ä¸‹æ‰€æœ‰å•†å“ä¸Šï¼Œå¹¶æç¤ºè¿™äº›å•†å“å½“å‰å¤„äºâ€œæ— åˆ†ç±»â€çŠ¶æ€ã€‚</div>
                    <table class="product-table" id="categoryDeleteTable">
                        <thead>
                            <tr>
                                <th>åˆ†ç±»ç¼–å·</th>
                                <th>åˆ†ç±»åç§°</th>
                                <th>çº§åˆ«</th>
                                <th>ä¸Šçº§åˆ†ç±»</th>
                                <th>å½“å‰å•†å“æ•°</th>
                                <th>æ“ä½œ</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>CAT-L1-1001</td>
                                <td>æ•°ç å®¶ç”µ</td>
                                <td>ä¸€çº§</td>
                                <td>-</td>
                                <td>128</td>
                                <td class="action-buttons"><button class="btn btn-secondary" onclick="handleCategoryDelete('CAT-L1-1001','æ•°ç å®¶ç”µ','level1')">åˆ é™¤ä¸€çº§åˆ†ç±»</button></td>
                            </tr>
                            <tr>
                                <td>CAT-L2-2005</td>
                                <td>å½±éŸ³è®¾å¤‡</td>
                                <td>äºŒçº§</td>
                                <td>æ•°ç å®¶ç”µ</td>
                                <td>34</td>
                                <td class="action-buttons"><button class="btn btn-secondary" onclick="handleCategoryDelete('CAT-L2-2005','å½±éŸ³è®¾å¤‡','level2')">åˆ é™¤äºŒçº§åˆ†ç±»</button></td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <div id="admin-product-category-update" class="page">
                <h1 class="page-title">ä¿®æ”¹å•†å“åˆ†ç±»</h1>
                <div class="page-subtitle"><div class="subtitle-icon"></div>æ˜¾ç¤ºæ‰€æœ‰ä¸€çº§åˆ†ç±»ï¼›é€‰ä¸­åå¯ç¼–è¾‘åç§°ä¸åˆ†è´¦æ¯”ä¾‹ï¼Œå¹¶æŸ¥çœ‹/ä¿®æ”¹å…¶äºŒçº§åˆ†ç±»</div>
                <div class="form-section">
                    <div class="info-banner">è§„åˆ™ï¼šåŒçº§åˆ†ç±»ä¸å…è®¸é‡åï¼›åˆ†è´¦æ¯”ä¾‹è¯·è¾“å…¥ 0-100 çš„æ•°å­—ï¼ˆå•ä½ï¼š%ï¼‰ã€‚</div>
                    <h2 class="form-title"><div class="form-title-icon"></div>ä¸€çº§åˆ†ç±»</h2>
                    <table class="product-table">
                        <thead><tr><th>ç¼–å·</th><th>åç§°</th><th>åˆ†è´¦æ¯”ä¾‹(%)</th><th>æ“ä½œ</th></tr></thead>
                        <tbody id="categoryL1Body"></tbody>
                    </table>

                    <div class="detail-card">
                        <h3 class="form-title"><div class="form-title-icon"></div>ç¼–è¾‘ä¸€çº§åˆ†ç±»</h3>
                        <div class="detail-grid">
                            <div class="form-group"><label class="form-label">ç¼–å·</label><input id="catL1Id" class="form-input" readonly></div>
                            <div class="form-group"><label class="form-label">åç§° *</label><input id="catL1NameInput" class="form-input" placeholder="è¯·è¾“å…¥æ–°åç§°"></div>
                            <div class="form-group"><label class="form-label">åˆ†è´¦æ¯”ä¾‹(%) *</label><input id="catL1ShareInput" class="form-input" placeholder="å¦‚ 12"></div>
                        </div>
                        <div class="form-buttons"><button class="btn btn-warning" onclick="saveCategoryL1()">ä¿å­˜ä¸€çº§åˆ†ç±»</button></div>
                    </div>

                    <h2 class="form-title" style="margin-top:16px;"><div class="form-title-icon"></div>äºŒçº§åˆ†ç±»</h2>
                    <table class="product-table">
                        <thead><tr><th>ç¼–å·</th><th>åç§°</th><th>åˆ†è´¦æ¯”ä¾‹(%)</th><th>æ“ä½œ</th></tr></thead>
                        <tbody id="categoryL2Body"><tr><td colspan="4" style="text-align:center;color:#888;">è¯·é€‰æ‹©ä¸€ä¸ªä¸€çº§åˆ†ç±»æŸ¥çœ‹å…¶ä¸‹å±äºŒçº§åˆ†ç±»</td></tr></tbody>
                    </table>
                    <div class="detail-card">
                        <h3 class="form-title"><div class="form-title-icon"></div>ç¼–è¾‘äºŒçº§åˆ†ç±»</h3>
                        <div class="detail-grid">
                            <div class="form-group"><label class="form-label">ç¼–å·</label><input id="catL2Id" class="form-input" readonly></div>
                            <div class="form-group"><label class="form-label">ä¸Šçº§åˆ†ç±»</label><input id="catL2Parent" class="form-input" readonly></div>
                            <div class="form-group"><label class="form-label">åç§° *</label><input id="catL2NameInput" class="form-input" placeholder="è¯·è¾“å…¥æ–°åç§°"></div>
                            <div class="form-group"><label class="form-label">åˆ†è´¦æ¯”ä¾‹(%) *</label><input id="catL2ShareInput" class="form-input" placeholder="å¦‚ 10"></div>
                        </div>
                        <div class="form-buttons"><button class="btn btn-warning" onclick="saveCategoryL2()">ä¿å­˜äºŒçº§åˆ†ç±»</button></div>
                    </div>
                </div>
            </div>

            <div id="admin-product-query" class="page">
                <h1 class="page-title">æŸ¥è¯¢å•†å“</h1>
                <div class="page-subtitle"><div class="subtitle-icon"></div>æŒ‰å•†å“åç§°ã€å•†é“ºæˆ–åˆ†ç±»æ£€ç´¢ï¼›ç»“æœå±•ç¤ºæ–°å¢/å˜æ›´å®¡æ ¸ä¿¡æ¯</div>
                <div class="form-section">
                    <div class="form-grid">
                        <div class="form-group"><label class="form-label">å•†å“åç§°</label><input id="adminProductNameInput" class="form-input" placeholder="å¦‚ï¼šçŸ¿æ³‰æ°´"></div>
                        <div class="form-group"><label class="form-label">å•†é“ºåç§°</label><input id="adminProductShopInput" class="form-input" placeholder="å¦‚ï¼šåå—å•†è´¸"></div>
                        <div class="form-group full-width"><label class="form-label">åˆ†ç±»</label><input id="adminProductCategoryInput" class="form-input" placeholder="å¦‚ï¼šé¥®ç”¨æ°´/ä¼‘é—²é›¶é£Ÿ..."></div>
                    </div>
                    <div class="form-buttons"><button class="btn btn-primary" onclick="searchAdminProducts()">æŸ¥è¯¢</button></div>
                    <h2 class="form-title" style="margin-top:10px;"><div class="form-title-icon"></div>æŸ¥è¯¢ç»“æœ</h2>
                    <table class="product-table">
                        <thead><tr><th>å•†å“åç§°</th><th>å•†é“ºåç§°</th><th>åˆ†ç±»</th><th>åŸä»·(Â¥)</th><th>æ–°å¢å®¡æ ¸</th><th>å˜æ›´å®¡æ ¸</th><th>æ“ä½œ</th></tr></thead>
                        <tbody id="adminProductQueryBody"></tbody>
                    </table>
                    <div class="detail-card" id="adminProductDetail">
                        <h3 class="form-title"><div class="form-title-icon"></div>å•†å“è¯¦æƒ…</h3>
                        <div class="detail-grid">
                            <div class="detail-item"><strong>å•†å“åç§°</strong><span id="adminProdDetailName">-</span></div>
                            <div class="detail-item"><strong>å•†é“ºåç§°</strong><span id="adminProdDetailShop">-</span></div>
                            <div class="detail-item"><strong>åˆ†ç±»</strong><span id="adminProdDetailCategory">-</span></div>
                            <div class="detail-item"><strong>åŸä»·</strong><span id="adminProdDetailOriginal">-</span></div>
                            <div class="detail-item"><strong>æ–°å¢å®¡æ ¸</strong><span id="adminProdDetailAuditNew">-</span></div>
                            <div class="detail-item"><strong>å˜æ›´å®¡æ ¸</strong><span id="adminProdDetailAuditChange">-</span></div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- ===================== å¹³å°ç®¡ç†å‘˜ï¼šé¡¾å®¢å­é¡µé¢ ===================== -->
            <div id="admin-customer-ban" class="page">
                <h1 class="page-title">å°ç¦é¡¾å®¢</h1>
                <div class="page-subtitle"><div class="subtitle-icon"></div>ç³»ç»Ÿå±•ç¤ºç¬¦åˆæ¡ä»¶çš„æ­£å¸¸ç”¨æˆ·ï¼›é€‰æ‹©åæ‰§è¡Œå°ç¦</div>
                <div class="form-section">
                    <div class="form-grid">
                        <div class="form-group"><label class="form-label">ç”¨æˆ·å/å§“å</label><input id="banFilterName" class="form-input" placeholder="å¦‚ï¼šalice / è‰¾ä¸½æ–¯"></div>
                        <div class="form-group"><label class="form-label">æ‰‹æœºå·</label><input id="banFilterPhone" class="form-input" placeholder="å¦‚ï¼š138********"></div>
                    </div>
                    <div class="form-buttons"><button class="btn btn-primary" onclick="searchCustomersBan()">æŸ¥è¯¢</button></div>
                    <h2 class="form-title"><div class="form-title-icon"></div>å¯å°ç¦çš„é¡¾å®¢</h2>
                    <table class="product-table"><thead><tr><th>ç”¨æˆ·å</th><th>å§“å</th><th>ç”µè¯</th><th>çŠ¶æ€</th><th>æ“ä½œ</th></tr></thead><tbody id="banCustomerBody"></tbody></table>
                </div>
            </div>

            <div id="admin-customer-unban" class="page">
                <h1 class="page-title">è§£ç¦é¡¾å®¢</h1>
                <div class="page-subtitle"><div class="subtitle-icon"></div>ç³»ç»Ÿæ˜¾ç¤ºè¢«å°ç¦çš„é¡¾å®¢ï¼›é€‰æ‹©åæ¢å¤</div>
                <div class="form-section">
                    <div class="form-grid">
                        <div class="form-group"><label class="form-label">ç”¨æˆ·å/å§“å</label><input id="unbanFilterName" class="form-input" placeholder="å¦‚ï¼šbob / é²å‹ƒ"></div>
                    </div>
                    <div class="form-buttons"><button class="btn btn-primary" onclick="searchCustomersUnban()">æŸ¥è¯¢</button></div>
                    <h2 class="form-title"><div class="form-title-icon"></div>è¢«å°ç¦çš„é¡¾å®¢</h2>
                    <table class="product-table"><thead><tr><th>ç”¨æˆ·å</th><th>å§“å</th><th>ç”µè¯</th><th>çŠ¶æ€</th><th>æ“ä½œ</th></tr></thead><tbody id="unbanCustomerBody"></tbody></table>
                </div>
            </div>

            <div id="admin-customer-query" class="page">
                <h1 class="page-title">æŸ¥è¯¢é¡¾å®¢</h1>
                <div class="page-subtitle"><div class="subtitle-icon"></div>å¯æŒ‰æ‰‹æœºå·ã€ç”¨æˆ·åã€å§“åã€çŠ¶æ€ç­›é€‰ï¼Œå¹¶æŸ¥çœ‹é¡¾å®¢è¯¦æƒ…</div>
                <div class="form-section">
                    <div class="form-grid">
                        <div class="form-group"><label class="form-label">æ‰‹æœºå·</label><input id="custQueryPhone" class="form-input" placeholder="å¦‚ï¼š138********"></div>
                        <div class="form-group"><label class="form-label">ç”¨æˆ·å</label><input id="custQueryUsername" class="form-input" placeholder="å¦‚ï¼šalice"></div>
                        <div class="form-group"><label class="form-label">å§“å</label><input id="custQueryName" class="form-input" placeholder="å¦‚ï¼šè‰¾ä¸½æ–¯"></div>
                        <div class="form-group"><label class="form-label">çŠ¶æ€</label>
                            <select id="custQueryStatus" class="form-input filter-select">
                                <option value="">å…¨éƒ¨</option>
                                <option>æ­£å¸¸</option>
                                <option>å·²å°ç¦</option>
                                <option>å·²æ³¨é”€</option>
                            </select>
                        </div>
                    </div>
                    <div class="form-buttons"><button class="btn btn-primary" onclick="searchCustomersQuery()">æŸ¥è¯¢</button></div>
                    <h2 class="form-title"><div class="form-title-icon"></div>æŸ¥è¯¢ç»“æœ</h2>
                    <table class="product-table"><thead><tr><th>ç”¨æˆ·å</th><th>å§“å</th><th>ç”µè¯</th><th>çŠ¶æ€</th><th>æ“ä½œ</th></tr></thead><tbody id="adminCustomerQueryBody"></tbody></table>
                    <div class="detail-card"><h3 class="form-title"><div class="form-title-icon"></div>é¡¾å®¢è¯¦æƒ…</h3>
                        <div class="detail-grid">
                            <div class="detail-item"><strong>ç”¨æˆ·å</strong><span id="custDetailUsername">-</span></div>
                            <div class="detail-item"><strong>å§“å</strong><span id="custDetailName">-</span></div>
                            <div class="detail-item"><strong>ç”µè¯</strong><span id="custDetailPhone">-</span></div>
                            <div class="detail-item"><strong>çŠ¶æ€</strong><span id="custDetailStatus">-</span></div>
                        </div>
                    </div>
                </div>
            </div>

            <div id="admin-customer-deactivate" class="page">
                <h1 class="page-title">æ³¨é”€é¡¾å®¢</h1>
                <div class="page-subtitle"><div class="subtitle-icon"></div>ç³»ç»Ÿæ˜¾ç¤ºæ‰€æœ‰é¡¾å®¢ï¼Œé€‰æ‹©ç›®æ ‡åæ‰§è¡Œæ³¨é”€</div>
                <div class="form-section">
                    <div class="form-grid">
                        <div class="form-group"><label class="form-label">ç”¨æˆ·å/å§“å</label><input id="deactFilterName" class="form-input" placeholder="æ¨¡ç³ŠåŒ¹é…"></div>
                    </div>
                    <div class="form-buttons"><button class="btn btn-primary" onclick="searchCustomersDeactivate()">æŸ¥è¯¢</button></div>
                    <h2 class="form-title"><div class="form-title-icon"></div>é¡¾å®¢åˆ—è¡¨</h2>
                    <table class="product-table"><thead><tr><th>ç”¨æˆ·å</th><th>å§“å</th><th>ç”µè¯</th><th>çŠ¶æ€</th><th>æ“ä½œ</th></tr></thead><tbody id="deactCustomerBody"></tbody></table>
                </div>
            </div>

            <!-- ===================== å¹³å°ç®¡ç†å‘˜ï¼šæœåŠ¡å•†å­é¡µé¢ ===================== -->
            <div id="admin-provider-approve-open" class="page">
                <h1 class="page-title">å®¡æ ¸æœåŠ¡å•†å¼€æˆ·</h1>
                <div class="page-subtitle"><div class="subtitle-icon"></div>æ ¸å¯¹å¼€æˆ·èµ„æ–™å¹¶ç»™å‡ºå®¡æ ¸ç»“è®º</div>
                <div class="form-section">
                    <div class="info-banner">ä»åˆ—è¡¨ä¸­é€‰æ‹©ä¸€æ¡ç”³è¯·æŸ¥çœ‹è¯¦æƒ…ï¼Œç¡®è®¤åæ‰§è¡Œâ€œå®¡æ ¸é€šè¿‡â€æˆ–â€œé©³å›å¹¶è®°å½•åŸå› â€ã€‚</div>
                    <table class="product-table" id="providerOpenTable">
                        <thead>
                            <tr>
                                <th>ç”³è¯·ç¼–å·</th>
                                <th>æœåŠ¡å•†åç§°</th>
                                <th>è”ç³»äºº</th>
                                <th>è”ç³»ç”µè¯</th>
                                <th>æäº¤æ—¶é—´</th>
                                <th>æŸ¥çœ‹</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr data-id="PO-3001">
                                <td>PO-3001</td>
                                <td>ç¤ºä¾‹æœåŠ¡å•†A</td>
                                <td>ç‹äº”</td>
                                <td>13900000001</td>
                                <td>2025-10-19 10:20</td>
                                <td class="action-buttons"><button class="btn-edit" onclick="selectProviderOpen('PO-3001')">æŸ¥çœ‹è¯¦æƒ…</button></td>
                            </tr>
                            <tr data-id="PO-3002">
                                <td>PO-3002</td>
                                <td>ç¤ºä¾‹æœåŠ¡å•†B</td>
                                <td>èµµå…­</td>
                                <td>13900000002</td>
                                <td>2025-10-20 16:05</td>
                                <td class="action-buttons"><button class="btn-edit" onclick="selectProviderOpen('PO-3002')">æŸ¥çœ‹è¯¦æƒ…</button></td>
                            </tr>
                        </tbody>
                    </table>

                    <div id="providerOpenDetail" class="detail-card">
                        <h2 class="form-title"><div class="form-title-icon"></div>å¼€æˆ·ç”³è¯·è¯¦æƒ… <span class="status-tag">å¾…å®¡æ ¸</span></h2>
                        <div class="detail-grid">
                            <div class="detail-item"><strong>ç”³è¯·ç¼–å·</strong><span id="providerOpenCurrentId">è¯·é€‰æ‹©ç”³è¯·</span></div>
                            <div class="detail-item"><strong>æœåŠ¡å•†åç§°</strong><span id="providerOpenName">-</span></div>
                            <div class="detail-item"><strong>è”ç³»äºº</strong><span id="providerOpenContact">-</span></div>
                            <div class="detail-item"><strong>è”ç³»ç”µè¯</strong><span id="providerOpenPhone">-</span></div>
                            <div class="detail-item"><strong>æœåŠ¡èŒƒå›´</strong><span id="providerOpenScope">-</span></div>
                            <div class="detail-item"><strong>æ‰€åœ¨åœ°åŒº</strong><span id="providerOpenRegion">-</span></div>
                            <div class="detail-item"><strong>æ³¨å†Œåœ°å€</strong><span id="providerOpenAddress">-</span></div>
                            <div class="detail-item"><strong>è¥ä¸šæ‰§ç…§ç¼–å·</strong><span id="providerOpenLicense">-</span></div>
                        </div>
                        <div class="detail-grid">
                            <div class="detail-item"><strong>æ‰§ç…§æœ‰æ•ˆæœŸ</strong><span id="providerOpenLicenseValid">-</span></div>
                            <div class="detail-item"><strong>å¼€æˆ·é“¶è¡Œä¿¡æ¯</strong><span id="providerOpenBank">-</span></div>
                            <div class="detail-item"><strong>æäº¤æ—¶é—´</strong><span id="providerOpenSubmit">-</span></div>
                            <div class="detail-item"><strong>å¤‡æ³¨</strong><span id="providerOpenRemark">-</span></div>
                        </div>
                        <div class="detail-grid full-width">
                            <div class="detail-item">
                                <strong>èµ„è´¨é™„ä»¶</strong>
                                <ul class="history-list" id="providerOpenAttachments"><li>æœªé€‰æ‹©ç”³è¯·</li></ul>
                            </div>
                        </div>
                        <div class="form-group full-width">
                            <label class="form-label">é©³å›åŸå› ï¼ˆå¿…å¡«ï¼‰</label>
                            <textarea id="providerOpenRejectReason" class="form-input" placeholder="è‹¥é©³å›ï¼Œè¯·å†™æ˜ä¸é€šè¿‡åŸå› "></textarea>
                        </div>
                        <div class="form-buttons">
                            <button class="btn btn-primary" onclick="submitProviderOpenDecision('approved')">å®¡æ ¸é€šè¿‡</button>
                            <button class="btn btn-secondary" onclick="submitProviderOpenDecision('rejected')">é©³å›å¹¶è®°å½•åŸå› </button>
                        </div>
                    </div>
                </div>
            </div>

            <div id="admin-provider-approve-change" class="page">
                <h1 class="page-title">å®¡æ ¸æœåŠ¡å•†å˜æ›´</h1>
                <div class="page-subtitle"><div class="subtitle-icon"></div>æ ¸å¯¹å˜æ›´å†…å®¹å¹¶ç¡®è®¤æ˜¯å¦ç”Ÿæ•ˆ</div>
                <div class="form-section">
                    <div class="info-banner">è¯·é€é¡¹æ ¸å¯¹å˜æ›´å†…å®¹ï¼Œå¿…è¦æ—¶è¦æ±‚è¡¥å……ææ–™ã€‚é©³å›éœ€å†™æ˜ä¸é€šè¿‡çš„åŸå› ã€‚</div>
                    <table class="product-table" id="providerChangeTable">
                        <thead>
                            <tr>
                                <th>å˜æ›´ç¼–å·</th>
                                <th>æœåŠ¡å•†åç§°</th>
                                <th>æäº¤æ—¶é—´</th>
                                <th>ä¸»è¦å˜æ›´é¡¹</th>
                                <th>æŸ¥çœ‹</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr data-id="PCG-4001">
                                <td>PCG-4001</td>
                                <td>ç¤ºä¾‹æœåŠ¡å•†A</td>
                                <td>2025-10-20 14:32</td>
                                <td>è”ç³»äººã€æœåŠ¡èŒƒå›´</td>
                                <td class="action-buttons"><button class="btn-edit" onclick="selectProviderChange('PCG-4001')">æŸ¥çœ‹è¯¦æƒ…</button></td>
                            </tr>
                            <tr data-id="PCG-4002">
                                <td>PCG-4002</td>
                                <td>ç¤ºä¾‹æœåŠ¡å•†B</td>
                                <td>2025-10-21 09:18</td>
                                <td>æ³¨å†Œåœ°å€</td>
                                <td class="action-buttons"><button class="btn-edit" onclick="selectProviderChange('PCG-4002')">æŸ¥çœ‹è¯¦æƒ…</button></td>
                            </tr>
                        </tbody>
                    </table>

                    <div id="providerChangeDetail" class="detail-card">
                        <h2 class="form-title"><div class="form-title-icon"></div>å˜æ›´è¯¦æƒ… <span class="status-tag">å¾…å®¡æ ¸</span></h2>
                        <div class="detail-grid">
                            <div class="detail-item"><strong>å˜æ›´ç¼–å·</strong><span id="providerChangeCurrentId">è¯·é€‰æ‹©å˜æ›´ç”³è¯·</span></div>
                            <div class="detail-item"><strong>æœåŠ¡å•†åç§°</strong><span id="providerChangeName">-</span></div>
                            <div class="detail-item"><strong>è”ç³»äºº</strong><span id="providerChangeContact">-</span></div>
                            <div class="detail-item"><strong>è”ç³»ç”µè¯</strong><span id="providerChangePhone">-</span></div>
                            <div class="detail-item"><strong>æäº¤æ—¶é—´</strong><span id="providerChangeSubmit">-</span></div>
                            <div class="detail-item"><strong>é™„ä»¶</strong><span id="providerChangeAttachments">-</span></div>
                        </div>
                        <div class="detail-item" style="margin-top:12px;">
                            <strong>å˜æ›´å†…å®¹æ¯”å¯¹</strong>
                            <ul class="history-list" id="providerChangeDiff"><li>æœªé€‰æ‹©ç”³è¯·</li></ul>
                        </div>
                        <div class="form-group full-width" style="margin-top:15px;">
                            <label class="form-label">é©³å›åŸå› ï¼ˆå¿…å¡«ï¼‰</label>
                            <textarea id="providerChangeRejectReason" class="form-input" placeholder="è‹¥ä¸é€šè¿‡ï¼Œè¯·å†™æ˜éœ€è¦è¡¥å……æˆ–ä¿®æ­£çš„ææ–™"></textarea>
                        </div>
                        <div class="form-buttons">
                            <button class="btn btn-primary" onclick="submitProviderChangeDecision('approved')">å®¡æ ¸é€šè¿‡</button>
                            <button class="btn btn-secondary" onclick="submitProviderChangeDecision('rejected')">é©³å›å¹¶è®°å½•åŸå› </button>
                        </div>
                    </div>
                </div>
            </div>

            <div id="admin-provider-suspend" class="page">
                <h1 class="page-title">æš‚åœæœåŠ¡å•†</h1>
                <div class="page-subtitle"><div class="subtitle-icon"></div>ç³»ç»Ÿæ˜¾ç¤ºåœ¨è¥æœåŠ¡å•†ï¼›æŒ‰åç§°ç­›é€‰å¹¶æ‰§è¡Œæš‚åœ</div>
                <div class="form-section">
                    <div class="form-grid">
                        <div class="form-group"><label class="form-label">æœåŠ¡å•†åç§°</label><input id="suspendProviderNameInput" class="form-input" placeholder="å¦‚ï¼šç¤ºä¾‹æœåŠ¡å•†A"></div>
                    </div>
                    <div class="form-buttons"><button class="btn btn-primary" onclick="searchProvidersSuspend()">æŸ¥è¯¢</button></div>
                    <h2 class="form-title"><div class="form-title-icon"></div>åœ¨è¥æœåŠ¡å•†</h2>
                    <table class="product-table"><thead><tr><th>æœåŠ¡å•†åç§°</th><th>è”ç³»ç”µè¯</th><th>æœåŠ¡æ‰€åœ¨çœå¸‚</th><th>æ“ä½œ</th></tr></thead><tbody id="providerSuspendBody"></tbody></table>
                </div>
            </div>

            <div id="admin-provider-resume" class="page">
                <h1 class="page-title">æ¢å¤æœåŠ¡å•†</h1>
                <div class="page-subtitle"><div class="subtitle-icon"></div>ç³»ç»Ÿæ˜¾ç¤ºè¢«æš‚åœæœåŠ¡å•†ï¼›æŒ‰åç§°æŸ¥è¯¢å¹¶æ¢å¤</div>
                <div class="form-section">
                    <div class="form-grid">
                        <div class="form-group"><label class="form-label">æœåŠ¡å•†åç§°</label><input id="resumeProviderNameInput" class="form-input" placeholder="å¦‚ï¼šäº¬ä¸œåˆ°å®¶"></div>
                    </div>
                    <div class="form-buttons"><button class="btn btn-primary" onclick="searchProvidersResume()">æŸ¥è¯¢</button></div>
                    <h2 class="form-title"><div class="form-title-icon"></div>è¢«æš‚åœçš„æœåŠ¡å•†</h2>
                    <table class="product-table"><thead><tr><th>æœåŠ¡å•†åç§°</th><th>åœ°åŒº</th><th>è”ç³»ç”µè¯</th><th>æ“ä½œ</th></tr></thead><tbody id="providerResumeBody"></tbody></table>
                </div>
            </div>

            <div id="admin-provider-query" class="page">
                <h1 class="page-title">æŸ¥è¯¢æœåŠ¡å•†</h1>
                <div class="page-subtitle"><div class="subtitle-icon"></div>è¾“å…¥æ¡ä»¶æ£€ç´¢æœåŠ¡å•†å¹¶æŸ¥çœ‹è¯¦æƒ…</div>
                <div class="form-section">
                    <div class="form-grid">
                        <div class="form-group"><label class="form-label">æœåŠ¡å•†åç§°</label><input id="adminProviderQueryInput" class="form-input" placeholder="å¦‚ï¼šç¤ºä¾‹æœåŠ¡å•†A"/></div>
                        <div class="form-group"><label class="form-label">æœåŠ¡å•†å“ç±»å‹</label>
                            <select id="adminProviderTypeSelect" class="form-input filter-select">
                                <option value="">å…¨éƒ¨</option>
                                <option value="ä»“é…ä¸€ä½“">ä»“é…ä¸€ä½“</option>
                                <option value="åŒåŸå³æ—¶é…é€">åŒåŸå³æ—¶é…é€</option>
                                <option value="çœé™…å¹²çº¿è¿è¾“">çœé™…å¹²çº¿è¿è¾“</option>
                                <option value="å®‰è£…æœåŠ¡">å®‰è£…æœåŠ¡</option>
                            </select>
                        </div>
                        <div class="form-group full-width"><label class="form-label">æœåŠ¡åœ°åŒº</label><input id="adminProviderRegionInput" class="form-input" placeholder="å¦‚ï¼šç¦å»º å¦é—¨ æˆ– æµ™æ±Ÿ æ­å·"/></div>
                    </div>
                    <div class="form-buttons"><button class="btn btn-primary" onclick="searchProviderList()">æŸ¥è¯¢</button></div>

                    <h2 class="form-title" style="margin-top:10px;"><div class="form-title-icon"></div>æŸ¥è¯¢ç»“æœ</h2>
                    <table class="product-table">
                        <thead>
                            <tr><th>ç¼–å·</th><th>æœåŠ¡å•†åç§°</th><th>æœåŠ¡å•†å“ç±»å‹</th><th>æœåŠ¡åœ°åŒº</th><th>æ“ä½œ</th></tr>
                        </thead>
                        <tbody id="adminProviderQueryBody"></tbody>
                    </table>

                    <div id="providerQueryDetail" class="detail-card">
                        <h3 class="form-title"><div class="form-title-icon"></div>æœåŠ¡å•†è¯¦æƒ…</h3>
                        <div class="detail-grid">
                            <div class="detail-item"><strong>æœåŠ¡å•†åç§°</strong><span id="providerQueryName">-</span></div>
                            <div class="detail-item"><strong>æœåŠ¡å•†å“ç±»å‹</strong><span id="providerQueryTypes">-</span></div>
                            <div class="detail-item"><strong>æœåŠ¡åœ°åŒº</strong><span id="providerQueryRegion">-</span></div>
                            <div class="detail-item"><strong>è”ç³»äººå§“å</strong><span id="providerQueryContactName">-</span></div>
                            <div class="detail-item"><strong>è”ç³»ç”µè¯</strong><span id="providerQueryContactPhone">-</span></div>
                            <div class="detail-item"><strong>è”ç³»åœ°å€</strong><span id="providerQueryContactAddress">-</span></div>
                        </div>
                        <div class="detail-grid full-width" style="margin-top:10px;">
                            <div class="detail-item"><strong>æœåŠ¡å•†ç®€ä»‹</strong><div id="providerQueryIntro">-</div></div>
                            <div class="detail-item"><strong>æœåŠ¡èµ„è´¨è¯æ˜</strong><ul id="providerQueryQualifications" class="history-list"><li>æœªé€‰æ‹©æœåŠ¡å•†</li></ul></div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- ===================== å¹³å°ç®¡ç†å‘˜ï¼šæ´»åŠ¨å­é¡µé¢ ===================== -->
            <div id="admin-activity-approve" class="page">
                <h1 class="page-title">å®¡æ ¸æ´»åŠ¨</h1>
                <div class="page-subtitle"><div class="subtitle-icon"></div>æ ¸å¯¹æ´»åŠ¨æ–¹æ¡ˆä¸æ—¶æ®µèŒƒå›´</div>
                <div class="form-section">
                    <div class="info-banner">ä»åˆ—è¡¨ä¸­é€‰æ‹©æ´»åŠ¨æŸ¥çœ‹è¯¦æƒ…ï¼Œç¡®è®¤æ—¶é—´èŒƒå›´ã€å‚ä¸èŒƒå›´ä¸é¢„ç®—ç­‰æ˜¯å¦åˆè§„ï¼Œå¿…è¦æ—¶é©³å›å¹¶é™„ç†ç”±ã€‚</div>
                    <table class="product-table" id="activityApproveTable">
                        <thead>
                            <tr>
                                <th>æ´»åŠ¨ç¼–å·</th>
                                <th>æ´»åŠ¨åç§°</th>
                                <th>å‘èµ·æ–¹</th>
                                <th>æäº¤æ—¶é—´</th>
                                <th>æŸ¥çœ‹</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr data-id="AC-9001">
                                <td>AC-9001</td>
                                <td>åŒåä¸€å¤§ä¿ƒ</td>
                                <td>ç¤ºä¾‹å•†æˆ·A</td>
                                <td>2025-10-15 11:00</td>
                                <td class="action-buttons"><button class="btn-edit" onclick="selectActivityApprove('AC-9001')">æŸ¥çœ‹è¯¦æƒ…</button></td>
                            </tr>
                            <tr data-id="AC-9002">
                                <td>AC-9002</td>
                                <td>å¹´åº•æ¸…ä»“</td>
                                <td>ç¤ºä¾‹å•†æˆ·B</td>
                                <td>2025-10-18 09:40</td>
                                <td class="action-buttons"><button class="btn-edit" onclick="selectActivityApprove('AC-9002')">æŸ¥çœ‹è¯¦æƒ…</button></td>
                            </tr>
                        </tbody>
                    </table>

                    <div id="activityApproveDetail" class="detail-card">
                        <h2 class="form-title"><div class="form-title-icon"></div>æ´»åŠ¨è¯¦æƒ… <span class="status-tag">å¾…å®¡æ ¸</span></h2>
                        <div class="detail-grid">
                            <div class="detail-item"><strong>æ´»åŠ¨ç¼–å·</strong><span id="activityCurrentId">è¯·é€‰æ‹©æ´»åŠ¨</span></div>
                            <div class="detail-item"><strong>æ´»åŠ¨åç§°</strong><span id="activityName">-</span></div>
                            <div class="detail-item"><strong>å‘èµ·æ–¹</strong><span id="activitySponsor">-</span></div>
                            <div class="detail-item"><strong>å¼€å§‹æ—¶é—´</strong><span id="activityStart">-</span></div>
                            <div class="detail-item"><strong>ç»“æŸæ—¶é—´</strong><span id="activityEnd">-</span></div>
                            <div class="detail-item"><strong>å‚ä¸èŒƒå›´</strong><span id="activityScope">-</span></div>
                        </div>
                        <div class="detail-grid full-width">
                            <div class="detail-item"><strong>æäº¤æ—¶é—´</strong><span id="activitySubmit">-</span></div>
                            <div class="detail-item"><strong>å¤‡æ³¨</strong><span id="activityRemark">-</span></div>
                        </div>
                        <div class="detail-grid full-width">
                            <div class="detail-item">
                                <strong>é™„ä»¶</strong>
                                <ul class="history-list" id="activityAttachments"><li>æœªé€‰æ‹©æ´»åŠ¨</li></ul>
                            </div>
                        </div>
                        <div class="form-group full-width">
                            <label class="form-label">é©³å›åŸå› ï¼ˆå¿…å¡«ï¼‰</label>
                            <textarea id="activityRejectReason" class="form-input" placeholder="è‹¥ä¸é€šè¿‡ï¼Œè¯·è¯´æ˜ä¸ç¬¦åˆçš„é—®é¢˜"></textarea>
                        </div>
                        <div class="form-buttons">
                            <button class="btn btn-primary" onclick="submitActivityDecision('approved')">å®¡æ ¸é€šè¿‡</button>
                            <button class="btn btn-secondary" onclick="submitActivityDecision('rejected')">é©³å›å¹¶è®°å½•åŸå› </button>
                        </div>
                    </div>
                </div>
            </div>

            <div id="admin-activity-query" class="page">
                <h1 class="page-title">æŸ¥è¯¢æ´»åŠ¨</h1>
                <div class="page-subtitle"><div class="subtitle-icon"></div>æ”¯æŒåç§°ã€å•†æˆ·ã€æ—¶é—´èŒƒå›´ã€æ´»åŠ¨å•†å“ä¸çŠ¶æ€ç­›é€‰ï¼›å±•ç¤ºå®¡æ ¸é€šè¿‡çš„æ´»åŠ¨å¹¶å¯æŸ¥çœ‹è¯¦æƒ…</div>
                <div class="form-section">
                    <div class="form-grid">
                        <div class="form-group"><label class="form-label">æ´»åŠ¨åç§°</label><input id="activityNameInput" class="form-input" placeholder="å¦‚ï¼šåŒ11å¤§ä¿ƒ"></div>
                        <div class="form-group"><label class="form-label">å•†æˆ·åç§°</label><input id="activityMerchantInput" class="form-input" placeholder="å¦‚ï¼šåå—å•†è´¸"></div>
                        <div class="form-group"><label class="form-label">å¼€å§‹æ—¶é—´</label><input id="activityStartInput" class="form-input" placeholder="YYYY-MM-DD"></div>
                        <div class="form-group"><label class="form-label">ç»“æŸæ—¶é—´</label><input id="activityEndInput" class="form-input" placeholder="YYYY-MM-DD"></div>
                        <div class="form-group"><label class="form-label">æ´»åŠ¨å•†å“åç§°</label><input id="activityProductInput" class="form-input" placeholder="å¦‚ï¼šçŸ¿æ³‰æ°´"></div>
                        <div class="form-group"><label class="form-label">çŠ¶æ€</label>
                            <select id="activityStatusSelect" class="form-input filter-select">
                                <option value="">å…¨éƒ¨</option>
                                <option>å·²ä¸Šçº¿</option>
                                <option>å·²ç»“æŸ</option>
                            </select>
                        </div>
                    </div>
                    <div class="form-buttons"><button class="btn btn-primary" onclick="searchAdminActivities()">æŸ¥è¯¢</button></div>
                    <h2 class="form-title" style="margin-top:10px;"><div class="form-title-icon"></div>æŸ¥è¯¢ç»“æœ</h2>
                    <table class="product-table"><thead><tr><th>ç¼–å·</th><th>åç§°</th><th>å•†æˆ·</th><th>èµ·æ­¢æ—¶é—´</th><th>çŠ¶æ€</th><th>æ–°å¢å®¡æ ¸</th><th>å˜æ›´å®¡æ ¸</th><th>æ“ä½œ</th></tr></thead><tbody id="adminActivityQueryBody"></tbody></table>
                    <div class="detail-card">
                        <h3 class="form-title"><div class="form-title-icon"></div>æ´»åŠ¨è¯¦æƒ…</h3>
                        <div class="detail-grid">
                            <div class="detail-item"><strong>æ´»åŠ¨åç§°</strong><span id="actDetailName">-</span></div>
                            <div class="detail-item"><strong>å•†æˆ·åç§°</strong><span id="actDetailMerchant">-</span></div>
                            <div class="detail-item"><strong>èµ·æ­¢æ—¶é—´</strong><span id="actDetailTime">-</span></div>
                            <div class="detail-item"><strong>çŠ¶æ€</strong><span id="actDetailStatus">-</span></div>
                        </div>
                        <div class="detail-grid full-width" style="margin-top:8px;">
                            <div class="detail-item"><strong>æ´»åŠ¨è§„åˆ™æè¿°</strong><div id="actDetailRules">-</div></div>
                            <div class="detail-item"><strong>æ´»åŠ¨å•†å“åˆ—è¡¨</strong><ul id="actDetailProducts" class="history-list"><li>æœªé€‰æ‹©æ´»åŠ¨</li></ul></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- ç»´ä¿®å·¥ PC é¡µé¢ -->
    <div id="techApp" class="container" style="display: none;">
        <div class="sidebar">
            <div class="sidebar-header">
                <div class="back-arrow">â†</div>
                <div class="nav-title">å¯¼èˆª</div>
            </div>
            <ul class="nav-menu">
                <li class="nav-item active" onclick="showTechPage('tech-orders')">
                    <div class="nav-icon"></div>
                    å¾…æ¥æ”¶æœåŠ¡å•
                </li>
                <li class="nav-item" onclick="showTechPage('tech-order-detail')">
                    <div class="nav-icon"></div>
                    æœåŠ¡å•è¯¦æƒ…
                </li>
            </ul>
        </div>
        <div class="main-content">
            <div class="header">
                <div class="search-box">
                    <span>ğŸ”</span>
                    <input type="text" class="search-input" id="techSearchInput" placeholder="è¾“å…¥ï¼šæœåŠ¡å•/è¯¦æƒ… ç­‰å³å¯è·³è½¬" onkeydown="if(event.key==='Enter'){techSearchNavigate();}">
                </div>
                <div class="user-info">
                    <button class="btn btn-primary" style="padding:8px 12px;" onclick="switchToTechMobile()">ç§»åŠ¨ç«¯è§†å›¾</button>
                    <span class="welcome-text" id="welcomeTextTech">æ¬¢è¿ä½ ! ç»´ä¿®å·¥</span>
                    <span>â–¼</span>
                    <div class="user-avatar" onclick="logout()" title="é€€å‡ºç™»å½•">ğŸ› ï¸</div>
                </div>
            </div>

            <!-- å¾…æ¥æ”¶æœåŠ¡å•åˆ—è¡¨ (MALL-SERVICE-031) -->
            <div id="tech-orders" class="page active">
                <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:20px;">
                    <div>
                        <h1 class="page-title">å¾…æ¥æ”¶æœåŠ¡å•</h1>
                        <div class="page-subtitle"><div class="subtitle-icon"></div>æœåŠ¡å•ä¿¡æ¯ï¼ˆåœ°åŒºã€å•†å“ã€æœåŠ¡ç±»å‹ï¼‰</div>
                    </div>
                </div>

                <table class="product-table">
                    <thead>
                        <tr>
                            <th>åœ°åŒº</th>
                            <th>å•†å“</th>
                            <th>æœåŠ¡ç±»å‹</th>
                            <th>æ“ä½œ</th>
                        </tr>
                    </thead>
                    <tbody id="techOrderTable">
                        <tr>
                            <td>ç¦å»º å¦é—¨ ç¿”å®‰åŒº</td>
                            <td>ç©ºè°ƒå¤–æœº</td>
                            <td>ä¸Šé—¨ç»´ä¿®</td>
                            <td>
                                <div class="action-buttons">
                                    <button class="btn-edit" onclick="viewTechOrder('SO-001')">æŸ¥çœ‹</button>
                                    <button class="btn-edit" onclick="acceptTechOrder('SO-001')">æ¥æ”¶</button>
                                    <button class="btn-delete" onclick="rejectTechOrder('SO-001')">æ‹’ç»</button>
                                </div>
                            </td>
                        </tr>
                        <tr>
                            <td>ç¦å»º å¦é—¨ æ¹–é‡ŒåŒº</td>
                            <td>å†°ç®±å‹ç¼©æœº</td>
                            <td>å¯„å›ç»´ä¿®</td>
                            <td>
                                <div class="action-buttons">
                                    <button class="btn-edit" onclick="viewTechOrder('SO-002')">æŸ¥çœ‹</button>
                                    <button class="btn-edit" onclick="acceptTechOrder('SO-002')">æ¥æ”¶</button>
                                    <button class="btn-delete" onclick="rejectTechOrder('SO-002')">æ‹’ç»</button>
                                </div>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <!-- æœåŠ¡å•è¯¦æƒ… (å±•ç¤ºæ¥æ”¶å‰ä¿¡æ¯) -->
            <div id="tech-order-detail" class="page">
                <h1 class="page-title">æœåŠ¡å•è¯¦æƒ…</h1>
                <div class="page-subtitle"><div class="subtitle-icon"></div>åœ°åŒºã€å•†å“ã€æœåŠ¡ç±»å‹ã€å•†æˆ·ä¿¡æ¯ã€æœåŠ¡å•†ä¿¡æ¯ã€è¿›åº¦</div>
                <div class="form-section">
                    <div class="form-grid">
                        <div class="form-group"><label class="form-label">æœåŠ¡å•å·</label><input class="form-input" id="detailOrderId" value="SO-001"></div>
                        <div class="form-group"><label class="form-label">åœ°åŒº</label><input class="form-input" value="ç¦å»º å¦é—¨ ç¿”å®‰åŒº"></div>
                        <div class="form-group"><label class="form-label">å•†å“</label><input class="form-input" value="ç©ºè°ƒå¤–æœº"></div>
                        <div class="form-group"><label class="form-label">æœåŠ¡ç±»å‹</label><input class="form-input" value="ä¸Šé—¨ç»´ä¿®"></div>
                        <div class="form-group"><label class="form-label">å•†æˆ·ä¿¡æ¯</label><input class="form-input" value="è±ªå®¢æ¥å•†åº—"></div>
                        <div class="form-group"><label class="form-label">æœåŠ¡å•†ä¿¡æ¯</label><input class="form-input" value="å¦é—¨ç»´ä¿®æœåŠ¡ä¸­å¿ƒ"></div>
                        <div class="form-group full-width"><label class="form-label">è¿›åº¦</label><input class="form-input" value="å¾…æ¥æ”¶"></div>
                    </div>
                    <div class="form-buttons">
                        <button class="btn btn-primary" onclick="acceptTechOrder(document.getElementById('detailOrderId').value)">æ¥æ”¶</button>
                        <button class="btn btn-secondary" onclick="rejectTechOrder(document.getElementById('detailOrderId').value)">æ‹’ç»</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- ç»´ä¿®å·¥ ç§»åŠ¨ç«¯é¡µé¢ -->
    <div id="techMobile" style="display:none;">
        <div class="login-container" style="height:auto; background:#fff;">
            <div class="login-card" style="max-width:600px; width:100%;">
                <div style="display:flex;align-items:center;justify-content:space-between;margin-bottom:10px;">
                    <div class="login-logo">ğŸ› ï¸</div>
                    <button class="btn btn-primary" style="padding:8px 14px;" onclick="backToTechPC()">åˆ‡æ¢åˆ°PCè§†å›¾</button>
                </div>
                <h2 class="login-title" style="margin:10px 0 6px;">ç»´ä¿®å·¥-æœåŠ¡å•</h2>
                <div class="search-box" style="margin:10px 0 15px;">
                    <span>ğŸ”</span>
                    <input type="text" class="search-input" id="techMobileSearch" placeholder="è¾“å…¥ä»»æ„å†…å®¹å³å¯è·³è½¬" onkeydown="if(event.key==='Enter'){techMobileSearchNavigate();}">
                </div>
                <div style="text-align:left;">
                    <!-- åˆ—è¡¨è§†å›¾ -->
                    <div id="techMobileList" class="form-section" style="padding:15px;">
                        <div style="font-weight:bold;margin-bottom:10px;">å¾…æ¥æ”¶æœåŠ¡å•</div>
                        <div style="display:flex;flex-direction:column;gap:10px;">
                            <div style="border:1px solid #eee;border-radius:8px;padding:12px;">
                                <div style="font-size:14px;margin-bottom:6px;">SO-001 Â· å¦é—¨ç¿”å®‰åŒº Â· ä¸Šé—¨ç»´ä¿® Â· ç©ºè°ƒå¤–æœº</div>
                                <div style="display:flex;gap:8px;">
                                    <button class="btn-edit" onclick="viewTechOrderMobile('SO-001')">æŸ¥çœ‹</button>
                                    <button class="btn-edit" onclick="acceptTechOrder('SO-001')">æ¥æ”¶</button>
                                    <button class="btn-delete" onclick="rejectTechOrder('SO-001')">æ‹’ç»</button>
                                </div>
                            </div>
                            <div style="border:1px solid #eee;border-radius:8px;padding:12px;">
                                <div style="font-size:14px;margin-bottom:6px;">SO-002 Â· å¦é—¨æ¹–é‡ŒåŒº Â· å¯„å›ç»´ä¿® Â· å†°ç®±å‹ç¼©æœº</div>
                                <div style="display:flex;gap:8px;">
                                    <button class="btn-edit" onclick="viewTechOrderMobile('SO-002')">æŸ¥çœ‹</button>
                                    <button class="btn-edit" onclick="acceptTechOrder('SO-002')">æ¥æ”¶</button>
                                    <button class="btn-delete" onclick="rejectTechOrder('SO-002')">æ‹’ç»</button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- è¯¦æƒ…è§†å›¾ -->
                    <div id="techMobileDetail" class="form-section" style="padding:15px; display:none;">
                        <div style="font-weight:bold;margin-bottom:10px;">æœåŠ¡å•è¯¦æƒ…</div>
                        <div class="form-grid" style="grid-template-columns:1fr;">
                            <div class="form-group"><label class="form-label">æœåŠ¡å•å·</label><input class="form-input" id="techMobileDetailId" value="SO-001"></div>
                            <div class="form-group"><label class="form-label">åœ°åŒº</label><input class="form-input" value="ç¦å»º å¦é—¨ ç¿”å®‰åŒº"></div>
                            <div class="form-group"><label class="form-label">å•†å“</label><input class="form-input" value="ç©ºè°ƒå¤–æœº"></div>
                            <div class="form-group"><label class="form-label">æœåŠ¡ç±»å‹</label><input class="form-input" value="ä¸Šé—¨ç»´ä¿®"></div>
                            <div class="form-group"><label class="form-label">å•†æˆ·ä¿¡æ¯</label><input class="form-input" value="è±ªå®¢æ¥å•†åº—"></div>
                            <div class="form-group"><label class="form-label">æœåŠ¡å•†ä¿¡æ¯</label><input class="form-input" value="å¦é—¨ç»´ä¿®æœåŠ¡ä¸­å¿ƒ"></div>
                            <div class="form-group"><label class="form-label">è¿›åº¦</label><input class="form-input" value="å¾…æ¥æ”¶"></div>
                        </div>
                        <div class="form-buttons" style="justify-content:flex-end;">
                            <button class="btn btn-secondary" onclick="showTechMobilePage('list')">è¿”å›</button>
                            <button class="btn btn-primary" onclick="acceptTechOrder(document.getElementById('techMobileDetailId').value)">æ¥æ”¶</button>
                            <button class="btn btn-secondary" onclick="rejectTechOrder(document.getElementById('techMobileDetailId').value)">æ‹’ç»</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- å¼¹çª—ç»„ä»¶ -->
    <div id="modalOverlay" class="modal-overlay">
        <div class="modal">
            <div id="modalIcon" class="modal-icon success">âœ“</div>
            <div id="modalTitle" class="modal-title">æ“ä½œæˆåŠŸ</div>
            <div id="modalMessage" class="modal-message">æ“ä½œå·²å®Œæˆ</div>
            <div class="modal-buttons">
                <button id="modalConfirmBtn" class="modal-btn modal-btn-primary" onclick="hideModal()">ç¡®å®š</button>
            </div>
        </div>
    </div>

    <script>
        // å…¨å±€å˜é‡
        let currentUser = null;
        let selectedRole = null;

        const adminSelections = {
            merchantOpen: null,
            merchantChange: null,
            productNew: null,
            productChange: null,
            providerOpen: null,
            providerChange: null,
            activityReview: null,
            providerQuery: null
        };

        const adminMockData = {
            merchantOpen: {
                'AO-2025001': {
                    id: 'AO-2025001',
                    merchantName: 'ç¤ºä¾‹å•†æˆ·A',
                    contact: 'å¼ ä¸‰',
                    phone: '13000000001',
                    scope: 'ç”µå­äº§å“ã€æ™ºèƒ½ç©¿æˆ´è®¾å¤‡é”€å”®',
                    region: 'ç¦å»ºçœ å¦é—¨å¸‚ æ€æ˜åŒº',
                    address: 'å¦é—¨å¸‚æ€æ˜åŒºæ¼”ç¤ºè·¯88å·Aåº§20å±‚',
                    share: 'æ•°ç äº§å“ Â· å¹³å°åˆ†è´¦ 15%',
                    licenseNo: '91350200MA9XXXXXX',
                    licenseValid: '2021-05-01 ~ 2031-05-01',
                    bank: 'ä¸­å›½é“¶è¡Œå¦é—¨åˆ†è¡Œ 6222 **** 8888',
                    submitTime: '2025-10-20 09:30',
                    attachments: ['è¥ä¸šæ‰§ç…§æ‰«æä»¶.pdf', 'æ³•äººèº«ä»½è¯.png'],
                    remark: 'é—¨åº—æ”¯æŒçº¿ä¸Šè‡ªæã€çº¿ä¸‹ä½“éªŒ'
                },
                'AO-2025002': {
                    id: 'AO-2025002',
                    merchantName: 'ç¤ºä¾‹å•†æˆ·B',
                    contact: 'æå››',
                    phone: '13000000002',
                    scope: 'ç²¾å“é£Ÿå“ã€è¿›å£é¥®å“é›¶å”®',
                    region: 'ä¸Šæµ·å¸‚ æµ¦ä¸œæ–°åŒº èŠ±æœ¨è¡—é“',
                    address: 'èŠ±æœ¨è·¯99å·æµ¦ä¸œå›½é™…é‡‘èä¸­å¿ƒ3å±‚',
                    share: 'é£Ÿå“é¥®æ–™ Â· å¹³å°åˆ†è´¦ 12%',
                    licenseNo: '91310115MA2XXXXX9',
                    licenseValid: '2022-01-01 ~ 2032-01-01',
                    bank: 'å·¥å•†é“¶è¡Œä¸Šæµ·èŠ±æœ¨æ”¯è¡Œ 6212 **** 2233',
                    submitTime: '2025-10-21 11:05',
                    attachments: ['è¥ä¸šæ‰§ç…§.pdf', 'é£Ÿå“ç»è¥è®¸å¯è¯.jpg'],
                    remark: 'å·²åœ¨å¹³å°å®Œæˆä¿è¯é‡‘å†»ç»“'
                }
            },
            merchantChange: {
                'MC-1001': {
                    id: 'MC-1001',
                    merchantName: 'ç¤ºä¾‹å•†æˆ·A',
                    contact: 'ææ™“',
                    phone: '13000000003',
                    submitTime: '2025-10-18 14:22',
                    attachments: ['æ–°ç‰ˆè¥ä¸šæ‰§ç…§.pdf'],
                    diffs: [
                        { field: 'æ³¨å†Œåœ°å€', oldValue: 'å¦é—¨å¸‚æ€æ˜åŒºå»ºä¸šè·¯1å·', newValue: 'å¦é—¨å¸‚æ¹–é‡ŒåŒºå…‰æ˜è·¯18å·' },
                        { field: 'è”ç³»äºº', oldValue: 'å¼ ä¸‰', newValue: 'ææ™“' }
                    ]
                },
                'MC-1002': {
                    id: 'MC-1002',
                    merchantName: 'ç¤ºä¾‹å•†æˆ·B',
                    contact: 'ç‹æ¢…',
                    phone: '13100000008',
                    submitTime: '2025-10-19 10:06',
                    attachments: ['ç»è¥èŒƒå›´å˜æ›´ç”³è¯·.pdf'],
                    diffs: [
                        { field: 'ç»è¥èŒƒå›´', oldValue: 'å’–å•¡è±†åŠå™¨å…·é›¶å”®', newValue: 'å’–å•¡è±†ã€çƒ˜ç„™é£Ÿå“é›¶å”®' }
                    ]
                }
            },
            productNew: {
                'NP-5001': {
                    id: 'NP-5001',
                    name: 'æ™ºèƒ½æ‰‹è¡¨ X',
                    shop: 'ç¤ºä¾‹å•†æˆ·A',
                    category: 'æ•°ç å®¶ç”µ / æ™ºèƒ½ç©¿æˆ´',
                    originalPrice: 'Â¥999.00',
                    salePrice: 'Â¥899.00',
                    unit: 'ä»¶',
                    origin: 'ä¸­å›½',
                    barcode: '6920000000001',
                    share: 'åˆ†è´¦æ¯”ä¾‹ 15%',
                    shareCategory: 'æ•°ç å®¶ç”µç±»',
                    submitTime: '2025-10-20 10:12',
                    attachments: ['å•†å“ä¸»å›¾.jpg', 'å‚æ•°æ‰‹å†Œ.pdf'],
                    remark: 'æ”¯æŒNFCå’Œè“ç‰™é€šè¯'
                },
                'NP-5002': {
                    id: 'NP-5002',
                    name: 'æœ‰æœºå’–å•¡è±† 500g',
                    shop: 'ç¤ºä¾‹å•†æˆ·B',
                    category: 'é£Ÿå“é¥®æ–™ / å’–å•¡è±†',
                    originalPrice: 'Â¥138.00',
                    salePrice: 'Â¥128.00',
                    unit: 'è¢‹',
                    origin: 'å“¥ä¼¦æ¯”äºš',
                    barcode: '6930000001122',
                    share: 'åˆ†è´¦æ¯”ä¾‹ 12%',
                    shareCategory: 'é£Ÿå“é¥®æ–™ç±»',
                    submitTime: '2025-10-21 08:55',
                    attachments: ['å•†å“ä¸»å›¾.jpg', 'äº§åœ°è¯æ˜.pdf'],
                    remark: 'åŸäº§åœ°ç›´ä¾›ï¼Œéœ€å†·é“¾ä»“å‚¨'
                }
            },
            productChange: {
                'PC-7001': {
                    id: 'PC-7001',
                    name: 'æ™ºèƒ½æ‰‹è¡¨ X',
                    shop: 'ç¤ºä¾‹å•†æˆ·A',
                    category: 'æ•°ç å®¶ç”µ / æ™ºèƒ½ç©¿æˆ´',
                    price: 'Â¥899.00',
                    share: '15%',
                    submitTime: '2025-10-19 09:15',
                    attachments: ['æ–°ç‰ˆå•†å“ä¸»å›¾.jpg'],
                    diffs: [
                        { field: 'é”€å”®ä»·æ ¼', oldValue: 'Â¥999.00', newValue: 'Â¥899.00' },
                        { field: 'åˆ†è´¦æ¯”ä¾‹', oldValue: '18%', newValue: '15%' }
                    ]
                },
                'PC-7002': {
                    id: 'PC-7002',
                    name: 'æœ‰æœºå’–å•¡è±† 500g',
                    shop: 'ç¤ºä¾‹å•†æˆ·B',
                    category: 'é£Ÿå“é¥®æ–™ / å’–å•¡è±†',
                    price: 'Â¥128.00',
                    share: '12%',
                    submitTime: '2025-10-20 16:40',
                    attachments: ['äº§å“å›¾ç‰‡æ–°ç‰ˆ.zip'],
                    diffs: [
                        { field: 'å•†å“å›¾ç‰‡', oldValue: 'å’–å•¡è±†æ—§ç‰ˆä¸»å›¾', newValue: 'ä¸Šä¼ æ–°ç‰ˆä¸»å›¾ï¼ˆå«äº§åœ°æ ‡è¯†ï¼‰' }
                    ]
                }
            },
            merchantSearch: {
                suspend: [
                    {
                        id: 'M2023001',
                        name: 'ç¤ºä¾‹å•†æˆ·A',
                        contact: 'ææ™“',
                        phone: '13000000003',
                        region: 'ç¦å»ºçœ/å¦é—¨å¸‚/æ¹–é‡ŒåŒº',
                        address: 'æ¹–é‡ŒåŒºå…‰æ˜è·¯18å·',
                        status: 'åœ¨è¥'
                    },
                    {
                        id: 'M2023002',
                        name: 'æµ·é£å®¶å±…é¦†',
                        contact: 'å‘¨èˆª',
                        phone: '13000000004',
                        region: 'æµ™æ±Ÿçœ/å®æ³¢å¸‚/é„å·åŒº',
                        address: 'é„å·åŒºç¯åŸå—è·¯200å·',
                        status: 'åœ¨è¥'
                    }
                ],
                resume: [
                    {
                        id: 'M2022011',
                        name: 'æ‹¼å‘³é›¶é£Ÿé“º',
                        contact: 'èµµå€©',
                        phone: '13100000015',
                        region: 'å¹¿ä¸œçœ/æ·±åœ³å¸‚/ç¦ç”°åŒº',
                        address: 'ç¦ç”°åŒºç›Šç”°è·¯300å·',
                        status: 'æš‚åœ'
                    },
                    {
                        id: 'M2022018',
                        name: 'æ³‰éŸµèŒ¶åº„',
                        contact: 'å´è¿ª',
                        phone: '13100000026',
                        region: 'ç¦å»ºçœ/æ³‰å·å¸‚/ä¸°æ³½åŒº',
                        address: 'ä¸°æ³½åŒºæ´¥æ·®è¡—128å·',
                        status: 'æš‚åœ'
                    }
                ]
            }
            ,
            providerSearch: [
                {
                    id: 'S1001',
                    name: 'ç¤ºä¾‹æœåŠ¡å•†A',
                    types: ['ä»“é…ä¸€ä½“','åŒåŸå³æ—¶é…é€'],
                    region: 'ç¦å»ºçœ å¦é—¨å¸‚',
                    contactName: 'ç‹äº”',
                    contactPhone: '13900000001',
                    contactAddress: 'å¦é—¨å¸‚æ¹–é‡ŒåŒºé«˜æ—ä¸­è·¯66å·',
                    intro: 'è¦†ç›–å¦é—¨å…¨åŸŸï¼Œæä¾›ä»“å‚¨ã€åˆ†æ‹£ä¸åŒåŸå³æ—¶é…é€ä¸€ä½“åŒ–æœåŠ¡ã€‚',
                    qualifications: ['è¥ä¸šæ‰§ç…§.pdf','è¿è¾“èµ„è´¨.jpg'],
                    status: 'active'
                },
                {
                    id: 'S1002',
                    name: 'ç¤ºä¾‹æœåŠ¡å•†B',
                    types: ['çœé™…å¹²çº¿è¿è¾“'],
                    region: 'æµ™æ±Ÿçœ æ­å·å¸‚',
                    contactName: 'èµµå…­',
                    contactPhone: '13900000002',
                    contactAddress: 'æ­å·å¸‚ä½™æ­åŒºç§‘åˆ›è·¯99å·',
                    intro: 'é•¿ä¸‰è§’åŒºåŸŸçœé™…å¹²çº¿è¿è¾“ç½‘ç»œå®Œå–„ï¼Œæ—¶æ•ˆç¨³å®šã€‚',
                    qualifications: ['è¥ä¸šæ‰§ç…§.pdf'],
                    status: 'suspended'
                },
                {
                    id: 'S1003',
                    name: 'å®‰å¿ƒå®‰è£…æœåŠ¡',
                    types: ['å®‰è£…æœåŠ¡','å”®åç»´æŠ¤'],
                    region: 'å¹¿ä¸œçœ æ·±åœ³å¸‚',
                    contactName: 'æå¼º',
                    contactPhone: '13900000003',
                    contactAddress: 'æ·±åœ³å¸‚ç¦ç”°åŒºç›Šç”°è·¯300å·',
                    intro: 'è¦†ç›–å®¶ç”µå®‰è£…ä¸å”®åç»´æŠ¤ï¼ŒæœåŠ¡è§„èŒƒï¼Œè¯„ä»·è‰¯å¥½ã€‚',
                    qualifications: ['æœåŠ¡è®¤è¯ä¹¦.pdf','è´¨æ£€åˆæ ¼è¯æ˜.jpg'],
                    status: 'active'
                }
            ],
            providerOpen: {
                'PO-3001': {
                    id: 'PO-3001', providerName: 'ç¤ºä¾‹æœåŠ¡å•†A', contact: 'ç‹äº”', phone: '13900000001', scope: 'ä»“é…ä¸€ä½“ã€åŒåŸå³æ—¶é…é€', region: 'ç¦å»ºçœ å¦é—¨å¸‚ æ¹–é‡ŒåŒº', address: 'å¦é—¨å¸‚æ¹–é‡ŒåŒºé«˜æ—ä¸­è·¯66å·', licenseNo: 'SP91350200MA9XXXX01', licenseValid: '2020-01-01 ~ 2030-01-01', bank: 'å»ºè®¾é“¶è¡Œå¦é—¨å˜‰å›­æ”¯è¡Œ 6222 **** 5566', submitTime: '2025-10-19 10:20', attachments: ['è¥ä¸šæ‰§ç…§.pdf','è¿è¾“èµ„è´¨.jpg'], remark: 'è¦†ç›–å¦é—¨å…¨åŸŸ'
                },
                'PO-3002': {
                    id: 'PO-3002', providerName: 'ç¤ºä¾‹æœåŠ¡å•†B', contact: 'èµµå…­', phone: '13900000002', scope: 'çœé™…å¹²çº¿è¿è¾“', region: 'æµ™æ±Ÿçœ æ­å·å¸‚ ä½™æ­åŒº', address: 'ä½™æ­åŒºç§‘æŠ€å¤§é“88å·', licenseNo: 'SP91330110MA2XXXX02', licenseValid: '2021-06-01 ~ 2031-06-01', bank: 'æ‹›å•†é“¶è¡Œæ­å·åˆ†è¡Œ 6214 **** 7788', submitTime: '2025-10-20 16:05', attachments: ['è¥ä¸šæ‰§ç…§.pdf'], remark: 'é•¿ä¸‰è§’è¦†ç›–'
                }
            },
            providerChange: {
                'PCG-4001': { id: 'PCG-4001', providerName: 'ç¤ºä¾‹æœåŠ¡å•†A', contact: 'ç‹äº”', phone: '13900000001', submitTime: '2025-10-20 14:32', attachments: ['è”ç³»äººå˜æ›´ç”³è¯·.pdf'], diffs: [ {field:'è”ç³»äºº', oldValue:'ç‹äº”', newValue:'ç‹ç»´'}, {field:'æœåŠ¡èŒƒå›´', oldValue:'ä»“é…ä¸€ä½“', newValue:'ä»“é…ä¸€ä½“ã€åŒåŸå³æ—¶é…é€'} ] },
                'PCG-4002': { id: 'PCG-4002', providerName: 'ç¤ºä¾‹æœåŠ¡å•†B', contact: 'èµµå…­', phone: '13900000002', submitTime: '2025-10-21 09:18', attachments: [], diffs: [ {field:'åœ°å€', oldValue:'ä½™æ­åŒºç§‘æŠ€å¤§é“88å·', newValue:'ä½™æ­åŒºç§‘åˆ›è·¯99å·'} ] }
            },
            activityApprove: {
                'AC-9001': { id: 'AC-9001', name: 'åŒåä¸€å¤§ä¿ƒ', sponsor: 'ç¤ºä¾‹å•†æˆ·A', startTime: '2025-11-01', endTime: '2025-11-12', scope: 'å…¨åœºéƒ¨åˆ†ç±»ç›®', submitTime: '2025-10-15 11:00', attachments: ['æ´»åŠ¨æ–¹æ¡ˆ.pdf','é¢„ç®—è¡¨.xlsx'], remark: 'éœ€é£æ§å¤æ ¸' },
                'AC-9002': { id: 'AC-9002', name: 'å¹´åº•æ¸…ä»“', sponsor: 'ç¤ºä¾‹å•†æˆ·B', startTime: '2025-12-20', endTime: '2025-12-31', scope: 'è‡ªè¥åº—é“º', submitTime: '2025-10-18 09:40', attachments: ['æ´»åŠ¨æµ·æŠ¥.jpg'], remark: '' }
            },
            // ===== ä¸‹é¢ä¸ºæ–°å¢æ•°æ®é›†ï¼šå•†å“åˆ†ç±» / å•†å“æŸ¥è¯¢ / æ´»åŠ¨æŸ¥è¯¢ / é¡¾å®¢ç®¡ç† =====
            productCategories: {
                level1: [
                    { id: 'C1', name: 'é£Ÿå“é¥®æ–™', share: 12, children: [
                        { id: 'C1-1', name: 'ä¼‘é—²é›¶é£Ÿ', share: 10 },
                        { id: 'C1-2', name: 'é¥®ç”¨æ°´', share: 8 }
                    ]},
                    { id: 'C2', name: 'å®¶å±…æ—¥ç”¨', share: 10, children: [
                        { id: 'C2-1', name: 'æ¸…æ´ç”¨å“', share: 9 },
                        { id: 'C2-2', name: 'å¨æˆ¿ç”¨å“', share: 11 }
                    ]}
                ]
            },
            productSearch: [
                { id: 'P1001', name: 'ç™¾å²å±±çŸ¿æ³‰æ°´', shopName: 'åå—å•†è´¸', category: 'é¥®ç”¨æ°´', originalPrice: 4.50, auditNew: 'å·²é€šè¿‡(2025-09-12)', auditChange: 'æ— ' },
                { id: 'P1002', name: 'ä¹äº‹è–¯ç‰‡-åŸå‘³', shopName: 'é›¶é£Ÿé“ºå­', category: 'ä¼‘é—²é›¶é£Ÿ', originalPrice: 6.80, auditNew: 'å·²é€šè¿‡(2025-08-03)', auditChange: 'é©³å›(2025-10-10)' },
                { id: 'P1003', name: 'ä¸é”ˆé’¢èœåˆ€', shopName: 'å±…å®¶ä¼˜é€‰', category: 'å¨æˆ¿ç”¨å“', originalPrice: 29.90, auditNew: 'å·²é€šè¿‡(2025-07-21)', auditChange: 'å·²é€šè¿‡(2025-09-30)'}
            ],
            activities: [
                { id: 'A9001', name: 'åŒ11å¤§ä¿ƒ', merchantName: 'åå—å•†è´¸', startTime: '2025-11-10 00:00', endTime: '2025-11-12 23:59', status: 'å·²ä¸Šçº¿', productNames: ['ç™¾å²å±±çŸ¿æ³‰æ°´','ä¹äº‹è–¯ç‰‡-åŸå‘³'], audits: { new: 'å·²é€šè¿‡(2025-10-20)', change: 'æ— ' }, rules: 'æ»¡100å‡20ï¼›éƒ¨åˆ†å•†å“ä¸å‚ä¸å åŠ ' },
                { id: 'A9002', name: 'å¼€å­¦å­£', merchantName: 'é›¶é£Ÿé“ºå­', startTime: '2025-08-20 00:00', endTime: '2025-09-10 23:59', status: 'å·²ç»“æŸ', productNames: ['ä¹äº‹è–¯ç‰‡-åŸå‘³'], audits: { new: 'å·²é€šè¿‡(2025-08-10)', change: 'å·²é€šè¿‡(2025-08-28)' }, rules: 'ç¬¬äºŒä»¶åŠä»·ï¼›æŒ‡å®šSKU' }
            ],
            customers: [
                { id: 'U1001', username: 'alice', name: 'è‰¾ä¸½æ–¯', phone: '13800000011', status: 'æ­£å¸¸' },
                { id: 'U1002', username: 'bob', name: 'é²å‹ƒ', phone: '13900000022', status: 'å·²å°ç¦' },
                { id: 'U1003', username: 'cindy', name: 'è¾›è¿ª', phone: '13700000033', status: 'æ­£å¸¸' }
            ]
        };

        // è§’è‰²é€‰æ‹©åŠŸèƒ½
        function selectRole(role) {
            selectedRole = role;
            
            // å¯ç”¨æˆ–ç¦ç”¨ç™»å½•æŒ‰é’®
            const loginBtn = document.getElementById('loginBtn');
            if (role && role !== '') {
                loginBtn.disabled = false;
                
                // æ›´æ–°æ¬¢è¿æ–‡æœ¬
                const roleNames = {
                    'merchant': 'å•†æˆ·',
                    'service-provider': 'æœåŠ¡å•†',
                    'platform-admin': 'å¹³å°ç®¡ç†äººå‘˜',
                    'technician': 'ç»´ä¿®å·¥'
                };
                document.getElementById('welcomeText').textContent = `æ¬¢è¿ä½ ! ${roleNames[role]}`;
            } else {
                loginBtn.disabled = true;
            }
        }

        // ç™»å½•å¤„ç†
        function handleLogin(event) {
            event.preventDefault();
            
            const username = document.getElementById('username').value.trim();
            const password = document.getElementById('password').value.trim();
            
            if (!selectedRole) {
                showModal('warning', 'è¯·é€‰æ‹©è§’è‰²', 'è¯·å…ˆé€‰æ‹©æ‚¨çš„è§’è‰²ç±»å‹ã€‚', 'âš ');
                return;
            }
            
            if (!username || !password) {
                showModal('warning', 'è¯·å¡«å†™å®Œæ•´ä¿¡æ¯', 'è¯·è¾“å…¥ç”¨æˆ·åå’Œå¯†ç ã€‚', 'âš ');
                return;
            }
            
            // æ¨¡æ‹Ÿç™»å½•éªŒè¯ - æ”¯æŒå¤šä¸ªæµ‹è¯•è´¦å·
            const validAccounts = [
                { username: 'admin', password: '123456' },
                { username: 'merchant', password: 'merchant123' },
                { username: 'service', password: 'service123' },
                { username: 'platform', password: 'platform123' },
                { username: 'repair', password: 'repair123' },
                { username: 'test', password: 'test123' },
                { username: 'user', password: 'user123' }
            ];
            
            const isValidAccount = validAccounts.some(account => 
                account.username === username && account.password === password
            );
            
            if (isValidAccount) {
                // ç™»å½•æˆåŠŸ
                currentUser = {
                    username: username,
                    role: selectedRole,
                    roleName: {
                        'merchant': 'å•†æˆ·',
                        'service-provider': 'æœåŠ¡å•†',
                        'platform-admin': 'å¹³å°ç®¡ç†äººå‘˜',
                        'technician': 'ç»´ä¿®å·¥'
                    }[selectedRole]
                };
                
                showModal('success', 'ç™»å½•æˆåŠŸ', `æ¬¢è¿å›æ¥ï¼Œ${currentUser.roleName}ï¼`, 'âœ“');
                
                setTimeout(() => {
                    hideModal();
                    showMainApp();
                }, 1500);
            } else {
                showModal('warning', 'ç™»å½•å¤±è´¥', 'ç”¨æˆ·åæˆ–å¯†ç é”™è¯¯ï¼Œè¯·é‡è¯•ã€‚\n\næµ‹è¯•è´¦å·ï¼š\nç”¨æˆ·å: admin, å¯†ç : 123456\nç”¨æˆ·å: test, å¯†ç : test123', 'âš ');
            }
        }

        // æ˜¾ç¤ºä¸»åº”ç”¨
        function showMainApp() {
            document.getElementById('loginPage').style.display = 'none';
            if (currentUser.role === 'technician') {
                document.getElementById('techApp').style.display = 'flex';
                document.getElementById('mainApp').style.display = 'none';
                document.getElementById('techMobile').style.display = 'none';
                document.getElementById('welcomeTextTech').textContent = `æ¬¢è¿ä½ ! ${currentUser.roleName}`;
                showTechPage('tech-orders');
            } else {
                document.getElementById('mainApp').style.display = 'flex';
                document.getElementById('techApp').style.display = 'none';
                document.getElementById('techMobile').style.display = 'none';
                
                // æ›´æ–°æ¬¢è¿æ–‡æœ¬
                document.getElementById('welcomeText').textContent = `æ¬¢è¿ä½ ! ${currentUser.roleName}`;
                
                // æ ¹æ®è§’è‰²æ¸²æŸ“å¯¼èˆªå¹¶è®¾ç½®é»˜è®¤é¡µé¢
                renderNavForRole(currentUser.role);
                attachGlobalSearch();
                if (currentUser.role === 'platform-admin') {
                    showPage('admin-merchants');
                } else {
                    showPage('account-info');
                }
            }
        }

        // é€€å‡ºç™»å½•
        function logout() {
            if (confirm('ç¡®å®šè¦é€€å‡ºç™»å½•å—ï¼Ÿ')) {
                currentUser = null;
                selectedRole = null;
                
                // é‡ç½®ç™»å½•è¡¨å•
                document.getElementById('username').value = '';
                document.getElementById('password').value = '';
                document.getElementById('loginBtn').disabled = true;
                document.getElementById('roleSelect').value = '';
                
                // æ˜¾ç¤ºç™»å½•é¡µé¢
                document.getElementById('mainApp').style.display = 'none';
                document.getElementById('techApp').style.display = 'none';
                document.getElementById('techMobile').style.display = 'none';
                document.getElementById('loginPage').style.display = 'flex';
            }
        }

        // å¼¹çª—åŠŸèƒ½
        function showModal(type, title, message, icon = 'âœ“') {
            const modalOverlay = document.getElementById('modalOverlay');
            const modalIcon = document.getElementById('modalIcon');
            const modalTitle = document.getElementById('modalTitle');
            const modalMessage = document.getElementById('modalMessage');
            
            // è®¾ç½®å›¾æ ‡å’Œæ ·å¼
            modalIcon.textContent = icon;
            modalIcon.className = `modal-icon ${type}`;
            
            // è®¾ç½®æ ‡é¢˜å’Œæ¶ˆæ¯
            modalTitle.textContent = title;
            modalMessage.textContent = message;
            
            // æ˜¾ç¤ºå¼¹çª—
            modalOverlay.classList.add('show');
        }

        function hideModal() {
            const modalOverlay = document.getElementById('modalOverlay');
            modalOverlay.classList.remove('show');
        }

        // ç‚¹å‡»é®ç½©å±‚å…³é—­å¼¹çª—
        document.getElementById('modalOverlay').addEventListener('click', function(e) {
            if (e.target === this) {
                hideModal();
            }
        });

        // ESCé”®å…³é—­å¼¹çª—
        document.addEventListener('keydown', function(e) {
            if (e.key === 'Escape') {
                hideModal();
            }
        });

        // é¡µé¢åˆ‡æ¢åŠŸèƒ½
        function showPage(pageId) {
            // éšè—æ‰€æœ‰é¡µé¢
            const pages = document.querySelectorAll('.page');
            pages.forEach(page => page.classList.remove('active'));
            
            // æ˜¾ç¤ºç›®æ ‡é¡µé¢
            const targetPage = document.getElementById(pageId);
            if (targetPage) {
                targetPage.classList.add('active');
            }
            
            // æ›´æ–°å¯¼èˆªçŠ¶æ€
            setActiveNavForPage(pageId);

            ensureSelectionDefaults(pageId);

            // è¿›å…¥æŸ¥è¯¢é¡µé¢æ—¶ç»‘å®šå›è½¦æŸ¥è¯¢
            const queryBindings = {
                'admin-product-query': ['adminProductQueryInput','adminProductQueryBody'],
                'admin-customer-query': ['adminCustomerQueryInput','adminCustomerQueryBody'],
                'admin-activity-query': ['adminActivityQueryInput','adminActivityQueryBody'],
                'admin-provider-query': ['adminProviderQueryInput','adminProviderQueryBody']
            };
            if (queryBindings[pageId]) {
                const [inp, body] = queryBindings[pageId];
                bindEnterToShowResults(inp, body);
            }

            // æŸ¥è¯¢æœåŠ¡å•†é¡µï¼šä¸ºå¤šä¸ªç­›é€‰æ§ä»¶ç»‘å®š Enter è§¦å‘æŸ¥è¯¢
            if (pageId === 'admin-provider-query') {
                const nameInp = document.getElementById('adminProviderQueryInput');
                const regionInp = document.getElementById('adminProviderRegionInput');
                const typeSel = document.getElementById('adminProviderTypeSelect');
                const bindEnter = (el) => { if (!el) return; el.onkeydown = (e)=>{ if (e.key === 'Enter') searchProviderList(); }; };
                bindEnter(nameInp); bindEnter(regionInp); bindEnter(typeSel);
            }

            // è‡ªåŠ¨å±•ç¤º/åˆ·æ–°æ•°æ®ï¼šç¬¦åˆâ€œç³»ç»Ÿæ˜¾ç¤ºâ€¦â€çš„ç”¨ä¾‹è¦æ±‚
            try {
                if (pageId === 'admin-product-category-update') renderCategoryL1();
                if (pageId === 'admin-product-query') searchAdminProducts();
                if (pageId === 'admin-activity-query') searchAdminActivities();
                if (pageId === 'admin-customer-ban') searchCustomersBan();
                if (pageId === 'admin-customer-unban') searchCustomersUnban();
                if (pageId === 'admin-customer-query') searchCustomersQuery();
                if (pageId === 'admin-customer-deactivate') searchCustomersDeactivate();
                if (pageId === 'admin-provider-suspend') searchProvidersSuspend();
                if (pageId === 'admin-provider-resume') searchProvidersResume();
            } catch(err) { /* åˆæ¬¡åŠ è½½å‡½æ•°å°šæœªå®šä¹‰æ—¶å¿½ç•¥ */ }
        }

        // æ ¹æ®å½“å‰è§’è‰²æ¸²æŸ“ä¾§è¾¹å¯¼èˆª
        function renderNavForRole(role) {
            const navMenu = document.querySelector('.nav-menu');
            if (!navMenu) return;
            if (role === 'platform-admin') {
                navMenu.innerHTML = `
                    <li class="nav-item" data-nav="admin-merchants" onclick="showPage('admin-merchants')">
                        <div class="nav-icon"></div>
                        ç®¡ç†å•†æˆ·
                    </li>
                    <li class="nav-item" data-nav="admin-products" onclick="showPage('admin-products')">
                        <div class="nav-icon"></div>
                        ç®¡ç†å•†å“
                    </li>
                    <li class="nav-item" data-nav="admin-customers" onclick="showPage('admin-customers')">
                        <div class="nav-icon"></div>
                        ç®¡ç†é¡¾å®¢
                    </li>
                    <li class="nav-item" data-nav="admin-providers" onclick="showPage('admin-providers')">
                        <div class="nav-icon"></div>
                        ç®¡ç†æœåŠ¡å•†
                    </li>
                    <li class="nav-item" data-nav="admin-activities" onclick="showPage('admin-activities')">
                        <div class="nav-icon"></div>
                        ç®¡ç†æ´»åŠ¨
                    </li>
                `;
            } else {
                // å•†æˆ·/å…¶ä»–è§’è‰²ï¼šæ¢å¤åŸæœ‰å¯¼èˆª
                navMenu.innerHTML = `
                    <li class="nav-item" onclick="showPage('account-opening')">
                        <div class="nav-icon"></div>
                        å•†æˆ·å¼€æˆ·
                    </li>
                    <li class="nav-item" onclick="showPage('account-info')">
                        <div class="nav-icon"></div>
                        ç®¡ç†è´¦å·
                    </li>
                    <li class="nav-item" onclick="showPage('products')">
                        <div class="nav-icon"></div>
                        ç®¡ç†å•†å“
                    </li>
                    <li class="nav-item" onclick="showPage('activities')">
                        <div class="nav-icon"></div>
                        ç®¡ç†æ´»åŠ¨
                    </li>
                    <li class="nav-item" onclick="showPage('service-providers')">
                        <div class="nav-icon"></div>
                        ç®¡ç†æœåŠ¡å•†
                    </li>
                    <li class="nav-item" onclick="showPage('orders')">
                        <div class="nav-icon"></div>
                        ç®¡ç†è®¢å•
                    </li>
                    <li class="nav-item" onclick="showPage('sales')">
                        <div class="nav-icon"></div>
                        é”€å”®æƒ…å†µ
                    </li>
                    <li class="nav-item" onclick="showPage('after-sales')">
                        <div class="nav-icon"></div>
                        ç®¡ç†å”®å
                    </li>
                `;
            }
        }

        // è®¾ç½®ä¾§è¾¹æ çš„æ¿€æ´»é¡¹
        function setActiveNavForPage(pageId) {
            const navItems = document.querySelectorAll('.nav-item');
            navItems.forEach(item => item.classList.remove('active'));
            if (!currentUser || !currentUser.role) return;
            // å¹³å°ç®¡ç†å‘˜é¡µé¢å½’å±
            if (currentUser.role === 'platform-admin') {
                const mapping = {
                    'admin-merchants': ['admin-merchants','admin-merchant-approve-open','admin-merchant-approve-change','admin-merchant-suspend','admin-merchant-resume'],
                    'admin-products': ['admin-products','admin-product-approve-new','admin-product-approve-change','admin-product-category-create','admin-product-category-delete','admin-product-category-update','admin-product-query'],
                    'admin-customers': ['admin-customers','admin-customer-ban','admin-customer-unban','admin-customer-query','admin-customer-deactivate'],
                    'admin-providers': ['admin-providers','admin-provider-approve-open','admin-provider-approve-change','admin-provider-query','admin-provider-suspend','admin-provider-resume'],
                    'admin-activities': ['admin-activities','admin-activity-approve','admin-activity-query']
                };
                for (const [navKey, pages] of Object.entries(mapping)) {
                    if (pages.includes(pageId)) {
                        const target = Array.from(navItems).find(li => li.getAttribute('data-nav') === navKey);
                        if (target) target.classList.add('active');
                        break;
                    }
                }
            } else {
                // åŸæœ‰è§„åˆ™
                if (pageId === 'account-opening') {
                    navItems[0] && navItems[0].classList.add('active');
                } else if (['account-info','modify-account','modify-attributes','account-cancellation','suspend-account','cancel-account'].includes(pageId)) {
                    navItems[1] && navItems[1].classList.add('active');
                } else if (['products','product-search-results','apply-new-product','apply-product-change','query-product','modify-product-attributes'].includes(pageId)) {
                    navItems[2] && navItems[2].classList.add('active');
                }
            }
        }

        // ç»‘å®šå…¨å±€æœç´¢ï¼ˆEnter è§¦å‘è·³è½¬ï¼‰
        function attachGlobalSearch() {
            const input = document.getElementById('globalSearchInput');
            if (!input) return;
            input.onkeydown = (e) => {
                if (e.key === 'Enter') {
                    const q = (input.value || '').trim();
                    if (!q) return;
                    if (currentUser && currentUser.role === 'platform-admin') {
                        routeAdminSearch(q);
                    } else {
                        // éå¹³å°ç®¡ç†å‘˜ï¼šè‹¥åœ¨å•†å“é¡µï¼Œæ²¿ç”¨ç°æœ‰æœç´¢é€»è¾‘
                        if (document.getElementById('products') && document.getElementById('products').classList.contains('active')) {
                            const productInput = document.getElementById('productSearchInput');
                            if (productInput) productInput.value = q;
                            searchProducts();
                        } else {
                            showModal('info', 'å…¨å±€æœç´¢', 'è¯·åœ¨å½“å‰é¡µé¢ä½¿ç”¨å¯¹åº”çš„æœç´¢åŠŸèƒ½ã€‚', 'ğŸ”');
                        }
                    }
                }
            };
        }

        // å¹³å°ç®¡ç†å‘˜çš„æœç´¢è·¯ç”±
        function routeAdminSearch(query) {
            const q = query.replace(/\s+/g, '').toLowerCase();
            const goto = (id) => showPage(id);

            // å…³é”®å­—åŒ¹é…å·¥å…·
            const has = (w) => q.includes(w);

            // å•†æˆ·
            if ((has('å®¡æ ¸') && has('å•†æˆ·') && (has('å¼€æˆ·') || has('å¼€åº—') || has('å¼€è®¾'))) ) return goto('admin-merchant-approve-open');
            if ((has('å®¡æ ¸') && has('å•†æˆ·') && (has('å˜æ›´') || has('ä¿®æ”¹') || has('å˜åŠ¨'))) ) return goto('admin-merchant-approve-change');
            if ((has('æš‚åœ') || has('åœç”¨')) && has('å•†æˆ·')) return goto('admin-merchant-suspend');
            if ((has('æ¢å¤') || has('å¯ç”¨')) && has('å•†æˆ·')) return goto('admin-merchant-resume');

            // å•†å“
            if (has('å®¡æ ¸') && (has('æ–°å¢å•†å“') || (has('æ–°å¢') && has('å•†å“')))) return goto('admin-product-approve-new');
            if (has('å®¡æ ¸') && (has('å˜æ›´å•†å“') || (has('å˜æ›´') && has('å•†å“')))) return goto('admin-product-approve-change');
            if ((has('å»ºç«‹') || has('æ–°å¢') || has('åˆ›å»º')) && has('å•†å“åˆ†ç±»')) return goto('admin-product-category-create');
            if (has('åˆ é™¤') && has('å•†å“åˆ†ç±»')) return goto('admin-product-category-delete');
            if ((has('ä¿®æ”¹') || has('ç¼–è¾‘')) && has('å•†å“åˆ†ç±»')) return goto('admin-product-category-update');
            if (has('æŸ¥è¯¢') && has('å•†å“')) return goto('admin-product-query');

            // é¡¾å®¢
            if ((has('å°ç¦') || has('ç¦ç”¨')) && (has('é¡¾å®¢') || has('ç”¨æˆ·'))) return goto('admin-customer-ban');
            if ((has('è§£ç¦') || has('å¯ç”¨')) && (has('é¡¾å®¢') || has('ç”¨æˆ·'))) return goto('admin-customer-unban');
            if ((has('æŸ¥è¯¢')) && (has('é¡¾å®¢') || has('ç”¨æˆ·'))) return goto('admin-customer-query');
            if ((has('æ³¨é”€') || has('åˆ é™¤')) && (has('é¡¾å®¢') || has('ç”¨æˆ·'))) return goto('admin-customer-deactivate');

            // æœåŠ¡å•†
            if (has('å®¡æ ¸') && has('æœåŠ¡å•†') && (has('å¼€æˆ·') || has('å¼€é€š'))) return goto('admin-provider-approve-open');
            if (has('å®¡æ ¸') && has('æœåŠ¡å•†') && (has('å˜æ›´') || has('ä¿®æ”¹'))) return goto('admin-provider-approve-change');
            if (has('æŸ¥è¯¢') && has('æœåŠ¡å•†')) return goto('admin-provider-query');
            if ((has('æš‚åœ') || has('åœç”¨')) && has('æœåŠ¡å•†')) return goto('admin-provider-suspend');
            if ((has('æ¢å¤') || has('å¯ç”¨')) && has('æœåŠ¡å•†')) return goto('admin-provider-resume');

            // æ´»åŠ¨
            if (has('å®¡æ ¸') && has('æ´»åŠ¨')) return goto('admin-activity-approve');
            if (has('æŸ¥è¯¢') && has('æ´»åŠ¨')) return goto('admin-activity-query');

            // é»˜è®¤ï¼šè·³åˆ°å¹³å°ç®¡ç†å‘˜ä¸»é¡µ
            showModal('info', 'æœªåŒ¹é…åˆ°é¡µé¢', 'æœªè¯†åˆ«çš„å…³é”®è¯ï¼Œå·²ä¸ºæ‚¨æ‰“å¼€å¹³å°ç®¡ç†å‘˜å¯¼èˆªã€‚', 'ğŸ”');
            goto('admin-merchants');
        }

        // æäº¤å¼€æˆ·ç”³è¯·
        function submitAccountOpening() {
            // è·å–è¡¨å•æ•°æ®
            const merchantName = document.getElementById('merchantName').value.trim();
            const contactName = document.getElementById('contactName').value.trim();
            const contactPhone = document.getElementById('contactPhone').value.trim();
            const merchantAddress = document.getElementById('merchantAddress').value.trim();
            const productLimit = document.getElementById('productLimit').value.trim();
            const employeeLimit = document.getElementById('employeeLimit').value.trim();
            
            // è¡¨å•éªŒè¯
            if (!merchantName || !contactName || !contactPhone || !merchantAddress || !productLimit || !employeeLimit) {
                showModal('warning', 'è¯·å¡«å†™å®Œæ•´ä¿¡æ¯', 'è¯·ç¡®ä¿æ‰€æœ‰å¿…å¡«å­—æ®µéƒ½å·²å¡«å†™å®Œæ•´ã€‚', 'âš ');
                return;
            }
            
            // éªŒè¯æ•°å­—å­—æ®µ
            if (isNaN(productLimit) || isNaN(employeeLimit) || productLimit <= 0 || employeeLimit <= 0) {
                showModal('warning', 'æ•°æ®æ ¼å¼é”™è¯¯', 'å•†å“æ•°ç›®ä¸Šé™å’Œå‘˜å·¥ä¸Šé™å¿…é¡»ä¸ºæ­£æ•´æ•°ã€‚', 'âš ');
                return;
            }
            
            // éªŒè¯æ‰‹æœºå·æ ¼å¼ï¼ˆç®€å•éªŒè¯ï¼‰
            const phoneRegex = /^1[3-9]\d{9}$/;
            if (!phoneRegex.test(contactPhone)) {
                showModal('warning', 'æ‰‹æœºå·æ ¼å¼é”™è¯¯', 'è¯·è¾“å…¥æ­£ç¡®çš„æ‰‹æœºå·ç æ ¼å¼ã€‚', 'âš ');
                return;
            }
            
            // æ˜¾ç¤ºæˆåŠŸå¼¹çª—
            showModal('success', 'å¼€æˆ·ç”³è¯·æäº¤æˆåŠŸ', 'æ‚¨çš„å¼€æˆ·ç”³è¯·å·²æˆåŠŸæäº¤ï¼Œè¯·ç­‰å¾…å¹³å°å®¡æ ¸ã€‚å®¡æ ¸ç»“æœå°†é€šè¿‡ç³»ç»Ÿæ¶ˆæ¯é€šçŸ¥æ‚¨ã€‚', 'âœ“');
            setTimeout(() => {
                hideModal();
                showPage('account-info');
            }, 2000);
        }

        // æäº¤é”€æˆ·ç”³è¯·
        function submitAccountCancellation() {
            // æ˜¾ç¤ºç¡®è®¤å¼¹çª—
            showModal('danger', 'ç¡®è®¤æ³¨é”€è´¦æˆ·', 'æ‚¨ç¡®å®šè¦æ³¨é”€è´¦æˆ·å—ï¼Ÿæ­¤æ“ä½œä¸å¯é€†ï¼Œæ‰€æœ‰æ•°æ®å°†è¢«æ°¸ä¹…åˆ é™¤ã€‚', 'âš ');
            
            // æ›´æ–°æŒ‰é’®
            const confirmBtn = document.getElementById('modalConfirmBtn');
            confirmBtn.textContent = 'ç¡®è®¤æ³¨é”€';
            confirmBtn.className = 'modal-btn modal-btn-secondary';
            confirmBtn.onclick = function() {
                hideModal();
                // æ˜¾ç¤ºæˆåŠŸå¼¹çª—
                setTimeout(() => {
                    showModal('warning', 'æ³¨é”€ç”³è¯·æäº¤æˆåŠŸ', 'æ‚¨çš„è´¦æˆ·æ³¨é”€ç”³è¯·å·²æˆåŠŸæäº¤ï¼Œè¯·ç­‰å¾…å¹³å°å®¡æ ¸ã€‚è¯·æ³¨æ„ï¼šæ­¤æ“ä½œä¸€æ—¦å®¡æ ¸é€šè¿‡å°†ä¸å¯é€†ã€‚', 'âš ');
                    setTimeout(() => {
                        hideModal();
                        showPage('account-info');
                    }, 2000);
                }, 300);
            };
            
            // æ·»åŠ å–æ¶ˆæŒ‰é’®
            const modalButtons = document.querySelector('.modal-buttons');
            if (!document.getElementById('modalCancelBtn')) {
                const cancelBtn = document.createElement('button');
                cancelBtn.id = 'modalCancelBtn';
                cancelBtn.className = 'modal-btn modal-btn-primary';
                cancelBtn.textContent = 'å–æ¶ˆ';
                cancelBtn.onclick = function() {
                    hideModal();
                    // é‡ç½®æŒ‰é’®
                    confirmBtn.textContent = 'ç¡®å®š';
                    confirmBtn.className = 'modal-btn modal-btn-primary';
                    confirmBtn.onclick = hideModal;
                    cancelBtn.remove();
                };
                modalButtons.appendChild(cancelBtn);
            }
        }

        // æäº¤è´¦æˆ·ä¿®æ”¹
        function submitAccountModification() {
            showModal('success', 'è´¦æˆ·ä¿¡æ¯ä¿®æ”¹æˆåŠŸ', 'æ‚¨çš„è´¦æˆ·ä¿¡æ¯ä¿®æ”¹ç”³è¯·å·²æˆåŠŸæäº¤ï¼Œè¯·ç­‰å¾…å¹³å°å®¡æ ¸ã€‚å®¡æ ¸é€šè¿‡åä¿®æ”¹å°†ç”Ÿæ•ˆã€‚', 'âœ“');
            setTimeout(() => {
                hideModal();
                showPage('account-info');
            }, 2000);
        }

        // æäº¤å±æ€§ä¿®æ”¹
        function submitAttributeModification() {
            showModal('success', 'è´¦æˆ·å±æ€§ä¿®æ”¹æˆåŠŸ', 'æ‚¨çš„è´¦æˆ·å±æ€§ä¿®æ”¹å·²æˆåŠŸæäº¤ï¼Œè¯·ç­‰å¾…å¹³å°å®¡æ ¸ã€‚å®¡æ ¸é€šè¿‡åä¿®æ”¹å°†ç”Ÿæ•ˆã€‚', 'âœ“');
            setTimeout(() => {
                hideModal();
                showPage('account-info');
            }, 2000);
        }

        // æäº¤è´¦æˆ·æš‚åœ
        function submitAccountSuspension() {
            showModal('warning', 'è´¦æˆ·æš‚åœç”³è¯·æäº¤æˆåŠŸ', 'æ‚¨çš„è´¦æˆ·æš‚åœç”³è¯·å·²æˆåŠŸæäº¤ï¼Œè¯·ç­‰å¾…å¹³å°å®¡æ ¸ã€‚æš‚åœæœŸé—´æ‚¨çš„è´¦æˆ·å°†æ— æ³•æ­£å¸¸ä½¿ç”¨ã€‚', 'âš ');
            setTimeout(() => {
                hideModal();
                showPage('account-info');
            }, 2000);
        }

        // å•†å“ç®¡ç†ç›¸å…³å‡½æ•°
        function toggleBundleOptions(show) {
            const bundleOptions = document.getElementById('bundleOptions');
            bundleOptions.style.display = show ? 'block' : 'none';
        }

        function searchProducts() {
            const searchInput = document.getElementById('productSearchInput').value.trim();
            if (searchInput) {
                // è·³è½¬åˆ°æœç´¢ç»“æœé¡µé¢
                showPage('product-search-results');
                // æ›´æ–°æœç´¢ç»“æœé¡µé¢çš„æœç´¢æ¡†
                document.getElementById('searchResultsInput').value = searchInput;
            } else {
                showModal('warning', 'è¯·è¾“å…¥æœç´¢å…³é”®è¯', 'è¯·åœ¨æœç´¢æ¡†ä¸­è¾“å…¥å•†å“åç§°æˆ–ç¼–å·ã€‚', 'âš ');
            }
        }

        function searchProductsFromResults() {
            const searchInput = document.getElementById('searchResultsInput').value.trim();
            if (searchInput) {
                showModal('success', 'æœç´¢å®Œæˆ', `æ­£åœ¨æœç´¢åŒ…å«"${searchInput}"çš„å•†å“...`, 'ğŸ”');
                // è¿™é‡Œå¯ä»¥æ›´æ–°æœç´¢ç»“æœ
            } else {
                showModal('warning', 'è¯·è¾“å…¥æœç´¢å…³é”®è¯', 'è¯·åœ¨æœç´¢æ¡†ä¸­è¾“å…¥å•†å“åç§°æˆ–ç¼–å·ã€‚', 'âš ');
            }
        }


        function deleteProduct(productId) {
            if (confirm(`ç¡®å®šè¦åˆ é™¤å•†å“ ${productId} å—ï¼Ÿ`)) {
                showModal('success', 'åˆ é™¤æˆåŠŸ', `å•†å“ ${productId} å·²åˆ é™¤ã€‚`, 'âœ“');
            }
        }

        function changePage(direction) {
            showModal('info', 'åˆ†é¡µåŠŸèƒ½', 'åˆ†é¡µåŠŸèƒ½æ¼”ç¤º', 'ğŸ“„');
        }

        function submitNewProduct() {
            const productName = document.getElementById('productName').value.trim();
            const productCategory = document.getElementById('productCategory').value;
            const originalPrice = document.getElementById('originalPrice').value.trim();
            const unit = document.getElementById('unit').value.trim();
            const origin = document.getElementById('origin').value.trim();
            const barcode = document.getElementById('barcode').value.trim();
            const revenueShareRatio = document.getElementById('revenueShareRatio').value.trim();
            
            if (!productName || !productCategory || !originalPrice || !unit || !origin || !barcode || !revenueShareRatio) {
                showModal('warning', 'è¯·å¡«å†™å®Œæ•´ä¿¡æ¯', 'è¯·ç¡®ä¿æ‰€æœ‰å¿…å¡«å­—æ®µéƒ½å·²å¡«å†™å®Œæ•´ã€‚', 'âš ');
                return;
            }
            
            showModal('success', 'ç”³è¯·æäº¤æˆåŠŸ', 'æ‚¨çš„æ–°å¢å•†å“ç”³è¯·å·²æˆåŠŸæäº¤ï¼Œè¯·ç­‰å¾…å¹³å°å®¡æ ¸ã€‚', 'âœ“');
            setTimeout(() => {
                hideModal();
                showPage('products');
            }, 2000);
        }

        function submitProductChange() {
            const selectedProduct = document.getElementById('changeProductSelect').value;
            if (!selectedProduct) {
                showModal('warning', 'è¯·é€‰æ‹©å•†å“', 'è¯·å…ˆé€‰æ‹©è¦å˜æ›´çš„å•†å“ã€‚', 'âš ');
                return;
            }
            
            showModal('success', 'å˜æ›´ç”³è¯·æäº¤æˆåŠŸ', 'æ‚¨çš„å•†å“å˜æ›´ç”³è¯·å·²æˆåŠŸæäº¤ï¼Œè¯·ç­‰å¾…å¹³å°å®¡æ ¸ã€‚', 'âœ“');
            setTimeout(() => {
                hideModal();
                showPage('products');
            }, 2000);
        }

        function queryProducts() {
            const productName = document.getElementById('queryProductName').value.trim();
            const barcode = document.getElementById('queryBarcode').value.trim();
            
            if (!productName && !barcode) {
                showModal('warning', 'è¯·è¾“å…¥æŸ¥è¯¢æ¡ä»¶', 'è¯·è¾“å…¥å•†å“åç§°æˆ–æ¡ç è¿›è¡ŒæŸ¥è¯¢ã€‚', 'âš ');
                return;
            }
            
            // æ¨¡æ‹ŸæŸ¥è¯¢ç»“æœ
            const queryResults = document.getElementById('queryResults');
            const queryResultsBody = document.getElementById('queryResultsBody');
            
            queryResultsBody.innerHTML = `
                <tr>
                    <td>iPhone 15 Pro</td>
                    <td>ç”µå­äº§å“</td>
                    <td>Â¥8,999</td>
                    <td>å°</td>
                    <td>ä¸­å›½</td>
                    <td>1234567890123</td>
                    <td>15%</td>
                    <td><button class="btn-edit" onclick="viewProductDetails('P001')">æŸ¥çœ‹è¯¦æƒ…</button></td>
                </tr>
            `;
            
            queryResults.style.display = 'block';
            showModal('success', 'æŸ¥è¯¢å®Œæˆ', 'æ‰¾åˆ°åŒ¹é…çš„å•†å“ä¿¡æ¯ã€‚', 'âœ“');
        }

        function viewProductDetails(productId) {
            showModal('info', 'å•†å“è¯¦æƒ…', `æ­£åœ¨æŸ¥çœ‹å•†å“ ${productId} çš„è¯¦ç»†ä¿¡æ¯...`, 'ğŸ‘ï¸');
        }

        function submitProductAttributes() {
            const selectedProduct = document.getElementById('modifyProductSelect').value;
            if (!selectedProduct) {
                showModal('warning', 'è¯·é€‰æ‹©å•†å“', 'è¯·å…ˆé€‰æ‹©è¦ä¿®æ”¹çš„å•†å“ã€‚', 'âš ');
                return;
            }
            
            showModal('success', 'å±æ€§ä¿®æ”¹æˆåŠŸ', 'å•†å“å±æ€§ä¿®æ”¹å·²æˆåŠŸæäº¤ã€‚', 'âœ“');
            setTimeout(() => {
                hideModal();
                showPage('products');
            }, 2000);
        }

        // ç»´ä¿®å·¥é¡µé¢åˆ‡æ¢ä¸å¯¼èˆª
        function showTechPage(pageId) {
            const pages = document.querySelectorAll('#techApp .page');
            pages.forEach(p => p.classList.remove('active'));
            const target = document.getElementById(pageId);
            if (target) target.classList.add('active');

            const items = document.querySelectorAll('#techApp .nav-item');
            items.forEach(i => i.classList.remove('active'));
            if (pageId === 'tech-orders') items[0].classList.add('active');
            if (pageId === 'tech-order-detail') items[1].classList.add('active');
        }

        // æœç´¢æ å¯¼èˆªï¼ˆPCï¼‰
        function techSearchNavigate() {
            const kw = (document.getElementById('techSearchInput').value || '').trim();
            if (kw.includes('è¯¦æƒ…')) {
                showTechPage('tech-order-detail');
            } else {
                // é»˜è®¤è·³è½¬åˆ°æœåŠ¡å•åˆ—è¡¨
                showTechPage('tech-orders');
            }
        }

        // ç§»åŠ¨ç«¯è§†å›¾åˆ‡æ¢
        function switchToTechMobile() {
            document.getElementById('techApp').style.display = 'none';
            document.getElementById('techMobile').style.display = 'block';
        }
        function switchToTechPC() {
            document.getElementById('techMobile').style.display = 'none';
            document.getElementById('techApp').style.display = 'flex';
        }
        function backToTechPC(){switchToTechPC();}

        // ç§»åŠ¨ç«¯æœç´¢å¯¼èˆª
        function techMobileSearchNavigate() {
            const kw = (document.getElementById('techMobileSearch').value || '').trim();
            if (kw.includes('è¯¦æƒ…')) {
                showTechMobilePage('detail');
            } else {
                showTechMobilePage('list');
            }
        }

        // æŸ¥çœ‹/æ¥æ”¶/æ‹’ç»æœåŠ¡å•
        function viewTechOrder(orderId) {
            document.getElementById('detailOrderId').value = orderId;
            showTechPage('tech-order-detail');
        }
        function viewTechOrderMobile(orderId) {
            document.getElementById('techMobileDetailId').value = orderId;
            showTechMobilePage('detail');
        }
        function acceptTechOrder(orderId) {
            showModal('success', 'æ¥æ”¶æˆåŠŸ', `æœåŠ¡å• ${orderId} æ¥æ”¶æˆåŠŸã€‚`, 'âœ“');
        }
        function rejectTechOrder(orderId) {
            // ç®€å•è¾“å…¥ç†ç”±
            const reason = prompt(`è¯·è¾“å…¥æ‹’ç»æœåŠ¡å• ${orderId} çš„ç†ç”±ï¼š`);
            if (reason && reason.trim()) {
                showModal('warning', 'å·²æ‹’ç»', `å·²æ‹’ç»æœåŠ¡å• ${orderId}ã€‚ç³»ç»Ÿå°†é€šçŸ¥å•†æˆ·é‡æ–°æ´¾å•ã€‚`, 'âš ');
            }
        }

        function showTechMobilePage(which) {
            const list = document.getElementById('techMobileList');
            const detail = document.getElementById('techMobileDetail');
            if (which === 'detail') {
                list.style.display = 'none';
                detail.style.display = 'block';
            } else {
                detail.style.display = 'none';
                list.style.display = 'block';
            }
        }

        // åˆå§‹åŒ–é¡µé¢
        document.addEventListener('DOMContentLoaded', function() {
            // é»˜è®¤æ˜¾ç¤ºç™»å½•é¡µé¢
            document.getElementById('loginPage').style.display = 'flex';
            document.getElementById('mainApp').style.display = 'none';
            document.getElementById('techApp').style.display = 'none';
            document.getElementById('techMobile').style.display = 'none';
        });

        

        /* ======================= å¹³å°ç®¡ç†å‘˜é¡µé¢ä¸äº¤äº’ ======================= */
        // å…¬å…±çš„â€œæäº¤/å®¡æ ¸â€æ¼”ç¤ºå‡½æ•°
        function adminSubmitSuccess(message, backPageId) {
            showModal('success', 'æ“ä½œæˆåŠŸ', message || 'æ“ä½œå·²å®Œæˆã€‚', 'âœ“');
            setTimeout(() => {
                hideModal();
                if (backPageId) showPage(backPageId);
            }, 1500);
        }

        function adminReview(actionDesc) {
            showModal('success', 'å®¡æ ¸å·²æäº¤', actionDesc || 'å®¡æ ¸å·²æäº¤ã€‚', 'âœ“');
        }

        // æŸ¥è¯¢é¡µé¢ï¼šç»‘å®šè¾“å…¥æ¡†çš„å›è½¦å±•ç¤ºç»“æœ
        function bindEnterToShowResults(inputId, tableBodyId) {
            const input = document.getElementById(inputId);
            if (!input) return;
            input.onkeydown = (e) => {
                if (e.key === 'Enter') {
                    const val = input.value.trim();
                    if (!val) return;
                    const tbody = document.getElementById(tableBodyId);
                    if (tbody) {
                        tbody.innerHTML = `
                            <tr>
                                <td>${val}</td>
                                <td>ç¤ºä¾‹å¯¹è±¡</td>
                                <td>æ­£å¸¸</td>
                                <td><button class="btn-edit" onclick="showModal('info','è¯¦æƒ…','æŸ¥çœ‹ ${val} çš„è¯¦æƒ…','ğŸ‘ï¸')">æŸ¥çœ‹</button></td>
                            </tr>
                        `;
                    }
                    showModal('success','æŸ¥è¯¢å®Œæˆ','å·²æ ¹æ®å…³é”®å­—å±•ç¤ºç»“æœã€‚','âœ“');
                }
            };
        }

        function updateList(elementId, items) {
            const container = document.getElementById(elementId);
            if (!container) return;
            if (!items || items.length === 0) {
                container.innerHTML = '<li>æš‚æ— æ•°æ®</li>';
                return;
            }
            container.innerHTML = items.map(item => `<li>${item}</li>`).join('');
        }

        function renderProviderQueryResults(rows) {
            const tbody = document.getElementById('adminProviderQueryBody');
            if (!tbody) return;
            if (!rows || rows.length === 0) {
                tbody.innerHTML = '<tr><td colspan="5" style="text-align:center;color:#888;">æœªæ‰¾åˆ°åŒ¹é…çš„æœåŠ¡å•†</td></tr>';
                return;
            }
            tbody.innerHTML = rows.map(r => `
                <tr data-id="${r.id}">
                    <td>${r.id}</td>
                    <td>${r.name}</td>
                    <td>${Array.isArray(r.types) ? r.types.join('ã€') : r.types}</td>
                    <td>${r.region}</td>
                    <td class="action-buttons"><button class="btn-edit" onclick="selectProviderQuery('${r.id}')">æŸ¥çœ‹è¯¦æƒ…</button></td>
                </tr>
            `).join('');
        }

        function searchProviderList() {
            const name = (document.getElementById('adminProviderQueryInput')?.value || '').trim();
            const type = document.getElementById('adminProviderTypeSelect')?.value || '';
            const region = (document.getElementById('adminProviderRegionInput')?.value || '').trim();
            const all = adminMockData.providerSearch || [];
            const q = (s) => s && s.replace(/\s+/g,'').toLowerCase();
            const nameQ = q(name), regionQ = q(region), typeQ = q(type);
            const rows = all.filter(p => {
                const okName = !nameQ || q(p.name).includes(nameQ);
                const okRegion = !regionQ || q(p.region).includes(regionQ);
                const typesText = Array.isArray(p.types) ? p.types.join('/') : (p.types || '');
                const okType = !typeQ || q(typesText).includes(typeQ);
                return okName && okType && okRegion;
            });
            renderProviderQueryResults(rows);
            if (rows.length) { selectProviderQuery(rows[0].id); }
            showModal('success','æŸ¥è¯¢å®Œæˆ','å·²æ ¹æ®æ¡ä»¶å±•ç¤ºæœåŠ¡å•†åˆ—è¡¨ã€‚','âœ“');
        }

        function selectProviderQuery(id) {
            const all = adminMockData.providerSearch || [];
            const data = all.find(p => p.id === id);
            adminSelections.providerQuery = data ? id : null;
            document.getElementById('providerQueryName').textContent = data ? data.name : '-';
            document.getElementById('providerQueryTypes').textContent = data ? (Array.isArray(data.types)? data.types.join('ã€') : data.types) : '-';
            document.getElementById('providerQueryRegion').textContent = data ? data.region : '-';
            document.getElementById('providerQueryContactName').textContent = data ? data.contactName : '-';
            document.getElementById('providerQueryContactPhone').textContent = data ? data.contactPhone : '-';
            document.getElementById('providerQueryContactAddress').textContent = data ? data.contactAddress : '-';
            document.getElementById('providerQueryIntro').textContent = data ? data.intro : '-';
            updateList('providerQueryQualifications', data ? data.qualifications : []);
            // è¡Œé€‰ä¸­æ ·å¼
            const rows = document.querySelectorAll('#adminProviderQueryBody tr');
            rows.forEach(row => row.classList.toggle('selected', row.getAttribute('data-id') === id));
        }

        function selectMerchantOpen(id) {
            const rows = document.querySelectorAll('#merchantOpenTable tbody tr');
            rows.forEach(row => row.classList.toggle('selected', row.dataset.id === id));
            const data = adminMockData.merchantOpen[id];
            adminSelections.merchantOpen = data ? id : null;
            document.getElementById('merchantOpenCurrentId').textContent = data ? data.id : 'è¯·é€‰æ‹©ç”³è¯·';
            document.getElementById('merchantOpenName').textContent = data ? data.merchantName : '-';
            document.getElementById('merchantOpenContact').textContent = data ? data.contact : '-';
            document.getElementById('merchantOpenPhone').textContent = data ? data.phone : '-';
            document.getElementById('merchantOpenScope').textContent = data ? data.scope : '-';
            document.getElementById('merchantOpenRegion').textContent = data ? data.region : '-';
            document.getElementById('merchantOpenAddress').textContent = data ? data.address : '-';
            document.getElementById('merchantOpenShare').textContent = data ? data.share : '-';
            document.getElementById('merchantOpenLicense').textContent = data ? data.licenseNo : '-';
            document.getElementById('merchantOpenLicenseValid').textContent = data ? data.licenseValid : '-';
            document.getElementById('merchantOpenBank').textContent = data ? data.bank : '-';
            document.getElementById('merchantOpenSubmit').textContent = data ? data.submitTime : '-';
            document.getElementById('merchantOpenRemark').textContent = data ? data.remark : '-';
            updateList('merchantOpenAttachments', data ? data.attachments : []);
        }

        function selectMerchantChange(id) {
            const rows = document.querySelectorAll('#merchantChangeTable tbody tr');
            rows.forEach(row => row.classList.toggle('selected', row.dataset.id === id));
            const data = adminMockData.merchantChange[id];
            adminSelections.merchantChange = data ? id : null;
            document.getElementById('merchantChangeCurrentId').textContent = data ? data.id : 'è¯·é€‰æ‹©å˜æ›´ç”³è¯·';
            document.getElementById('merchantChangeName').textContent = data ? data.merchantName : '-';
            document.getElementById('merchantChangeContact').textContent = data ? data.contact : '-';
            document.getElementById('merchantChangePhone').textContent = data ? data.phone : '-';
            document.getElementById('merchantChangeSubmit').textContent = data ? data.submitTime : '-';
            document.getElementById('merchantChangeAttachments').textContent = data && data.attachments ? data.attachments.join('ï¼Œ') : '-';
            const diffList = data && data.diffs ? data.diffs.map(item => `${item.field}ï¼š${item.oldValue} â†’ ${item.newValue}`) : [];
            updateList('merchantChangeDiff', diffList);
        }

        function selectProductNew(id) {
            const rows = document.querySelectorAll('#productNewTable tbody tr');
            rows.forEach(row => row.classList.toggle('selected', row.dataset.id === id));
            const data = adminMockData.productNew[id];
            adminSelections.productNew = data ? id : null;
            document.getElementById('productNewCurrentId').textContent = data ? data.id : 'è¯·é€‰æ‹©å•†å“';
            document.getElementById('productNewName').textContent = data ? data.name : '-';
            document.getElementById('productNewShop').textContent = data ? data.shop : '-';
            document.getElementById('productNewCategory').textContent = data ? data.category : '-';
            document.getElementById('productNewOriginal').textContent = data ? data.originalPrice : '-';
            document.getElementById('productNewPrice').textContent = data ? data.salePrice : '-';
            document.getElementById('productNewUnit').textContent = data ? data.unit : '-';
            document.getElementById('productNewOrigin').textContent = data ? data.origin : '-';
            document.getElementById('productNewBarcode').textContent = data ? data.barcode : '-';
            document.getElementById('productNewShare').textContent = data ? data.share : '-';
            document.getElementById('productNewShareCategory').textContent = data ? data.shareCategory : '-';
            document.getElementById('productNewSubmit').textContent = data ? data.submitTime : '-';
            document.getElementById('productNewRemark').textContent = data ? data.remark : '-';
            updateList('productNewAttachments', data ? data.attachments : []);
        }

        function selectProductChange(id) {
            const rows = document.querySelectorAll('#productChangeTable tbody tr');
            rows.forEach(row => row.classList.toggle('selected', row.dataset.id === id));
            const data = adminMockData.productChange[id];
            adminSelections.productChange = data ? id : null;
            document.getElementById('productChangeCurrentId').textContent = data ? data.id : 'è¯·é€‰æ‹©å˜æ›´é¡¹';
            document.getElementById('productChangeName').textContent = data ? data.name : '-';
            document.getElementById('productChangeShop').textContent = data ? data.shop : '-';
            document.getElementById('productChangeCategory').textContent = data ? data.category : '-';
            document.getElementById('productChangePrice').textContent = data ? data.price : '-';
            document.getElementById('productChangeShare').textContent = data ? data.share : '-';
            document.getElementById('productChangeSubmit').textContent = data ? data.submitTime : '-';
            updateList('productChangeAttachments', data ? data.attachments : []);
            const diffList = data && data.diffs ? data.diffs.map(item => `${item.field}ï¼š${item.oldValue} â†’ ${item.newValue}`) : [];
            updateList('productChangeDiff', diffList);
        }

        function selectProviderOpen(id) {
            const rows = document.querySelectorAll('#providerOpenTable tbody tr');
            rows.forEach(row => row.classList.toggle('selected', row.dataset.id === id));
            const data = adminMockData.providerOpen[id];
            adminSelections.providerOpen = data ? id : null;
            document.getElementById('providerOpenCurrentId').textContent = data ? data.id : 'è¯·é€‰æ‹©ç”³è¯·';
            document.getElementById('providerOpenName').textContent = data ? data.providerName : '-';
            document.getElementById('providerOpenContact').textContent = data ? data.contact : '-';
            document.getElementById('providerOpenPhone').textContent = data ? data.phone : '-';
            document.getElementById('providerOpenScope').textContent = data ? data.scope : '-';
            document.getElementById('providerOpenRegion').textContent = data ? data.region : '-';
            document.getElementById('providerOpenAddress').textContent = data ? data.address : '-';
            document.getElementById('providerOpenLicense').textContent = data ? data.licenseNo : '-';
            document.getElementById('providerOpenLicenseValid').textContent = data ? data.licenseValid : '-';
            document.getElementById('providerOpenBank').textContent = data ? data.bank : '-';
            document.getElementById('providerOpenSubmit').textContent = data ? data.submitTime : '-';
            document.getElementById('providerOpenRemark').textContent = data ? data.remark : '-';
            updateList('providerOpenAttachments', data ? data.attachments : []);
        }

        function selectProviderChange(id) {
            const rows = document.querySelectorAll('#providerChangeTable tbody tr');
            rows.forEach(row => row.classList.toggle('selected', row.dataset.id === id));
            const data = adminMockData.providerChange[id];
            adminSelections.providerChange = data ? id : null;
            document.getElementById('providerChangeCurrentId').textContent = data ? data.id : 'è¯·é€‰æ‹©å˜æ›´ç”³è¯·';
            document.getElementById('providerChangeName').textContent = data ? data.providerName : '-';
            document.getElementById('providerChangeContact').textContent = data ? data.contact : '-';
            document.getElementById('providerChangePhone').textContent = data ? data.phone : '-';
            document.getElementById('providerChangeSubmit').textContent = data ? data.submitTime : '-';
            document.getElementById('providerChangeAttachments').textContent = data && data.attachments ? data.attachments.join('ï¼Œ') : '-';
            const diffList = data && data.diffs ? data.diffs.map(item => `${item.field}ï¼š${item.oldValue} â†’ ${item.newValue}`) : [];
            updateList('providerChangeDiff', diffList);
        }

        function selectActivityApprove(id) {
            const rows = document.querySelectorAll('#activityApproveTable tbody tr');
            rows.forEach(row => row.classList.toggle('selected', row.dataset.id === id));
            const data = adminMockData.activityApprove[id];
            adminSelections.activityReview = data ? id : null;
            document.getElementById('activityCurrentId').textContent = data ? data.id : 'è¯·é€‰æ‹©æ´»åŠ¨';
            document.getElementById('activityName').textContent = data ? data.name : '-';
            document.getElementById('activitySponsor').textContent = data ? data.sponsor : '-';
            document.getElementById('activityStart').textContent = data ? data.startTime : '-';
            document.getElementById('activityEnd').textContent = data ? data.endTime : '-';
            document.getElementById('activityScope').textContent = data ? data.scope : '-';
            document.getElementById('activitySubmit').textContent = data ? data.submitTime : '-';
            document.getElementById('activityRemark').textContent = data ? data.remark : '-';
            updateList('activityAttachments', data ? data.attachments : []);
        }

        function ensureSelectionDefaults(pageId) {
            if (pageId === 'admin-merchant-approve-open' && !adminSelections.merchantOpen) {
                const first = Object.keys(adminMockData.merchantOpen)[0];
                if (first) selectMerchantOpen(first);
            }
            if (pageId === 'admin-merchant-approve-change' && !adminSelections.merchantChange) {
                const first = Object.keys(adminMockData.merchantChange)[0];
                if (first) selectMerchantChange(first);
            }
            if (pageId === 'admin-product-approve-new' && !adminSelections.productNew) {
                const first = Object.keys(adminMockData.productNew)[0];
                if (first) selectProductNew(first);
            }
            if (pageId === 'admin-product-approve-change' && !adminSelections.productChange) {
                const first = Object.keys(adminMockData.productChange)[0];
                if (first) selectProductChange(first);
            }
            if (pageId === 'admin-provider-approve-open' && !adminSelections.providerOpen) {
                const first = Object.keys(adminMockData.providerOpen)[0];
                if (first) selectProviderOpen(first);
            }
            if (pageId === 'admin-provider-approve-change' && !adminSelections.providerChange) {
                const first = Object.keys(adminMockData.providerChange)[0];
                if (first) selectProviderChange(first);
            }
            if (pageId === 'admin-activity-approve' && !adminSelections.activityReview) {
                const first = Object.keys(adminMockData.activityApprove)[0];
                if (first) selectActivityApprove(first);
            }
        }

        function submitAdminOutcome(context, entityId, action, reason, backPageId) {
            if (!entityId) {
                showModal('warning', 'è¯·å…ˆé€‰æ‹©å¯¹è±¡', 'è¯·ä»åˆ—è¡¨ä¸­é€‰æ‹©ä¸€æ¡è®°å½•åå†æäº¤æ“ä½œã€‚', 'âš ');
                return;
            }
            const actionText = action === 'approved' ? 'å®¡æ ¸é€šè¿‡' : 'å®¡æ ¸æœªé€šè¿‡';
            const type = action === 'approved' ? 'success' : 'warning';
            let message = `${context} ${entityId} ${actionText}`;
            if (reason) {
                message += `ã€‚åŸå› ï¼š${reason}`;
            }
            showModal(type, 'æ“ä½œå·²æäº¤', message, action === 'approved' ? 'âœ“' : 'âš ');
            setTimeout(() => {
                hideModal();
                if (backPageId) {
                    showPage(backPageId);
                }
            }, 1500);
        }

        function submitMerchantOpenDecision(action) {
            const reasonField = document.getElementById('merchantOpenRejectReason');
            const reason = reasonField ? reasonField.value.trim() : '';
            if (action === 'rejected' && !reason) {
                showModal('warning', 'è¯·å¡«å†™é©³å›åŸå› ', 'é©³å›å•†æˆ·å¼€æˆ·ç”³è¯·æ—¶å¿…é¡»è¯´æ˜åŸå› ã€‚', 'âš ');
                return;
            }
            submitAdminOutcome('å•†æˆ·å¼€æˆ·ç”³è¯·', adminSelections.merchantOpen, action, reason, 'admin-merchants');
            if (reasonField && action === 'approved') {
                reasonField.value = '';
            }
        }

        function submitMerchantChangeDecision(action) {
            const reasonField = document.getElementById('merchantChangeRejectReason');
            const reason = reasonField ? reasonField.value.trim() : '';
            if (action === 'rejected' && !reason) {
                showModal('warning', 'è¯·å¡«å†™é©³å›åŸå› ', 'é©³å›å•†æˆ·å˜æ›´ç”³è¯·æ—¶å¿…é¡»è¯´æ˜åŸå› ã€‚', 'âš ');
                return;
            }
            submitAdminOutcome('å•†æˆ·å˜æ›´ç”³è¯·', adminSelections.merchantChange, action, reason, 'admin-merchants');
            if (reasonField && action === 'approved') {
                reasonField.value = '';
            }
        }

        function submitProductNewDecision(action) {
            const reasonField = document.getElementById('productNewRejectReason');
            const reason = reasonField ? reasonField.value.trim() : '';
            if (action === 'rejected' && !reason) {
                showModal('warning', 'è¯·å¡«å†™é©³å›åŸå› ', 'é©³å›æ–°å¢å•†å“ç”³è¯·æ—¶å¿…é¡»è¯´æ˜åŸå› ã€‚', 'âš ');
                return;
            }
            submitAdminOutcome('æ–°å¢å•†å“ç”³è¯·', adminSelections.productNew, action, reason, 'admin-products');
            if (reasonField && action === 'approved') {
                reasonField.value = '';
            }
        }

        function submitProductChangeDecision(action) {
            const reasonField = document.getElementById('productChangeRejectReason');
            const reason = reasonField ? reasonField.value.trim() : '';
            if (action === 'rejected' && !reason) {
                showModal('warning', 'è¯·å¡«å†™é©³å›åŸå› ', 'é©³å›å•†å“å˜æ›´ç”³è¯·æ—¶å¿…é¡»è¯´æ˜åŸå› ã€‚', 'âš ');
                return;
            }
            submitAdminOutcome('å•†å“å˜æ›´ç”³è¯·', adminSelections.productChange, action, reason, 'admin-products');
            if (reasonField && action === 'approved') {
                reasonField.value = '';
            }
        }

        function submitProviderOpenDecision(action) {
            const reasonField = document.getElementById('providerOpenRejectReason');
            const reason = reasonField ? reasonField.value.trim() : '';
            if (action === 'rejected' && !reason) {
                showModal('warning', 'è¯·å¡«å†™é©³å›åŸå› ', 'é©³å›æ—¶å¿…é¡»å¡«å†™åŸå› ã€‚', 'âš ');
                return;
            }
            submitAdminOutcome('æœåŠ¡å•†å¼€æˆ·ç”³è¯·', adminSelections.providerOpen, action, reason, 'admin-providers');
            if (reasonField && action === 'approved') reasonField.value = '';
        }

        function submitProviderChangeDecision(action) {
            const reasonField = document.getElementById('providerChangeRejectReason');
            const reason = reasonField ? reasonField.value.trim() : '';
            if (action === 'rejected' && !reason) {
                showModal('warning', 'è¯·å¡«å†™é©³å›åŸå› ', 'é©³å›æ—¶å¿…é¡»å¡«å†™åŸå› ã€‚', 'âš ');
                return;
            }
            submitAdminOutcome('æœåŠ¡å•†å˜æ›´ç”³è¯·', adminSelections.providerChange, action, reason, 'admin-providers');
            if (reasonField && action === 'approved') reasonField.value = '';
        }

        function submitActivityDecision(action) {
            const reasonField = document.getElementById('activityRejectReason');
            const reason = reasonField ? reasonField.value.trim() : '';
            if (action === 'rejected' && !reason) {
                showModal('warning', 'è¯·å¡«å†™é©³å›åŸå› ', 'é©³å›æ—¶å¿…é¡»å¡«å†™åŸå› ã€‚', 'âš ');
                return;
            }
            submitAdminOutcome('æ´»åŠ¨å®¡æ ¸', adminSelections.activityReview, action, reason, 'admin-activities');
            if (reasonField && action === 'approved') reasonField.value = '';
        }

        function renderMerchantResults(rows, containerId, actionType) {
            const tbody = document.querySelector(`#${containerId} tbody`);
            if (!tbody) return;
            if (!rows || rows.length === 0) {
                tbody.innerHTML = `<tr><td colspan="7" style="text-align:center; color:#777;">æœªæ£€ç´¢åˆ°ç¬¦åˆæ¡ä»¶çš„å•†æˆ·</td></tr>`;
                return;
            }
            tbody.innerHTML = rows.map(row => `
                <tr>
                    <td>${row.name}</td>
                    <td>${row.contact}</td>
                    <td>${row.phone}</td>
                    <td>${row.region}</td>
                    <td>${row.address}</td>
                    <td>${row.status}</td>
                    <td class="action-buttons">
                        <button class="btn-${actionType === 'suspend' ? 'warning' : 'primary'}" onclick="handleMerchantStatus('${actionType}','${row.id}','${row.name}')">${actionType === 'suspend' ? 'æš‚åœå•†æˆ·' : 'æ¢å¤è¥ä¸š'}</button>
                    </td>
                </tr>
            `).join('');
        }

        function searchMerchantList(type) {
            const dataset = adminMockData.merchantSearch[type] || [];
            if (type === 'suspend') {
                renderMerchantResults(dataset, 'merchantSuspendResult', 'suspend');
            } else {
                renderMerchantResults(dataset, 'merchantResumeResult', 'resume');
            }
            showModal('success', 'æ£€ç´¢å®Œæˆ', 'å·²æ ¹æ®æŸ¥è¯¢æ¡ä»¶å±•ç¤ºå•†æˆ·åˆ—è¡¨ï¼Œå¯ç»§ç»­æ‰§è¡Œæ“ä½œã€‚', 'âœ“');
        }

        function handleMerchantStatus(action, merchantId, merchantName) {
            const context = action === 'suspend' ? 'æš‚åœå•†æˆ·' : 'æ¢å¤å•†æˆ·';
            const message = action === 'suspend'
                ? `å·²å¯¹å•†æˆ· ${merchantName} (${merchantId}) æš‚åœè¥ä¸šã€‚è¯¥å•†æˆ·æ‰€æœ‰å•†å“å°†åœæ­¢é”€å”®ï¼Œå”®åæµç¨‹ä¿æŒæ­£å¸¸ã€‚`
                : `å·²æ¢å¤å•†æˆ· ${merchantName} (${merchantId}) çš„è¥ä¸šæƒé™ï¼Œæ‰€æœ‰å•†å“åŒæ­¥æ¢å¤é”€å”®ã€‚`;
            const type = action === 'suspend' ? 'warning' : 'success';
            showModal(type, context, message, action === 'suspend' ? 'âš ' : 'âœ“');
        }

        /* ======================= å•†å“åˆ†ç±»ï¼ˆä¿®æ”¹ï¼‰ ======================= */
        const categoryState = { l1: null, l2: null };

        function renderCategoryL1() {
            const tbody = document.getElementById('categoryL1Body');
            if (!tbody) return;
            const level1 = (adminMockData.productCategories && adminMockData.productCategories.level1) || [];
            if (!level1.length) {
                tbody.innerHTML = '<tr><td colspan="4" style="text-align:center;color:#888;">æš‚æ— ä¸€çº§åˆ†ç±»</td></tr>';
                return;
            }
            tbody.innerHTML = level1.map(c => `
                <tr data-id="${c.id}">
                    <td>${c.id}</td>
                    <td>${c.name}</td>
                    <td>${c.share}</td>
                    <td class="action-buttons"><button class="btn btn-edit" onclick="selectCategoryL1('${c.id}')">é€‰æ‹©</button></td>
                </tr>
            `).join('');
            // ä¿æŒä¹‹å‰é€‰æ‹©
            if (categoryState.l1) selectCategoryL1(categoryState.l1);
        }

        function selectCategoryL1(id) {
            const level1 = adminMockData.productCategories.level1 || [];
            const c = level1.find(x => x.id === id);
            categoryState.l1 = c ? c.id : null;
            document.getElementById('catL1Id').value = c ? c.id : '';
            document.getElementById('catL1NameInput').value = c ? c.name : '';
            document.getElementById('catL1ShareInput').value = c ? c.share : '';
            // é«˜äº®
            const rows = document.querySelectorAll('#categoryL1Body tr');
            rows.forEach(r => r.classList.toggle('selected', r.getAttribute('data-id') === id));
            // æ¸²æŸ“äºŒçº§
            renderCategoryL2(c ? c.children || [] : []);
        }

        function validateDuplicateName(names, newName, currentId, siblings) {
            const target = (newName || '').trim();
            if (!target) return false;
            // åœ¨å…„å¼ŸèŠ‚ç‚¹ä¸­æŸ¥é‡ï¼ˆå¿½ç•¥å½“å‰é¡¹ï¼‰
            return siblings.some(s => s.name === target && s.id !== currentId);
        }

        function saveCategoryL1() {
            const level1 = adminMockData.productCategories.level1 || [];
            const id = document.getElementById('catL1Id').value;
            if (!id) { showModal('warning','è¯·é€‰æ‹©åˆ†ç±»','è¯·å…ˆåœ¨ä¸Šæ–¹åˆ—è¡¨é€‰æ‹©ä¸€ä¸ªä¸€çº§åˆ†ç±»ã€‚','âš '); return; }
            const name = document.getElementById('catL1NameInput').value.trim();
            const shareStr = document.getElementById('catL1ShareInput').value.trim();
            const share = Number(shareStr);
            if (!name || shareStr === '' || isNaN(share) || share < 0 || share > 100) {
                showModal('warning','å‚æ•°ä¸åˆæ³•','è¯·å¡«å†™åç§°ï¼Œä¸”åˆ†è´¦æ¯”ä¾‹ä¸º 0-100 çš„æ•°å­—ã€‚','âš ');
                return;
            }
            if (validateDuplicateName(level1.map(x=>x.name), name, id, level1)) {
                showModal('warning','åç§°åœ¨åŒä¸€çº§é‡å¤','è¯·æ›´æ¢ä¸ºè¯¥çº§åˆ«ä¸­æœªä½¿ç”¨çš„åç§°ã€‚','âš ');
                return;
            }
            const idx = level1.findIndex(x => x.id === id);
            if (idx >= 0) {
                level1[idx].name = name;
                level1[idx].share = share;
                showModal('success','ä¿®æ”¹æˆåŠŸ','ä¸€çº§åˆ†ç±»å·²ä¿®æ”¹ã€‚','âœ“');
                renderCategoryL1();
            }
        }

        function renderCategoryL2(children) {
            const tbody = document.getElementById('categoryL2Body');
            if (!tbody) return;
            if (!children || !children.length) {
                tbody.innerHTML = '<tr><td colspan="4" style="text-align:center;color:#888;">è¯¥ä¸€çº§åˆ†ç±»æš‚æ— äºŒçº§åˆ†ç±»</td></tr>';
                document.getElementById('catL2Id').value='';
                document.getElementById('catL2Parent').value='';
                document.getElementById('catL2NameInput').value='';
                document.getElementById('catL2ShareInput').value='';
                categoryState.l2 = null;
                return;
            }
            tbody.innerHTML = children.map(c => `
                <tr data-id="${c.id}">
                    <td>${c.id}</td>
                    <td>${c.name}</td>
                    <td>${c.share}</td>
                    <td class="action-buttons"><button class="btn btn-edit" onclick="selectCategoryL2('${c.id}')">é€‰æ‹©</button></td>
                </tr>
            `).join('');
            if (categoryState.l2) selectCategoryL2(categoryState.l2);
        }

        function selectCategoryL2(id) {
            const level1 = adminMockData.productCategories.level1 || [];
            const l1 = level1.find(x => x.id === categoryState.l1);
            const c = l1 && l1.children ? l1.children.find(y => y.id === id) : null;
            categoryState.l2 = c ? c.id : null;
            document.getElementById('catL2Id').value = c ? c.id : '';
            document.getElementById('catL2Parent').value = l1 ? `${l1.id} / ${l1.name}` : '';
            document.getElementById('catL2NameInput').value = c ? c.name : '';
            document.getElementById('catL2ShareInput').value = c ? c.share : '';
            const rows = document.querySelectorAll('#categoryL2Body tr');
            rows.forEach(r => r.classList.toggle('selected', r.getAttribute('data-id') === id));
        }

        function saveCategoryL2() {
            const level1 = adminMockData.productCategories.level1 || [];
            const l1 = level1.find(x => x.id === categoryState.l1);
            if (!l1) { showModal('warning','è¯·é€‰æ‹©ä¸€çº§åˆ†ç±»','è¯·å…ˆåœ¨ä¸Šæ–¹é€‰æ‹©ä¸€ä¸ªä¸€çº§åˆ†ç±»ã€‚','âš '); return; }
            const id = document.getElementById('catL2Id').value;
            if (!id) { showModal('warning','è¯·é€‰æ‹©äºŒçº§åˆ†ç±»','è¯·åœ¨åˆ—è¡¨ä¸­é€‰æ‹©ä¸€ä¸ªäºŒçº§åˆ†ç±»ã€‚','âš '); return; }
            const name = document.getElementById('catL2NameInput').value.trim();
            const shareStr = document.getElementById('catL2ShareInput').value.trim();
            const share = Number(shareStr);
            if (!name || shareStr === '' || isNaN(share) || share < 0 || share > 100) {
                showModal('warning','å‚æ•°ä¸åˆæ³•','è¯·å¡«å†™åç§°ï¼Œä¸”åˆ†è´¦æ¯”ä¾‹ä¸º 0-100 çš„æ•°å­—ã€‚','âš ');
                return;
            }
            const siblings = l1.children || [];
            if (validateDuplicateName(siblings.map(x=>x.name), name, id, siblings)) {
                showModal('warning','åç§°åœ¨åŒä¸€çº§é‡å¤','è¯·æ›´æ¢ä¸ºè¯¥çº§åˆ«ä¸­æœªä½¿ç”¨çš„åç§°ã€‚','âš ');
                return;
            }
            const idx = siblings.findIndex(x => x.id === id);
            if (idx >= 0) {
                siblings[idx].name = name;
                siblings[idx].share = share;
                showModal('success','ä¿®æ”¹æˆåŠŸ','äºŒçº§åˆ†ç±»å·²ä¿®æ”¹ã€‚','âœ“');
                renderCategoryL2(l1.children);
            }
        }

        /* ======================= æŸ¥è¯¢å•†å“ï¼ˆç®¡ç†å‘˜ï¼‰ ======================= */
        function renderAdminProductResults(rows) {
            const tbody = document.getElementById('adminProductQueryBody');
            if (!tbody) return;
            if (!rows || !rows.length) {
                tbody.innerHTML = '<tr><td colspan="7" style="text-align:center;color:#888;">æœªæ‰¾åˆ°åŒ¹é…çš„å•†å“</td></tr>';
                return;
            }
            tbody.innerHTML = rows.map(p => `
                <tr data-id="${p.id}">
                    <td>${p.name}</td>
                    <td>${p.shopName}</td>
                    <td>${p.category}</td>
                    <td>${p.originalPrice.toFixed ? p.originalPrice.toFixed(2) : p.originalPrice}</td>
                    <td>${p.auditNew || '-'}</td>
                    <td>${p.auditChange || '-'}</td>
                    <td class="action-buttons"><button class="btn-edit" onclick="selectAdminProduct('${p.id}')">æŸ¥çœ‹</button></td>
                </tr>
            `).join('');
        }

        function searchAdminProducts() {
            const name = (document.getElementById('adminProductNameInput')?.value || '').trim().toLowerCase();
            const shop = (document.getElementById('adminProductShopInput')?.value || '').trim().toLowerCase();
            const cat = (document.getElementById('adminProductCategoryInput')?.value || '').trim().toLowerCase();
            const all = adminMockData.productSearch || [];
            const rows = all.filter(p => {
                const okName = !name || p.name.toLowerCase().includes(name);
                const okShop = !shop || (p.shopName||'').toLowerCase().includes(shop);
                const okCat = !cat || (p.category||'').toLowerCase().includes(cat);
                return okName && okShop && okCat;
            });
            renderAdminProductResults(rows);
            if (rows.length) selectAdminProduct(rows[0].id);
            showModal('success','æŸ¥è¯¢å®Œæˆ','å·²æ˜¾ç¤ºç¬¦åˆæ¡ä»¶çš„å•†å“ä¿¡æ¯ã€‚','âœ“');
        }

        function selectAdminProduct(id) {
            const all = adminMockData.productSearch || [];
            const p = all.find(x => x.id === id);
            document.getElementById('adminProdDetailName').textContent = p ? p.name : '-';
            document.getElementById('adminProdDetailShop').textContent = p ? p.shopName : '-';
            document.getElementById('adminProdDetailCategory').textContent = p ? p.category : '-';
            document.getElementById('adminProdDetailOriginal').textContent = p ? (p.originalPrice.toFixed ? 'Â¥'+p.originalPrice.toFixed(2) : p.originalPrice) : '-';
            document.getElementById('adminProdDetailAuditNew').textContent = p ? (p.auditNew || '-') : '-';
            document.getElementById('adminProdDetailAuditChange').textContent = p ? (p.auditChange || '-') : '-';
            // é«˜äº®
            const rows = document.querySelectorAll('#adminProductQueryBody tr');
            rows.forEach(r => r.classList.toggle('selected', r.getAttribute('data-id') === id));
        }

        /* ======================= æ´»åŠ¨æŸ¥è¯¢ï¼ˆç®¡ç†å‘˜ï¼‰ ======================= */
        function renderAdminActivityResults(rows) {
            const tbody = document.getElementById('adminActivityQueryBody');
            if (!tbody) return;
            if (!rows || !rows.length) {
                tbody.innerHTML = '<tr><td colspan="8" style="text-align:center;color:#888;">æ²¡æœ‰ç¬¦åˆæ¡ä»¶çš„æ´»åŠ¨</td></tr>';
                return;
            }
            tbody.innerHTML = rows.map(a => `
                <tr data-id="${a.id}">
                    <td>${a.id}</td>
                    <td>${a.name}</td>
                    <td>${a.merchantName}</td>
                    <td>${a.startTime} ~ ${a.endTime}</td>
                    <td>${a.status}</td>
                    <td>${a.audits?.new || '-'}</td>
                    <td>${a.audits?.change || '-'}</td>
                    <td class="action-buttons"><button class="btn-edit" onclick="selectAdminActivity('${a.id}')">æŸ¥çœ‹</button></td>
                </tr>
            `).join('');
        }

        function searchAdminActivities() {
            const get = (id)=> (document.getElementById(id)?.value || '').trim().toLowerCase();
            const name = get('activityNameInput');
            const merchant = get('activityMerchantInput');
            const product = get('activityProductInput');
            const status = get('activityStatusSelect');
            const startStr = (document.getElementById('activityStartInput')?.value || '').trim();
            const endStr = (document.getElementById('activityEndInput')?.value || '').trim();
            const start = startStr ? new Date(startStr) : null;
            const end = endStr ? new Date(endStr) : null;
            const all = adminMockData.activities || [];
            const toDate = (s)=> new Date(s.replace(/\-/g,'/'));
            const rows = all.filter(a => {
                const okName = !name || a.name.toLowerCase().includes(name);
                const okMerchant = !merchant || a.merchantName.toLowerCase().includes(merchant);
                const okStatus = !status || a.status.toLowerCase().includes(status);
                const okProd = !product || (a.productNames||[]).join(',').toLowerCase().includes(product);
                const actStart = toDate(a.startTime);
                const actEnd = toDate(a.endTime);
                const okStart = !start || actEnd >= start;
                const okEnd = !end || actStart <= end;
                return okName && okMerchant && okStatus && okProd && okStart && okEnd;
            });
            renderAdminActivityResults(rows);
            if (rows.length) selectAdminActivity(rows[0].id); else showModal('info','æ— åŒ¹é…ç»“æœ','ç³»ç»Ÿæ˜¾ç¤ºæ²¡æœ‰ç¬¦åˆæ¡ä»¶çš„æ´»åŠ¨ï¼Œè¯·è°ƒæ•´ç­›é€‰æ¡ä»¶ã€‚','â„¹');
        }

        function selectAdminActivity(id) {
            const all = adminMockData.activities || [];
            const a = all.find(x => x.id === id);
            document.getElementById('actDetailName').textContent = a ? a.name : '-';
            document.getElementById('actDetailMerchant').textContent = a ? a.merchantName : '-';
            document.getElementById('actDetailTime').textContent = a ? `${a.startTime} ~ ${a.endTime}` : '-';
            document.getElementById('actDetailStatus').textContent = a ? a.status : '-';
            document.getElementById('actDetailRules').textContent = a ? a.rules : '-';
            updateList('actDetailProducts', a ? a.productNames : []);
            const rows = document.querySelectorAll('#adminActivityQueryBody tr');
            rows.forEach(r => r.classList.toggle('selected', r.getAttribute('data-id') === id));
        }

        /* ======================= é¡¾å®¢ç®¡ç†ï¼ˆå°ç¦/è§£ç¦/æŸ¥è¯¢/æ³¨é”€ï¼‰ ======================= */
        function renderCustomerRows(rows, tbodyId, action) {
            const tbody = document.getElementById(tbodyId);
            if (!tbody) return;
            if (!rows || !rows.length) {
                tbody.innerHTML = `<tr><td colspan="5" style="text-align:center;color:#888;">æš‚æ— æ•°æ®</td></tr>`;
                return;
            }
            tbody.innerHTML = rows.map(u => `
                <tr data-id="${u.id}">
                    <td>${u.username}</td>
                    <td>${u.name}</td>
                    <td>${u.phone}</td>
                    <td>${u.status}</td>
                    <td class="action-buttons">${action==='ban' ? `<button class="btn btn-warning" onclick="banCustomer('${u.id}')">å°ç¦</button>` : action==='unban' ? `<button class=\"btn btn-primary\" onclick=\"unbanCustomer('${u.id}')\">è§£ç¦</button>` : action==='deact' ? `<button class=\"btn btn-secondary\" onclick=\"deactivateCustomer('${u.id}')\">æ³¨é”€</button>` : `<button class=\"btn-edit\" onclick=\"selectCustomer('${u.id}')\">æŸ¥çœ‹</button>`}</td>
                </tr>
            `).join('');
        }

        function searchCustomersBan() {
            const name = (document.getElementById('banFilterName')?.value || '').trim().toLowerCase();
            const phone = (document.getElementById('banFilterPhone')?.value || '').trim();
            const all = adminMockData.customers || [];
            const rows = all.filter(u => u.status === 'æ­£å¸¸' && (!name || `${u.username}${u.name}`.toLowerCase().includes(name)) && (!phone || (u.phone||'').includes(phone)));
            renderCustomerRows(rows, 'banCustomerBody', 'ban');
            showModal('success','æŸ¥è¯¢å®Œæˆ','å·²å±•ç¤ºç¬¦åˆæ¡ä»¶çš„æ­£å¸¸ç”¨æˆ·ã€‚','âœ“');
        }

        function banCustomer(id) {
            const all = adminMockData.customers || [];
            const u = all.find(x => x.id === id);
            if (!u) return;
            u.status = 'å·²å°ç¦';
            showModal('warning','å°ç¦æˆåŠŸ',`ç”¨æˆ· ${u.username} (${u.name}) å·²è¢«å°ç¦ã€‚`, 'âš ');
            searchCustomersBan();
        }

        function searchCustomersUnban() {
            const name = (document.getElementById('unbanFilterName')?.value || '').trim().toLowerCase();
            const all = adminMockData.customers || [];
            const rows = all.filter(u => u.status === 'å·²å°ç¦' && (!name || `${u.username}${u.name}`.toLowerCase().includes(name)));
            renderCustomerRows(rows, 'unbanCustomerBody', 'unban');
            showModal('success','æŸ¥è¯¢å®Œæˆ','å·²å±•ç¤ºè¢«å°ç¦çš„é¡¾å®¢ã€‚','âœ“');
        }

        function unbanCustomer(id) {
            const all = adminMockData.customers || [];
            const u = all.find(x => x.id === id);
            if (!u) return;
            u.status = 'æ­£å¸¸';
            showModal('success','è§£ç¦æˆåŠŸ',`ç”¨æˆ· ${u.username} (${u.name}) å·²æ¢å¤æ­£å¸¸çŠ¶æ€ã€‚`, 'âœ“');
            searchCustomersUnban();
        }

        function searchCustomersQuery() {
            const phone = (document.getElementById('custQueryPhone')?.value || '').trim();
            const username = (document.getElementById('custQueryUsername')?.value || '').trim().toLowerCase();
            const name = (document.getElementById('custQueryName')?.value || '').trim().toLowerCase();
            const status = (document.getElementById('custQueryStatus')?.value || '').trim();
            const all = adminMockData.customers || [];
            const rows = all.filter(u => {
                const okPhone = !phone || (u.phone||'').includes(phone);
                const okUser = !username || (u.username||'').toLowerCase().includes(username);
                const okName = !name || (u.name||'').toLowerCase().includes(name);
                const okStatus = !status || u.status === status;
                return okPhone && okUser && okName && okStatus;
            });
            renderCustomerRows(rows, 'adminCustomerQueryBody', 'view');
            if (rows.length) selectCustomer(rows[0].id);
            showModal('success','æŸ¥è¯¢å®Œæˆ','å·²å±•ç¤ºç¬¦åˆæ¡ä»¶çš„é¡¾å®¢ã€‚','âœ“');
        }

        function selectCustomer(id) {
            const all = adminMockData.customers || [];
            const u = all.find(x => x.id === id);
            document.getElementById('custDetailUsername').textContent = u ? u.username : '-';
            document.getElementById('custDetailName').textContent = u ? u.name : '-';
            document.getElementById('custDetailPhone').textContent = u ? u.phone : '-';
            document.getElementById('custDetailStatus').textContent = u ? u.status : '-';
            const rows = document.querySelectorAll('#adminCustomerQueryBody tr');
            rows.forEach(r => r.classList.toggle('selected', r.getAttribute('data-id') === id));
        }

        function searchCustomersDeactivate() {
            const name = (document.getElementById('deactFilterName')?.value || '').trim().toLowerCase();
            const all = adminMockData.customers || [];
            const rows = all.filter(u => u.status !== 'å·²æ³¨é”€' && (!name || `${u.username}${u.name}`.toLowerCase().includes(name)));
            renderCustomerRows(rows, 'deactCustomerBody', 'deact');
            showModal('success','æŸ¥è¯¢å®Œæˆ','å·²å±•ç¤ºå¯è¿›è¡Œæ³¨é”€çš„é¡¾å®¢ã€‚','âœ“');
        }

        function deactivateCustomer(id) {
            const all = adminMockData.customers || [];
            const u = all.find(x => x.id === id);
            if (!u) return;
            u.status = 'å·²æ³¨é”€';
            showModal('warning','æ³¨é”€æˆåŠŸ',`ç”¨æˆ· ${u.username} (${u.name}) å·²æ³¨é”€ã€‚`, 'âš ');
            searchCustomersDeactivate();
        }

        /* ======================= æœåŠ¡å•† æš‚åœ/æ¢å¤ ======================= */
        function renderProviderStatusRows(rows, tbodyId, action) {
            const tbody = document.getElementById(tbodyId);
            if (!tbody) return;
            if (!rows || !rows.length) { tbody.innerHTML = `<tr><td colspan="4" style="text-align:center;color:#888;">æš‚æ— æ•°æ®</td></tr>`; return; }
            if (action === 'suspend') {
                tbody.innerHTML = rows.map(p => `
                    <tr data-id="${p.id}">
                        <td>${p.name}</td>
                        <td>${p.contactPhone || '-'}</td>
                        <td>${p.region || '-'}</td>
                        <td class="action-buttons"><button class="btn btn-warning" onclick="suspendProvider('${p.id}')">æš‚åœ</button></td>
                    </tr>
                `).join('');
            } else {
                tbody.innerHTML = rows.map(p => `
                    <tr data-id="${p.id}">
                        <td>${p.name}</td>
                        <td>${p.region || '-'}</td>
                        <td>${p.contactPhone || '-'}</td>
                        <td class="action-buttons"><button class="btn btn-primary" onclick="restoreProvider('${p.id}')">æ¢å¤</button></td>
                    </tr>
                `).join('');
            }
        }

        function searchProvidersSuspend() {
            const q = (document.getElementById('suspendProviderNameInput')?.value || '').trim().toLowerCase();
            const all = adminMockData.providerSearch || [];
            const rows = all.filter(p => (p.status === 'active') && (!q || (p.name||'').toLowerCase().includes(q)));
            renderProviderStatusRows(rows, 'providerSuspendBody', 'suspend');
            showModal('success','å·²æ˜¾ç¤ºåœ¨è¥æœåŠ¡å•†','å¯åœ¨åˆ—è¡¨ä¸­æ‰§è¡Œæš‚åœæ“ä½œã€‚','âœ“');
        }

        function suspendProvider(id) {
            const all = adminMockData.providerSearch || [];
            const p = all.find(x => x.id === id);
            if (!p) return;
            p.status = 'suspended';
            showModal('warning','æš‚åœæˆåŠŸ',`æœåŠ¡å•† ${p.name} å·²è¢«æš‚åœï¼Œå…¶æ‰€æœ‰æœåŠ¡è¢«æš‚åœï¼Œä¸èƒ½å†æ¥å—æœåŠ¡è®¢å•ã€‚`, 'âš ');
            searchProvidersSuspend();
        }

        function searchProvidersResume() {
            const q = (document.getElementById('resumeProviderNameInput')?.value || '').trim().toLowerCase();
            const all = adminMockData.providerSearch || [];
            const rows = all.filter(p => (p.status === 'suspended') && (!q || (p.name||'').toLowerCase().includes(q)));
            renderProviderStatusRows(rows, 'providerResumeBody', 'resume');
            showModal('success','å·²æ˜¾ç¤ºæš‚åœä¸­çš„æœåŠ¡å•†','å¯åœ¨åˆ—è¡¨ä¸­æ‰§è¡Œæ¢å¤æ“ä½œã€‚','âœ“');
        }

        function restoreProvider(id) {
            const all = adminMockData.providerSearch || [];
            const p = all.find(x => x.id === id);
            if (!p) return;
            p.status = 'active';
            showModal('success','æ¢å¤æˆåŠŸ',`æœåŠ¡å•† ${p.name} çš„è¥ä¸šæƒé™å·²æ¢å¤ï¼Œå…¶æ‰€æœ‰æœåŠ¡æ¢å¤é”€å”®ã€‚`, 'âœ“');
            searchProvidersResume();
        }
    </script>
</body>
</html>
